<!doctype html>
<html lang="en">
<head>
<title>Emacs Configuration</title>
<!-- 2020-12-24 Thu 05:15 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">
<meta name="author" content="Toby Slight">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style>
/* org mode styles on top of twbs */

html {
    position: relative;
    min-height: 100%;
}

body {
    font-size: 18px;
    margin-bottom: 105px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 101px;
    background-color: #f5f5f5;
}

footer > div {
    padding: 10px;
}

footer p {
    margin: 0 0 5px;
    text-align: center;
    font-size: 16px;
}

#table-of-contents {
    margin-top: 20px;
    margin-bottom: 20px;
}

blockquote p {
    font-size: 18px;
}

pre {
    font-size: 16px;
}

.footpara {
    display: inline-block;
}

figcaption {
  font-size: 16px;
  color: #666;
  font-style: italic;
  padding-bottom: 15px;
}

/* from twbs docs */

.bs-docs-sidebar.affix {
    position: static;
}
@media (min-width: 768px) {
    .bs-docs-sidebar {
        padding-left: 20px;
    }
}

/* All levels of nav */
.bs-docs-sidebar .nav > li > a {
    display: block;
    padding: 4px 20px;
    font-size: 14px;
    font-weight: 500;
    color: #999;
}
.bs-docs-sidebar .nav > li > a:hover,
.bs-docs-sidebar .nav > li > a:focus {
    padding-left: 19px;
    color: #A1283B;
    text-decoration: none;
    background-color: transparent;
    border-left: 1px solid #A1283B;
}
.bs-docs-sidebar .nav > .active > a,
.bs-docs-sidebar .nav > .active:hover > a,
.bs-docs-sidebar .nav > .active:focus > a {
    padding-left: 18px;
    font-weight: bold;
    color: #A1283B;
    background-color: transparent;
    border-left: 2px solid #A1283B;
}

/* Nav: second level (shown on .active) */
.bs-docs-sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav > li > a:focus {
    padding-left: 29px;
}
.bs-docs-sidebar .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav > .active:focus > a {
    padding-left: 28px;
    font-weight: 500;
}

/* Nav: third level (shown on .active) */
.bs-docs-sidebar .nav .nav .nav {
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 40px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav .nav > li > a:focus {
    padding-left: 39px;
}
.bs-docs-sidebar .nav .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav .nav > .active:focus > a {
    padding-left: 38px;
    font-weight: 500;
}

/* Show and affix the side nav when space allows it */
@media (min-width: 992px) {
    .bs-docs-sidebar .nav > .active > ul {
        display: block;
    }
    /* Widen the fixed sidebar */
    .bs-docs-sidebar.affix,
    .bs-docs-sidebar.affix-bottom {
        width: 213px;
    }
    .bs-docs-sidebar.affix {
        position: fixed; /* Undo the static from mobile first approach */
        top: 20px;
    }
    .bs-docs-sidebar.affix-bottom {
        position: absolute; /* Undo the static from mobile first approach */
    }
    .bs-docs-sidebar.affix .bs-docs-sidenav,.bs-docs-sidebar.affix-bottom .bs-docs-sidenav {
        margin-top: 0;
        margin-bottom: 0
    }
}
@media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .bs-docs-sidebar.affix-bottom,
    .bs-docs-sidebar.affix {
        width: 263px;
    }
}
</style>
<script>
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script>
</head>
<body>
<div id="content" class="container">
<div class="row"><div class="col-md-3 col-md-push-9"><nav id="table-of-contents">
<div id="text-table-of-contents" class="bs-docs-sidebar">
<ul class="nav">
<li><a href="#sec-1">1. Early Init</a>
<ul class="nav">
<li><a href="#sec-1-1">1.1. Turn off unnecessary UI frills</a></li>
<li><a href="#sec-1-2">1.2. Setup up package.el</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Doom startup speed hacks setup</a>
<ul class="nav">
<li><a href="#sec-2-1">2.1. Avoid garbage collection at startup</a></li>
<li><a href="#sec-2-2">2.2. Unset file-name-handler-alist temporarily</a></li>
</ul>
</li>
<li><a href="#sec-3">3. General Settings</a>
<ul class="nav">
<li><a href="#sec-3-1">3.1. Auto-save</a></li>
<li><a href="#sec-3-2">3.2. Backups</a></li>
<li><a href="#sec-3-3">3.3. Bell</a></li>
<li><a href="#sec-3-4">3.4. Clipboard</a></li>
<li><a href="#sec-3-5">3.5. Line numbers</a></li>
<li><a href="#sec-3-6">3.6. Text filling</a></li>
<li><a href="#sec-3-7">3.7. Delete all on backspace</a></li>
<li><a href="#sec-3-8">3.8. Emacsclient executable</a></li>
<li><a href="#sec-3-9">3.9. No lockfiles</a></li>
<li><a href="#sec-3-10">3.10. Final newline</a></li>
<li><a href="#sec-3-11">3.11. Pop mark on repeat</a></li>
<li><a href="#sec-3-12">3.12. Encryption</a></li>
<li><a href="#sec-3-13">3.13. History</a></li>
<li><a href="#sec-3-14">3.14. Bookmarks</a></li>
<li><a href="#sec-3-15">3.15. Custom settings in /tmp</a></li>
<li><a href="#sec-3-16">3.16. Enable all advanced features</a></li>
<li><a href="#sec-3-17">3.17. Increase message logging max</a></li>
<li><a href="#sec-3-18">3.18. More extensive apropos</a></li>
<li><a href="#sec-3-19">3.19. Mouse yank at point</a></li>
<li><a href="#sec-3-20">3.20. Scrolling</a></li>
<li><a href="#sec-3-21">3.21. Initial startup</a></li>
<li><a href="#sec-3-22">3.22. Passwords</a></li>
<li><a href="#sec-3-23">3.23. Undo limits</a></li>
<li><a href="#sec-3-24">3.24. Uniquify</a></li>
<li><a href="#sec-3-25">3.25. User info</a></li>
<li><a href="#sec-3-26">3.26. Windows</a></li>
<li><a href="#sec-3-27">3.27. Yes or no</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Code Style</a></li>
<li><a href="#sec-5">5. Encoding stuff</a></li>
<li><a href="#sec-6">6. Hooks</a></li>
<li><a href="#sec-7">7. Keybindings</a>
<ul class="nav">
<li><a href="#sec-7-1">7.1. Buffer keybindings</a></li>
<li><a href="#sec-7-2">7.2. Toggle menu bar</a></li>
<li><a href="#sec-7-3">7.3. Frame maximizing and fullscreening</a></li>
<li><a href="#sec-7-4">7.4. Desktop read &amp; save bindings</a></li>
<li><a href="#sec-7-5">7.5. Grep binding</a></li>
<li><a href="#sec-7-6">7.6. Calculator/Calc bindings</a></li>
<li><a href="#sec-7-7">7.7. Toggle stuff</a></li>
<li><a href="#sec-7-8">7.8. Tab-bar mode bindings (Emacs 27+)</a></li>
<li><a href="#sec-7-9">7.9. Special mode keys (help, etc)</a></li>
</ul>
</li>
<li><a href="#sec-8">8. Registers</a></li>
<li><a href="#sec-9">9. Theme/UI</a></li>
<li><a href="#sec-10">10. Buffer functions</a>
<ul class="nav">
<li><a href="#sec-10-1">10.1. Indent Buffer</a></li>
<li><a href="#sec-10-2">10.2. Kill this buffer</a></li>
<li><a href="#sec-10-3">10.3. Last buffer</a></li>
<li><a href="#sec-10-4">10.4. Nuke buffers</a></li>
<li><a href="#sec-10-5">10.5. Remove stuff from a buffer</a></li>
<li><a href="#sec-10-6">10.6. Save buffers silently</a></li>
<li><a href="#sec-10-7">10.7. Toggle maximize buffer</a></li>
</ul>
</li>
<li><a href="#sec-11">11. Complilation related</a>
<ul class="nav">
<li><a href="#sec-11-1">11.1. Prefer newer over compiled</a></li>
<li><a href="#sec-11-2">11.2. Place point after complilation error</a></li>
<li><a href="#sec-11-3">11.3. Ensure init files are byte compiled</a></li>
<li><a href="#sec-11-4">11.4. Recompile config</a></li>
<li><a href="#sec-11-5">11.5. Auto recompile Emacs Lisp</a></li>
<li><a href="#sec-11-6">11.6. Make compilation buffers more colorful</a></li>
</ul>
</li>
<li><a href="#sec-12">12. Editing functions</a>
<ul class="nav">
<li><a href="#sec-12-1">12.1. Aligning symbols</a></li>
<li><a href="#sec-12-2">12.2. Change numbers</a></li>
<li><a href="#sec-12-3">12.3. Delete inside delimiters</a></li>
<li><a href="#sec-12-4">12.4. Generate a numbered list</a></li>
<li><a href="#sec-12-5">12.5. Smart that the default functions</a>
<ul class="nav">
<li><a href="#sec-12-5-1">12.5.1. Fill or unfill</a></li>
<li><a href="#sec-12-5-2">12.5.2. Narrow or widen DWIM</a></li>
<li><a href="#sec-12-5-3">12.5.3. Beginning of line</a></li>
<li><a href="#sec-12-5-4">12.5.4. Kill ring save</a></li>
<li><a href="#sec-12-5-5">12.5.5. Kill region</a></li>
</ul>
</li>
<li><a href="#sec-12-6">12.6. Case insensitive sort-lines</a></li>
<li><a href="#sec-12-7">12.7. Surround stuff</a></li>
<li><a href="#sec-12-8">12.8. Untabify a buffer</a></li>
<li><a href="#sec-12-9">12.9. XML pretty print</a></li>
<li><a href="#sec-12-10">12.10. Yank pop forwards</a></li>
<li><a href="#sec-12-11">12.11. Editing related keyboard built-in keybindings</a></li>
<li><a href="#sec-12-12">12.12. DWIM replacements for changing case</a></li>
</ul>
</li>
<li><a href="#sec-13">13. File manipulation functions</a>
<ul class="nav">
<li><a href="#sec-13-1">13.1. Delete this file</a></li>
<li><a href="#sec-13-2">13.2. Yank current file name to kill ring</a></li>
<li><a href="#sec-13-3">13.3. Make backup of current file</a></li>
<li><a href="#sec-13-4">13.4. Rename file and buffer</a></li>
<li><a href="#sec-13-5">13.5. Open current file as root</a></li>
</ul>
</li>
<li><a href="#sec-14">14. Miscellaneous functions</a></li>
<li><a href="#sec-15">15. Window manipulation functions</a>
<ul class="nav">
<li><a href="#sec-15-1">15.1. Kill buffer other window</a></li>
<li><a href="#sec-15-2">15.2. Toggle focus to last window</a></li>
<li><a href="#sec-15-3">15.3. Open a buffer in another window</a></li>
<li><a href="#sec-15-4">15.4. Switch to the previous window</a></li>
<li><a href="#sec-15-5">15.5. Scroll lines up like Ctrl-e in Vim</a></li>
<li><a href="#sec-15-6">15.6. Scroll lines down like Ctrl-y in Vim</a></li>
<li><a href="#sec-15-7">15.7. Open last buffer in horizontal split</a></li>
<li><a href="#sec-15-8">15.8. Open last buffer in vertical split</a></li>
<li><a href="#sec-15-9">15.9. Toggle vertical -&gt; horizontal splits</a></li>
<li><a href="#sec-15-10">15.10. Transpose windows</a></li>
<li><a href="#sec-15-11">15.11. Windmove keybindings</a></li>
<li><a href="#sec-15-12">15.12. Winner mode</a></li>
<li><a href="#sec-15-13">15.13. Scroll other window down</a></li>
</ul>
</li>
<li><a href="#sec-16">16. Emacs built in package configuration</a>
<ul class="nav">
<li><a href="#sec-16-1">16.1. Auto-revert</a></li>
<li><a href="#sec-16-2">16.2. Dabbrev</a></li>
<li><a href="#sec-16-3">16.3. Dired</a>
<ul class="nav">
<li><a href="#sec-16-3-1">16.3.1. Dired AUX</a></li>
<li><a href="#sec-16-3-2">16.3.2. Find Dired</a></li>
<li><a href="#sec-16-3-3">16.3.3. Writeable Dired</a></li>
</ul>
</li>
<li><a href="#sec-16-4">16.4. Doc View</a></li>
<li><a href="#sec-16-5">16.5. Ediff</a></li>
<li><a href="#sec-16-6">16.6. Electric</a></li>
<li><a href="#sec-16-7">16.7. ERC</a></li>
<li><a href="#sec-16-8">16.8. Eshell</a></li>
<li><a href="#sec-16-9">16.9. Gnus</a></li>
<li><a href="#sec-16-10">16.10. Highlight changes</a></li>
<li><a href="#sec-16-11">16.11. Hippie Expand</a></li>
<li><a href="#sec-16-12">16.12. Icomplete</a>
<ul class="nav">
<li><a href="#sec-16-12-1">16.12.1. Change completion styles</a></li>
<li><a href="#sec-16-12-2">16.12.2. Icomplete settings</a></li>
<li><a href="#sec-16-12-3">16.12.3. Icomplete keybindings</a></li>
</ul>
</li>
<li><a href="#sec-16-13">16.13. Imenu</a></li>
<li><a href="#sec-16-14">16.14. Isearch</a></li>
<li><a href="#sec-16-15">16.15. Minibuffer</a>
<ul class="nav">
<li><a href="#sec-16-15-1">16.15.1. Save history mode</a></li>
<li><a href="#sec-16-15-2">16.15.2. Completion framework settings</a></li>
<li><a href="#sec-16-15-3">16.15.3. Misc Minibuffer settings</a></li>
</ul>
</li>
<li><a href="#sec-16-16">16.16. Org</a>
<ul class="nav">
<li><a href="#sec-16-16-1">16.16.1. Org global bindings</a></li>
</ul>
</li>
<li><a href="#sec-16-17">16.17. Pending delete</a></li>
<li><a href="#sec-16-18">16.18. Prettify Symbols</a></li>
<li><a href="#sec-16-19">16.19. Recentf</a></li>
<li><a href="#sec-16-20">16.20. Show paren</a></li>
<li><a href="#sec-16-21">16.21. Saveplace</a></li>
<li><a href="#sec-16-22">16.22. Shell script</a></li>
<li><a href="#sec-16-23">16.23. Subword</a></li>
<li><a href="#sec-16-24">16.24. Term</a>
<ul class="nav">
<li><a href="#sec-16-24-1">16.24.1. ANSI Term launcher</a></li>
<li><a href="#sec-16-24-2">16.24.2. Switch to ANSI Term</a></li>
<li><a href="#sec-16-24-3">16.24.3. Lazy load</a></li>
<li><a href="#sec-16-24-4">16.24.4. Set term coding system to UTF-8</a></li>
</ul>
</li>
<li><a href="#sec-16-25">16.25. Tramp</a></li>
<li><a href="#sec-16-26">16.26. Version Control</a></li>
<li><a href="#sec-16-27">16.27. Whitespace</a></li>
</ul>
</li>
<li><a href="#sec-17">17. Third party package configuration</a>
<ul class="nav">
<li><a href="#sec-17-1">17.1. Setup package.el and use-package</a></li>
<li><a href="#sec-17-2">17.2. Ansible</a></li>
<li><a href="#sec-17-3">17.3. Async</a></li>
<li><a href="#sec-17-4">17.4. Blacken</a></li>
<li><a href="#sec-17-5">17.5. Default text scaling</a></li>
<li><a href="#sec-17-6">17.6. Diminish</a></li>
<li><a href="#sec-17-7">17.7. Docker</a></li>
<li><a href="#sec-17-8">17.8. Exec path from shell</a></li>
<li><a href="#sec-17-9">17.9. Flycheck</a></li>
<li><a href="#sec-17-10">17.10. Git</a>
<ul class="nav">
<li><a href="#sec-17-10-1">17.10.1. Git Timemachine</a></li>
<li><a href="#sec-17-10-2">17.10.2. Gitlab CI</a></li>
<li><a href="#sec-17-10-3">17.10.3. Lazygit</a></li>
<li><a href="#sec-17-10-4">17.10.4. Magit</a></li>
</ul>
</li>
<li><a href="#sec-17-11">17.11. Go mode</a></li>
<li><a href="#sec-17-12">17.12. Hungry delete</a></li>
<li><a href="#sec-17-13">17.13. JS2 mode</a></li>
<li><a href="#sec-17-14">17.14. JSON</a></li>
<li><a href="#sec-17-15">17.15. Markdown</a></li>
<li><a href="#sec-17-16">17.16. Node JS</a></li>
<li><a href="#sec-17-17">17.17. Org</a>
<ul class="nav">
<li><a href="#sec-17-17-1">17.17.1. Org Bullets</a></li>
<li><a href="#sec-17-17-2">17.17.2. HTMLize</a></li>
<li><a href="#sec-17-17-3">17.17.3. Toc Org</a></li>
<li><a href="#sec-17-17-4">17.17.4. PDF Tools</a></li>
</ul>
</li>
<li><a href="#sec-17-18">17.18. Powershell</a></li>
<li><a href="#sec-17-19">17.19. Powerline</a></li>
<li><a href="#sec-17-20">17.20. Projectile</a></li>
<li><a href="#sec-17-21">17.21. RESTClient</a></li>
<li><a href="#sec-17-22">17.22. systemd</a></li>
<li><a href="#sec-17-23">17.23. Terraform</a></li>
<li><a href="#sec-17-24">17.24. Web Mode</a></li>
<li><a href="#sec-17-25">17.25. Writeable Grep</a></li>
<li><a href="#sec-17-26">17.26. Which Key</a></li>
<li><a href="#sec-17-27">17.27. YAML</a></li>
<li><a href="#sec-17-28">17.28. Yasnippet</a>
<ul class="nav">
<li><a href="#sec-17-28-1">17.28.1. Snippets</a></li>
<li><a href="#sec-17-28-2">17.28.2. Classic snippets</a></li>
<li><a href="#sec-17-28-3">17.28.3. Custom Yasnippet snippets</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
</div><div class="col-md-9 col-md-pull-3"><h1 class="title">Emacs Configuration</h1>
<p>
A fairly standard <a href="https://en.wikipedia.org/wiki/Literate_programming">literate</a> Emacs configuration using <a href="https://orgmode.org/">Org mode</a>.
</p>

<p>
Quickest way to get setup is to back up your current config:
</p>

<div class="org-src-container">

<pre class="src src-shell">mv ~/.emacs.d{,.bak}
</pre>
</div>

<p>
Then clone this repo to replace it:
</p>

<div class="org-src-container">

<pre class="src src-shell">git clone https://gitlab.com/tspub/lisp/emacs ~/.emacs.d
</pre>
</div>

<p>
Alternatively you can clone to a different location and <code>org-babel-tangle</code> this
file with <code>C-c C-v t</code> whilst visiting this file.
</p>

<p>
That will copy all the source code blocks in this file and overwrite whatever
you have in your <code>$HOME/.emacs.d/early-init.el</code> and <code>$HOME/.emacs.d/init.el</code>
files, so make sure you've backed up anything you don't want to lose!
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Early Init</h2>
<div class="outline-text-2" id="text-1">
<p>
From <code>/etc/NEWS</code>
</p>

<blockquote>
<p>
Emacs can now be configured using an early init file. The file is called
early-init.el, in user-emacs-directory. It is loaded very early in the startup
process: before graphical elements such as the tool bar are initialized, and
before the package manager is initialized. The primary purpose is to allow
customizing how the package system is initialized given that initialization now
happens before loading the regular init file (see below).
</p>

<p>
We recommend against putting any customizations in this file that don't need to
be set up before initializing installed add-on packages, because the early init
file is read too early into the startup process, and some important parts of
the Emacs session, such as 'window-system' and other GUI features, are not yet
set up, which could make some customization fail to work.
</p>
</blockquote>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Turn off unnecessary UI frills</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">when</span> (fboundp 'menu-bar-mode) (menu-bar-mode -1))
(<span style="color: #8ac6f2; font-weight: bold;">when</span> (fboundp 'scroll-bar-mode) (scroll-bar-mode -1))
(<span style="color: #8ac6f2; font-weight: bold;">when</span> (fboundp 'tool-bar-mode) (tool-bar-mode -1))
(<span style="color: #8ac6f2; font-weight: bold;">when</span> (fboundp 'tooltip-mode) (tooltip-mode -1))
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> frame-resize-pixelwise t) <span style="color: #99968b;">;; </span><span style="color: #99968b;">jwm resize fix</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Setup up package.el</h3>
<div class="outline-text-3" id="text-1-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;; </span><span style="color: #99968b;">This must be true otherwise use-package won't load!</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> package-enable-at-startup t)
<span style="color: #99968b;">;; </span><span style="color: #99968b;">Allow loading from the package cache.</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> package-quickstart t)
<span style="color: #99968b;">;; </span><span style="color: #99968b;">Don't write (package-initialize) to my init file!</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> package--init-file-ensured t)
<span style="color: #99968b;">;; </span><span style="color: #99968b;">Setup up archives</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> package-archives
      '((<span style="color: #95e454;">"melpa"</span> . <span style="color: #95e454;">"https://melpa.org/packages/"</span>)
        (<span style="color: #95e454;">"gnu"</span> . <span style="color: #95e454;">"https://elpa.gnu.org/packages/"</span>)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Doom startup speed hacks setup</h2>
<div class="outline-text-2" id="text-2">
<p>
Stole this stuff from <a href="https://github.com/hlissner/doom-emacs/blob/develop/docs/faq.org#how-does-doom-start-up-so-quickly">here</a>.
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Avoid garbage collection at startup</h3>
<div class="outline-text-3" id="text-2-1">
<p>
The GC can easily double startup time, so we suppress it at startup by turning
up gc-cons-threshold (and perhaps gc-cons-percentage) temporarily:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> gc-cons-threshold most-positive-fixnum <span style="color: #99968b;">; </span><span style="color: #99968b;">2^61 bytes</span>
      gc-cons-percentage 0.6)
</pre>
</div>

<p>
It is important to reset the garbage collection settings eventually. Not doing
so will cause garbage collection freezes during long-term interactive
use. Conversely, a gc-cons-threshold that is too small will cause
stuttering. We use 16mb as our default.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/default-gc-cons-settings</span> ()
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gc-cons-threshold 16777216 <span style="color: #99968b;">; </span><span style="color: #99968b;">16mb</span>
        gc-cons-percentage 0.1))
(add-hook 'emacs-startup-hook 'my/default-gc-cons-settings)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Unset file-name-handler-alist temporarily</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Emacs consults this variable every time a file is read or library loaded, or
when certain functions in the file API are used (like expand-file-name or
file-truename).
</p>

<p>
Emacs does this to check if a special handler is needed to read that file, but
none of them are (typically) necessary at startup, so we disable them
(temporarily!):
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">defvar</span> <span style="color: #cae682;">my/default-file-name-handler-alist</span> file-name-handler-alist)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> file-name-handler-alist nil)
</pre>
</div>

<p>
Don’t forget to restore file-name-handler-alist, otherwise TRAMP won’t work and
compressed/encrypted files won’t open.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/restore-default-file-name-handler-alist</span> ()
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> file-name-handler-alist my/default-file-name-handler-alist))
(add-hook 'emacs-startup-hook 'my/restore-default-file-name-handler-alist)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> General Settings</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Auto-save</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> auto-save-file-name-transforms '((<span style="color: #95e454;">".*"</span> <span style="color: #95e454;">"~/.emacs.d/auto-save-list/"</span> t)))
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> auto-save-timeout 5)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Backups</h3>
<div class="outline-text-3" id="text-3-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> backup-directory-alist '((<span style="color: #95e454;">"."</span> . <span style="color: #95e454;">"~/.emacs.d/backups"</span>)))
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> backup-by-copying t) <span style="color: #99968b;">;; </span><span style="color: #99968b;">copy files, don't rename them.</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> delete-old-versions t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> kept-new-versions 12)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> kept-old-versions 12)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Bell</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> ring-bell-function 'ignore)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> visible-bell 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Clipboard</h3>
<div class="outline-text-3" id="text-3-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> select-enable-clipboard t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> select-enable-primary t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> x-select-enable-clipboard-manager nil)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> save-interprogram-paste-before-kill t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> Line numbers</h3>
<div class="outline-text-3" id="text-3-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> display-line-numbers 'relative)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> Text filling</h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq-default</span> fill-column 79)
(set-default 'truncate-lines t)
(add-hook 'text-mode-hook 'auto-fill-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7"><span class="section-number-3">3.7</span> Delete all on backspace</h3>
<div class="outline-text-3" id="text-3-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> backward-delete-char-untabify-method 'all)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-8" class="outline-3">
<h3 id="sec-3-8"><span class="section-number-3">3.8</span> Emacsclient executable</h3>
<div class="outline-text-3" id="text-3-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;; </span><span style="color: #99968b;">https://emacs.stackexchange.com/a/31061</span>
(<span style="color: #8ac6f2; font-weight: bold;">when</span> (equal system-type 'windows-nt)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (file-readable-p <span style="color: #95e454;">"C:/Program Files/Emacs/x86_64/bin/emacsclient.exe"</span>)
      (<span style="color: #8ac6f2; font-weight: bold;">setq-default</span> with-editor-emacsclient-executable <span style="color: #95e454;">"C:/Program Files/Emacs/x86_64/bin/emacsclient.exe"</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">setq-default</span> with-editor-emacsclient-executable nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-9" class="outline-3">
<h3 id="sec-3-9"><span class="section-number-3">3.9</span> No lockfiles</h3>
<div class="outline-text-3" id="text-3-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> create-lockfiles nil) <span style="color: #99968b;">;; </span><span style="color: #99968b;">prevent creation of .#myfile.ext</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-10" class="outline-3">
<h3 id="sec-3-10"><span class="section-number-3">3.10</span> Final newline</h3>
<div class="outline-text-3" id="text-3-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> require-final-newline t) <span style="color: #99968b;">;; </span><span style="color: #99968b;">useful for crontab</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-11" class="outline-3">
<h3 id="sec-3-11"><span class="section-number-3">3.11</span> Pop mark on repeat</h3>
<div class="outline-text-3" id="text-3-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> set-mark-command-repeat-pop t) <span style="color: #99968b;">;; </span><span style="color: #99968b;">repeating C-SPC after popping, pops it</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-12" class="outline-3">
<h3 id="sec-3-12"><span class="section-number-3">3.12</span> Encryption</h3>
<div class="outline-text-3" id="text-3-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> epa-file-cache-passphrase-for-symmetric-encryption t)
(<span style="color: #8ac6f2; font-weight: bold;">setf</span> epg-pinentry-mode 'loopback)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-13" class="outline-3">
<h3 id="sec-3-13"><span class="section-number-3">3.13</span> History</h3>
<div class="outline-text-3" id="text-3-13">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> history-length t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> history-delete-duplicates t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-14" class="outline-3">
<h3 id="sec-3-14"><span class="section-number-3">3.14</span> Bookmarks</h3>
<div class="outline-text-3" id="text-3-14">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> bookmark-save-flag 1) <span style="color: #99968b;">;; </span><span style="color: #99968b;">always save bookmarks to file</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-15" class="outline-3">
<h3 id="sec-3-15"><span class="section-number-3">3.15</span> Custom settings in /tmp</h3>
<div class="outline-text-3" id="text-3-15">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> custom-file (make-temp-file <span style="color: #95e454;">"emacs-custom"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-16" class="outline-3">
<h3 id="sec-3-16"><span class="section-number-3">3.16</span> Enable all advanced features</h3>
<div class="outline-text-3" id="text-3-16">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> disabled-command-function nil) <span style="color: #99968b;">;; </span><span style="color: #99968b;">enable all "advanced" features</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-17" class="outline-3">
<h3 id="sec-3-17"><span class="section-number-3">3.17</span> Increase message logging max</h3>
<div class="outline-text-3" id="text-3-17">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> message-log-max 10000)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-18" class="outline-3">
<h3 id="sec-3-18"><span class="section-number-3">3.18</span> More extensive apropos</h3>
<div class="outline-text-3" id="text-3-18">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> apropos-do-all t) <span style="color: #99968b;">;; </span><span style="color: #99968b;">doesn't seem to be documented anywhere..</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-19" class="outline-3">
<h3 id="sec-3-19"><span class="section-number-3">3.19</span> Mouse yank at point</h3>
<div class="outline-text-3" id="text-3-19">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> mouse-yank-at-point t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-20" class="outline-3">
<h3 id="sec-3-20"><span class="section-number-3">3.20</span> Scrolling</h3>
<div class="outline-text-3" id="text-3-20">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> scroll-step 4)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> scroll-margin 6)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> scroll-conservatively 8)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> scroll-preserve-screen-position t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-21" class="outline-3">
<h3 id="sec-3-21"><span class="section-number-3">3.21</span> Initial startup</h3>
<div class="outline-text-3" id="text-3-21">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">display-startup-echo-area-message</span> ()
  <span style="color: #95e454;">"Redefine this function to be more useful."</span>
  (message <span style="color: #95e454;">"Started in %s. Hacks &amp; Glory await! :-)"</span> (emacs-init-time)))
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> inhibit-startup-screen t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> initial-scratch-message nil)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> initial-major-mode 'fundamental-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-22" class="outline-3">
<h3 id="sec-3-22"><span class="section-number-3">3.22</span> Passwords</h3>
<div class="outline-text-3" id="text-3-22">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq password-cache t) ; enable password caching</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq password-cache-expiry 3600) ; for one hour (time in secs)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-23" class="outline-3">
<h3 id="sec-3-23"><span class="section-number-3">3.23</span> Undo limits</h3>
<div class="outline-text-3" id="text-3-23">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;; </span><span style="color: #99968b;">http://www.dr-qubit.org/Lost_undo-tree_history.html</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> undo-limit 80000000)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> undo-strong-limit 90000000)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-24" class="outline-3">
<h3 id="sec-3-24"><span class="section-number-3">3.24</span> Uniquify</h3>
<div class="outline-text-3" id="text-3-24">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> uniquify-buffer-name-style 'forward)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> uniquify-strip-common-suffix t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> uniquify-after-kill-buffer-p t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-25" class="outline-3">
<h3 id="sec-3-25"><span class="section-number-3">3.25</span> User info</h3>
<div class="outline-text-3" id="text-3-25">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> user-full-name <span style="color: #95e454;">"Toby Slight"</span>)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> user-mail-address <span style="color: #95e454;">"tslight@pm.me"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-26" class="outline-3">
<h3 id="sec-3-26"><span class="section-number-3">3.26</span> Windows</h3>
<div class="outline-text-3" id="text-3-26">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> split-width-threshold 160)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> split-height-threshold 80)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> auto-window-vscroll nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-27" class="outline-3">
<h3 id="sec-3-27"><span class="section-number-3">3.27</span> Yes or no</h3>
<div class="outline-text-3" id="text-3-27">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(fset 'yes-or-no-p 'y-or-n-p) <span style="color: #99968b;">;; </span><span style="color: #99968b;">never have to type full word</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> confirm-kill-emacs 'y-or-n-p)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Code Style</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> c-default-style <span style="color: #95e454;">"bsd"</span>)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> c-basic-offset 4)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> css-indent-offset 2)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> js-indent-level 2)

<span style="color: #99968b;">;; </span><span style="color: #99968b;">If indent-tabs-mode is t, it may use tab, resulting in mixed spaces and tabs</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq-default</span> indent-tabs-mode nil)

(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'python
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> python-fill-docstring-style 'django)
  (message <span style="color: #95e454;">"Lazy loaded python :-)"</span>))

<span style="color: #99968b;">;; </span><span style="color: #99968b;">make tab key do indent first then completion.</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq-default</span> tab-always-indent 'complete)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Encoding stuff</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/convert-to-unix-coding-system</span> ()
  <span style="color: #95e454;">"Change the current buffer's file encoding to unix."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((coding-str (symbol-name buffer-file-coding-system)))
    (<span style="color: #8ac6f2; font-weight: bold;">when</span> (string-match <span style="color: #95e454;">"-</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">(?:</span><span style="color: #95e454;">dos</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">|</span><span style="color: #95e454;">mac</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">)</span><span style="color: #95e454;">$"</span> coding-str)
      (set-buffer-file-coding-system 'unix))))
(global-set-key (kbd <span style="color: #95e454;">"C-x RET u"</span>) 'my/convert-to-unix-coding-system)

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/hide-dos-eol</span> ()
  <span style="color: #95e454;">"Do not show ^M in files containing mixed UNIX and DOS line endings."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> buffer-display-table (make-display-table))
  (aset buffer-display-table ?\^M []))
(add-hook 'find-file-hook 'my/hide-dos-eol)

(<span style="color: #8ac6f2; font-weight: bold;">setq-default</span> buffer-file-coding-system 'utf-8-unix)
(<span style="color: #8ac6f2; font-weight: bold;">setq-default</span> default-buffer-file-coding-system 'utf-8-unix)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> coding-system-for-read 'utf-8-unix)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> coding-system-for-write 'utf-8-unix)
(set-language-environment <span style="color: #95e454;">"UTF-8"</span>)
(set-default-coding-systems 'utf-8-unix)
(prefer-coding-system 'utf-8-unix)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Hooks</h2>
<div class="outline-text-2" id="text-6">
<p>
Miscellaneous hooks
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'emacs-lisp-mode-hook 'eldoc-mode)
(add-hook 'lisp-interaction-mode-hook 'eldoc-mode)
(add-hook 'lisp-mode-hook 'eldoc-mode)
(add-hook 'prog-mode-hook 'hl-line-mode)
(add-hook 'text-mode-hook 'hl-line-mode)
(add-hook 'prog-mode-hook 'hs-minor-mode)
(add-hook 'prog-mode-hook 'display-line-numbers-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Keybindings</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> Buffer keybindings</h3>
<div class="outline-text-3" id="text-7-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #95e454;">"C-x M-e"</span>) 'eval-buffer)
(global-set-key (kbd <span style="color: #95e454;">"C-x c"</span>) 'save-buffers-kill-emacs)
(autoload 'ibuffer <span style="color: #95e454;">"ibuffer"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-x C-b"</span>) 'ibuffer)
(global-set-key (kbd <span style="color: #95e454;">"C-x M-k"</span>) 'kill-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> Toggle menu bar</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #95e454;">"C-c M-m"</span>) 'menu-bar-mode)
(global-set-key (kbd <span style="color: #95e454;">"S-&lt;f10&gt;"</span>) 'menu-bar-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> Frame maximizing and fullscreening</h3>
<div class="outline-text-3" id="text-7-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #95e454;">"C-&lt;f10&gt;"</span>) 'toggle-frame-maximized)
(global-set-key (kbd <span style="color: #95e454;">"C-&lt;f11&gt;"</span>) 'toggle-frame-fullscreen)
(global-set-key (kbd <span style="color: #95e454;">"C-s-f"</span>) 'toggle-frame-fullscreen)
(global-set-key (kbd <span style="color: #95e454;">"C-s-m"</span>) 'toggle-frame-maximized)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4"><span class="section-number-3">7.4</span> Desktop read &amp; save bindings</h3>
<div class="outline-text-3" id="text-7-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #95e454;">"C-c M-d r"</span>) 'desktop-read)
(global-set-key (kbd <span style="color: #95e454;">"C-c M-d s"</span>) 'desktop-save)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-5" class="outline-3">
<h3 id="sec-7-5"><span class="section-number-3">7.5</span> Grep binding</h3>
<div class="outline-text-3" id="text-7-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload 'grep <span style="color: #95e454;">"grep"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-c C-g"</span>) 'grep)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-6" class="outline-3">
<h3 id="sec-7-6"><span class="section-number-3">7.6</span> Calculator/Calc bindings</h3>
<div class="outline-text-3" id="text-7-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload 'calculator <span style="color: #95e454;">"calculator"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-c c"</span>) 'calculator)
(autoload 'calc <span style="color: #95e454;">"calc"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-c M-c"</span>) 'calc)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-7" class="outline-3">
<h3 id="sec-7-7"><span class="section-number-3">7.7</span> Toggle stuff</h3>
<div class="outline-text-3" id="text-7-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #95e454;">"C-c M-t a"</span>) 'toggle-text-mode-autofill)
(global-set-key (kbd <span style="color: #95e454;">"C-c M-t t"</span>) 'toggle-truncate-lines)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-8" class="outline-3">
<h3 id="sec-7-8"><span class="section-number-3">7.8</span> Tab-bar mode bindings (Emacs 27+)</h3>
<div class="outline-text-3" id="text-7-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">when</span> (version&lt; emacs-version <span style="color: #95e454;">"27"</span>)
  (global-set-key (kbd <span style="color: #95e454;">"C-x t t"</span>) 'tab-bar-select-tab-by-name)
  (global-set-key (kbd <span style="color: #95e454;">"C-x t c"</span>) 'tab-bar-new-tab)
  (global-set-key (kbd <span style="color: #95e454;">"C-x t k"</span>) 'tab-bar-close-tab)
  (global-set-key (kbd <span style="color: #95e454;">"C-x t n"</span>) 'tab-bar-switch-to-next-tab)
  (global-set-key (kbd <span style="color: #95e454;">"C-x t p"</span>) 'tab-bar-switch-to-prev-tab)
  (global-set-key (kbd <span style="color: #95e454;">"C-x t l"</span>) 'tab-bar-switch-to-recent-tab))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-9" class="outline-3">
<h3 id="sec-7-9"><span class="section-number-3">7.9</span> Special mode keys (help, etc)</h3>
<div class="outline-text-3" id="text-7-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;; </span><span style="color: #99968b;">for help modes, and simple/special modes</span>
(define-key special-mode-map <span style="color: #95e454;">"n"</span> #'forward-button)
(define-key special-mode-map <span style="color: #95e454;">"p"</span> #'backward-button)
(define-key special-mode-map <span style="color: #95e454;">"f"</span> #'forward-button)
(define-key special-mode-map <span style="color: #95e454;">"b"</span> #'backward-button)
(define-key special-mode-map <span style="color: #95e454;">"n"</span> #'widget-forward)
(define-key special-mode-map <span style="color: #95e454;">"p"</span> #'widget-backward)
(define-key special-mode-map <span style="color: #95e454;">"f"</span> #'widget-forward)
(define-key special-mode-map <span style="color: #95e454;">"b"</span> #'widget-backward)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Registers</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/jump-to-register-other-window</span> ()
  <span style="color: #95e454;">"Tin job."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (jump-to-register (register-read-with-preview <span style="color: #95e454;">"Jump to register"</span>)))

(global-set-key (kbd <span style="color: #95e454;">"C-x j"</span>) 'jump-to-register)
(define-key ctl-x-4-map <span style="color: #95e454;">"j"</span> 'my/jump-to-register-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Theme/UI</h2>
<div class="outline-text-2" id="text-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/after-make-frame</span> (frame)
  <span style="color: #95e454;">"Add custom settings after making the FRAME."</span>
  (select-frame frame)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (display-graphic-p)
      (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
        (<span style="color: #8ac6f2; font-weight: bold;">when</span> (eq system-type 'windows-nt)
          (set-frame-font <span style="color: #95e454;">"Cascadia Mono 10"</span> nil t))
        (<span style="color: #8ac6f2; font-weight: bold;">when</span> (eq system-type 'darwin)
          (set-frame-font <span style="color: #95e454;">"Monaco 10"</span> nil t))
        (<span style="color: #8ac6f2; font-weight: bold;">when</span> (<span style="color: #8ac6f2; font-weight: bold;">or</span> (eq system-type 'gnu/linux)
                  (eq system-type 'berkeley-unix))
          (set-frame-font <span style="color: #95e454;">"Monospace 11"</span> nil t))
        (load-theme 'wombat))
    (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
      (load-theme 'manoj-dark)
      (xterm-mouse-mode 1)
      (mouse-avoidance-mode 'banish)
      <span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq linum-format "%d ")</span>
      (<span style="color: #8ac6f2; font-weight: bold;">setq</span> mouse-wheel-follow-mouse 't) <span style="color: #99968b;">;; </span><span style="color: #99968b;">scroll window under mouse</span>
      (<span style="color: #8ac6f2; font-weight: bold;">setq</span> mouse-wheel-progressive-speed nil) <span style="color: #99968b;">;; </span><span style="color: #99968b;">don't accelerate scrolling</span>
      (<span style="color: #8ac6f2; font-weight: bold;">setq</span> mouse-wheel-scroll-amount '(1 ((shift) . 1))) <span style="color: #99968b;">;; </span><span style="color: #99968b;">one line at a time</span>
      (global-set-key [mouse-4] '(lambda () (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>) (scroll-down 1)))
      (global-set-key [mouse-5] '(lambda () (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>) (scroll-up 1))))))

(<span style="color: #8ac6f2; font-weight: bold;">if</span> (daemonp)
    (add-hook 'after-make-frame-functions #'my/after-make-frame(selected-frame))
  (my/after-make-frame(selected-frame)))
</pre>
</div>

<p>
Modeline configuration
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq display-time-format "%H:%M %d/%m")</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq display-time-default-load-average 'nil)</span>
(column-number-mode t)
<span style="color: #99968b;">;; </span><span style="color: #99968b;">(display-time-mode t)</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">(display-battery-mode t)</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">(size-indication-mode t)</span>
</pre>
</div>

<p>
Disable the current theme, before loading a new one.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">defadvice</span> <span style="color: #cae682;">load-theme</span> (before theme-dont-propagate activate)
  <span style="color: #95e454;">"Disable theme before loading new one."</span>
  (mapc #'disable-theme custom-enabled-themes))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/disable-themes</span> ()
  <span style="color: #95e454;">"Disable all custom themes in one fail swoop."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (mapc #'disable-theme custom-enabled-themes))
(global-set-key (kbd <span style="color: #95e454;">"C-c M-t C-t"</span>) 'my/disable-themes)
</pre>
</div>

<p>
Maximize the frame on launch and disable scroll bars
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> default-frame-alist
      '((fullscreen . maximized) (vertical-scroll-bars . nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Buffer functions</h2>
<div class="outline-text-2" id="text-10">
<p>
A collection of useful functions for manipulating buffers in various ways that
I've collected (stolen!) or written over the years.
</p>
</div>

<div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> Indent Buffer</h3>
<div class="outline-text-3" id="text-10-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/indent-buffer</span> ()
  <span style="color: #95e454;">"Indent the contents of a buffer."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (indent-region (point-min) (point-max)))
(global-set-key (kbd <span style="color: #95e454;">"C-c M-i"</span>) 'my/indent-buffer)
(add-hook 'before-save-hook 'my/indent-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2"><span class="section-number-3">10.2</span> Kill this buffer</h3>
<div class="outline-text-3" id="text-10-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/kill-this-buffer</span> ()
  <span style="color: #95e454;">"Kill the current buffer - `</span><span style="color: #e5786d;">kill-this-buffer</span><span style="color: #95e454;">' is unreliable."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (kill-buffer (current-buffer)))
(global-set-key (kbd <span style="color: #95e454;">"C-x k"</span>) 'my/kill-this-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-3" class="outline-3">
<h3 id="sec-10-3"><span class="section-number-3">10.3</span> Last buffer</h3>
<div class="outline-text-3" id="text-10-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/last-buffer</span> ()
  <span style="color: #95e454;">"Switch back and forth between two buffers easily."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (switch-to-buffer (other-buffer (current-buffer) 1)))
(global-set-key (kbd <span style="color: #95e454;">"C-c b"</span>) 'my/last-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-4" class="outline-3">
<h3 id="sec-10-4"><span class="section-number-3">10.4</span> Nuke buffers</h3>
<div class="outline-text-3" id="text-10-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/nuke-buffers</span> ()
  <span style="color: #95e454;">"Kill all buffers, leaving *scratch* only."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (mapc
   (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> (buffer)
     (kill-buffer buffer))
   (buffer-list))
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> current-prefix-arg
      (delete-other-windows)))
(global-set-key (kbd <span style="color: #95e454;">"C-c M-n"</span>) 'my/nuke-buffers)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-5" class="outline-3">
<h3 id="sec-10-5"><span class="section-number-3">10.5</span> Remove stuff from a buffer</h3>
<div class="outline-text-3" id="text-10-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/remove-from-buffer</span> (string)
  <span style="color: #95e454;">"Remove all occurences of STRING from the whole buffer."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"sString to remove: "</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">save-match-data</span>
    (<span style="color: #8ac6f2; font-weight: bold;">save-excursion</span>
      (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((count 0))
        (goto-char (point-min))
        (<span style="color: #8ac6f2; font-weight: bold;">while</span> (re-search-forward string (point-max) t)
          (<span style="color: #8ac6f2; font-weight: bold;">setq</span> count (+ count 1))
          (replace-match <span style="color: #95e454;">""</span> nil nil))
        (message (format <span style="color: #95e454;">"%d %s removed from buffer."</span> count string))))))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/remove-character-number</span> (number)
  <span style="color: #95e454;">"Remove all occurences of a control character NUMBER.</span>
<span style="color: #95e454;">Excluding ^I (tabs) and ^J (newline)."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (<span style="color: #8ac6f2; font-weight: bold;">and</span> (&gt;= number 0) (&lt;= number 31)
           (not (= number 9)) (not (= number 10)))
      (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((character (string number)))
        (my/remove-from-buffer character))))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/remove-all-ctrl-characters</span> ()
  <span style="color: #95e454;">"Remove all occurences of all control characters.</span>
<span style="color: #95e454;">Excluding ^I (tabs) and ^J (newlines)."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (mapcar (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> (n)
            (my/remove-character-number n))
          (number-sequence 0 31)))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/remove-ctrl-m</span> ()
  <span style="color: #95e454;">"Remove all ^M occurrences from EOL in a buffer."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (my/remove-from-buffer <span style="color: #95e454;">"$"</span>))

(global-set-key (kbd <span style="color: #95e454;">"C-c k"</span>) 'my/remove-from-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-6" class="outline-3">
<h3 id="sec-10-6"><span class="section-number-3">10.6</span> Save buffers silently</h3>
<div class="outline-text-3" id="text-10-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/save-buffers-silently</span> ()
  <span style="color: #95e454;">"Save all open buffers without prompting."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (save-some-buffers t)
  (message <span style="color: #95e454;">"Saved all buffers :-)"</span>))
(global-set-key (kbd <span style="color: #95e454;">"C-c s"</span>) 'my/save-buffers-silently)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-7" class="outline-3">
<h3 id="sec-10-7"><span class="section-number-3">10.7</span> Toggle maximize buffer</h3>
<div class="outline-text-3" id="text-10-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/toggle-maximize-buffer</span> ()
  <span style="color: #95e454;">"Temporarily maximize a buffer."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (= 1 (length (window-list)))
      (jump-to-register '_)
    (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
      (window-configuration-to-register '_)
      (delete-other-windows))))
(global-set-key (kbd <span style="color: #95e454;">"C-c z"</span>) 'my/toggle-maximize-buffer)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Complilation related</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1"><span class="section-number-3">11.1</span> Prefer newer over compiled</h3>
<div class="outline-text-3" id="text-11-1">
<p>
If init.elc is older, use newer <code>init.el</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> load-prefer-newer t) <span style="color: #99968b;">;; </span><span style="color: #99968b;">if init.elc is older, use newer init.el</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-2" class="outline-3">
<h3 id="sec-11-2"><span class="section-number-3">11.2</span> Place point after complilation error</h3>
<div class="outline-text-3" id="text-11-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> compilation-scroll-output 'first-error)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-3" class="outline-3">
<h3 id="sec-11-3"><span class="section-number-3">11.3</span> Ensure init files are byte compiled</h3>
<div class="outline-text-3" id="text-11-3">
<p>
This block will byte compile <code>early-init.el</code> and <code>init.el</code> if an existing
<code>.elc</code> file is not up to date with their contents.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/ensure-byte-compiled-init</span> ()
  (autoload 'byte-recompile-file <span style="color: #95e454;">"bytecomp"</span>)
  (byte-recompile-file
   (expand-file-name <span style="color: #95e454;">"early-init.el"</span> user-emacs-directory)
   'nil 0 'nil)
  (byte-recompile-file
   (expand-file-name <span style="color: #95e454;">"init.el"</span> user-emacs-directory)
   'nil 0 'nil))
(add-hook 'after-init-hook 'my/ensure-byte-compiled-init)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-4" class="outline-3">
<h3 id="sec-11-4"><span class="section-number-3">11.4</span> Recompile config</h3>
<div class="outline-text-3" id="text-11-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">defvar</span> <span style="color: #cae682;">my/files-to-recompile</span> '(<span style="color: #95e454;">"early-init.el"</span> <span style="color: #95e454;">"init.el"</span>)
  <span style="color: #95e454;">"Files under `</span><span style="color: #e5786d;">user-emacs-directory</span><span style="color: #95e454;">' that we use for configuration."</span>)

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/recompile-config</span> ()
  <span style="color: #95e454;">"Recompile everything in Emacs configuration."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (mapc (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> (file) (byte-recompile-file (concat user-emacs-directory file) 0))
        my/files-to-recompile))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-5" class="outline-3">
<h3 id="sec-11-5"><span class="section-number-3">11.5</span> Auto recompile Emacs Lisp</h3>
<div class="outline-text-3" id="text-11-5">
<p>
Automatically recompile Emacs Lisp files after saving
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/auto-recompile</span> ()
  <span style="color: #95e454;">"Automatically recompile Emacs Lisp files whenever they are saved."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">when</span> (<span style="color: #8ac6f2; font-weight: bold;">or</span> (equal major-mode 'emacs-lisp-mode)
            (string-match <span style="color: #95e454;">"^.*\\.el$"</span> buffer-file-name))
    (byte-compile-file buffer-file-name t)
    (message (concat <span style="color: #95e454;">"Re-compiled "</span> buffer-file-name <span style="color: #95e454;">" :-)"</span>))))
(add-hook 'after-save-hook 'my/auto-recompile)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-6" class="outline-3">
<h3 id="sec-11-6"><span class="section-number-3">11.6</span> Make compilation buffers more colorful</h3>
<div class="outline-text-3" id="text-11-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'comint-output-filter-functions 'ansi-color-process-output)
<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">colorize-compilation-buffer</span> ()
  <span style="color: #95e454;">"ANSI color in compilation buffer."</span>
  (ansi-color-apply-on-region compilation-filter-start (point)))
(add-hook 'compilation-filter-hook 'colorize-compilation-buffer)
(add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Editing functions</h2>
<div class="outline-text-2" id="text-12">
<p>
Various stolen/cobbled together functions to make editing a bit more comfy.
</p>
</div>

<div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1"><span class="section-number-3">12.1</span> Aligning symbols</h3>
<div class="outline-text-3" id="text-12-1">
<p>
Some handy functions to make aligning symbols less painful.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/align-symbol</span> (begin end symbol)
  <span style="color: #95e454;">"Align any SYMBOL in region (between BEGIN and END)."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"r\nsEnter align symbol: "</span>)
  (align-regexp begin end (concat <span style="color: #95e454;">"</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">(</span><span style="color: #95e454;">\\s-*</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">)</span><span style="color: #95e454;">"</span> symbol) 1 1))
(global-set-key (kbd <span style="color: #95e454;">"C-c a"</span>) 'my/align-symbol)

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/align-equals</span> (begin end)
  <span style="color: #95e454;">"Align equals in region (between BEGIN and END)."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"r"</span>)
  (my/align-symbol begin end <span style="color: #95e454;">"="</span>))
(global-set-key (kbd <span style="color: #95e454;">"C-c ="</span>) 'my/align-equals)

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/align-colon</span> (begin end)
  <span style="color: #95e454;">"Align colons in region (between BEGIN and END)."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"r"</span>)
  (my/align-symbol begin end <span style="color: #95e454;">":"</span>))
(global-set-key (kbd <span style="color: #95e454;">"C-c :"</span>) 'my/align-colon)

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/align-numbers</span> (begin end)
  <span style="color: #95e454;">"Align numbers in region (between BEGIN and END)."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"r"</span>)
  (my/align-symbol begin end <span style="color: #95e454;">"[0-9]+"</span>))
(global-set-key (kbd <span style="color: #95e454;">"C-c #"</span>) 'my/align-numbers)

(<span style="color: #8ac6f2; font-weight: bold;">defadvice</span> <span style="color: #cae682;">align-regexp</span> (around align-regexp-with-spaces activate)
  <span style="color: #95e454;">"Force alignment commands to use spaces, not tabs."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((indent-tabs-mode nil))
    ad-do-it))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2"><span class="section-number-3">12.2</span> Change numbers</h3>
<div class="outline-text-3" id="text-12-2">
<p>
Increment or decrement numbers at the point.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/change-number-at-point</span> (change)
  <span style="color: #95e454;">"Change a number by CHANGE amount."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((number (number-at-point))
        (point (point)))
    (<span style="color: #8ac6f2; font-weight: bold;">when</span> number
      (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
        (forward-word)
        (search-backward (number-to-string number))
        (replace-match (number-to-string (funcall change number)))
        (goto-char point)))))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/increment-number-at-point</span> ()
  <span style="color: #95e454;">"Increment number at point."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (my/change-number-at-point '1+))
(global-set-key (kbd <span style="color: #95e454;">"C-c +"</span>) 'my/increment-number-at-point)

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/decrement-number-at-point</span> ()
  <span style="color: #95e454;">"Decrement number at point."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (my/change-number-at-point '1-))
(global-set-key (kbd <span style="color: #95e454;">"C-c -"</span>) 'my/decrement-number-at-point)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3" class="outline-3">
<h3 id="sec-12-3"><span class="section-number-3">12.3</span> Delete inside delimiters</h3>
<div class="outline-text-3" id="text-12-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/delete-inside</span> ()
  <span style="color: #95e454;">"Deletes the text within parentheses, brackets or quotes."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">Search for a match on the same line, don't delete across lines</span>
  (search-backward-regexp <span style="color: #95e454;">"[[{(&lt;\"</span><span style="color: #ccaa8f;">\</span><span style="color: #95e454;">']"</span> (line-beginning-position))
  (forward-char)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((lstart (point)))
    (search-forward-regexp <span style="color: #95e454;">"[]})&gt;\"</span><span style="color: #ccaa8f;">\</span><span style="color: #95e454;">']"</span> (line-end-position))
    (backward-char)
    (kill-region lstart (point))))
(global-set-key (kbd <span style="color: #95e454;">"C-c d"</span>) 'my/delete-inside)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-4" class="outline-3">
<h3 id="sec-12-4"><span class="section-number-3">12.4</span> Generate a numbered list</h3>
<div class="outline-text-3" id="text-12-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/generate-numbered-list</span> (start end char)
  <span style="color: #95e454;">"Create a numbered list from START to END.  Using CHAR as punctuation."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"nStart number:\nnEnd number:\nsCharacter:"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((x start))
    (<span style="color: #8ac6f2; font-weight: bold;">while</span> (&lt;= x end)
      (insert (concat (number-to-string x) char))
      (newline)
      (<span style="color: #8ac6f2; font-weight: bold;">setq</span> x (+ x 1)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-5" class="outline-3">
<h3 id="sec-12-5"><span class="section-number-3">12.5</span> Smart that the default functions</h3>
<div class="outline-text-3" id="text-12-5">
<p>
Overwrite some default functions that do stuff in a slightly counter-intuitive
or just less than ideal way&#x2026;
</p>
</div>

<div id="outline-container-sec-12-5-1" class="outline-4">
<h4 id="sec-12-5-1"><span class="section-number-4">12.5.1</span> Fill or unfill</h4>
<div class="outline-text-4" id="text-12-5-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">smart/fill-or-unfill</span> ()
  <span style="color: #95e454;">"Like `</span><span style="color: #e5786d;">fill-paragraph</span><span style="color: #95e454;">', but unfill if used twice."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((fill-column
         (<span style="color: #8ac6f2; font-weight: bold;">if</span> (eq last-command 'smart/fill-or-unfill)
             (<span style="color: #8ac6f2; font-weight: bold;">progn</span> (<span style="color: #8ac6f2; font-weight: bold;">setq</span> this-command nil)
                    (point-max))
           fill-column)))
    (call-interactively #'fill-paragraph)))
(global-set-key [remap fill-paragraph] 'smart/fill-or-unfill)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-5-2" class="outline-4">
<h4 id="sec-12-5-2"><span class="section-number-4">12.5.2</span> Narrow or widen DWIM</h4>
<div class="outline-text-4" id="text-12-5-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">smart/narrow-or-widen-dwim</span> (p)
  <span style="color: #95e454;">"If the buffer is narrowed, it widens, otherwise, it narrows intelligently.</span>

<span style="color: #95e454;">Intelligently means: region, org-src-block, org-subtree, or</span>
<span style="color: #95e454;">defun, whichever applies first.</span>

<span style="color: #95e454;">Narrowing to org-src-block actually calls `</span><span style="color: #e5786d;">org-edit-src-code</span><span style="color: #95e454;">'.</span>
<span style="color: #95e454;">With prefix P, don't widen, just narrow even if buffer is already</span>
<span style="color: #95e454;">narrowed."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"P"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">declare</span> (interactive-only))
  (<span style="color: #8ac6f2; font-weight: bold;">cond</span> ((<span style="color: #8ac6f2; font-weight: bold;">and</span> (buffer-narrowed-p) (not p)) (widen))
        ((region-active-p)
         (narrow-to-region (region-beginning) (region-end)))
        ((derived-mode-p 'org-mode)
         <span style="color: #99968b;">;; </span><span style="color: #99968b;">`</span><span style="color: #e5786d;">org-edit-src-code</span><span style="color: #99968b;">' is not a real narrowing command.</span>
         <span style="color: #99968b;">;; </span><span style="color: #99968b;">Remove this first conditional if you don't want it.</span>
         (<span style="color: #8ac6f2; font-weight: bold;">cond</span> ((<span style="color: #8ac6f2; font-weight: bold;">ignore-errors</span> (org-edit-src-code))
                (delete-other-windows))
               ((org-at-block-p)
                (org-narrow-to-block))
               (t (org-narrow-to-subtree))))
        (t (narrow-to-defun))))
(define-key ctl-x-map <span style="color: #95e454;">"n"</span> 'smart/narrow-or-widen-dwim)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-5-3" class="outline-4">
<h4 id="sec-12-5-3"><span class="section-number-4">12.5.3</span> Beginning of line</h4>
<div class="outline-text-4" id="text-12-5-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">smart/move-beginning-of-line</span> ()
  <span style="color: #95e454;">"Move point back to indentation.</span>

<span style="color: #95e454;">If there is any non blank characters to the left of the cursor.</span>
<span style="color: #95e454;">Otherwise point moves to beginning of line."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (= (point) (<span style="color: #8ac6f2; font-weight: bold;">save-excursion</span> (back-to-indentation) (point)))
      (beginning-of-line)
    (back-to-indentation)))
(global-set-key [remap move-beginning-of-line] 'smart/move-beginning-of-line)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-5-4" class="outline-4">
<h4 id="sec-12-5-4"><span class="section-number-4">12.5.4</span> Kill ring save</h4>
<div class="outline-text-4" id="text-12-5-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">smart/kill-ring-save</span> ()
  <span style="color: #95e454;">"Copy current line or text selection to kill ring.</span>

<span style="color: #95e454;">When `</span><span style="color: #e5786d;">universal-argument</span><span style="color: #95e454;">' is called first, copy whole buffer (but</span>
<span style="color: #95e454;">respect `</span><span style="color: #e5786d;">narrow-to-region</span><span style="color: #95e454;">')."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> (p1 p2)
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> (null current-prefix-arg)
        (<span style="color: #8ac6f2; font-weight: bold;">progn</span> (<span style="color: #8ac6f2; font-weight: bold;">if</span> (use-region-p)
                   (<span style="color: #8ac6f2; font-weight: bold;">progn</span> (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p1 (region-beginning))
                          (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p2 (region-end)))
                 (<span style="color: #8ac6f2; font-weight: bold;">progn</span> (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p1 (line-beginning-position))
                        (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p2 (line-end-position)))))
      (<span style="color: #8ac6f2; font-weight: bold;">progn</span> (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p1 (point-min))
             (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p2 (point-max))))
    (kill-ring-save p1 p2)))
(global-set-key [remap kill-ring-save] 'smart/kill-ring-save)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-5-5" class="outline-4">
<h4 id="sec-12-5-5"><span class="section-number-4">12.5.5</span> Kill region</h4>
<div class="outline-text-4" id="text-12-5-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">smart/kill-region</span> ()
  <span style="color: #95e454;">"Cut current line, or text selection to kill ring.</span>

<span style="color: #95e454;">When `</span><span style="color: #e5786d;">universal-argument</span><span style="color: #95e454;">' is called first, cut whole buffer (but</span>
<span style="color: #95e454;">respect `</span><span style="color: #e5786d;">narrow-to-region</span><span style="color: #95e454;">')."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> (p1 p2)
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> (null current-prefix-arg)
        (<span style="color: #8ac6f2; font-weight: bold;">progn</span> (<span style="color: #8ac6f2; font-weight: bold;">if</span> (use-region-p)
                   (<span style="color: #8ac6f2; font-weight: bold;">progn</span> (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p1 (region-beginning))
                          (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p2 (region-end)))
                 (<span style="color: #8ac6f2; font-weight: bold;">progn</span> (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p1 (line-beginning-position))
                        (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p2 (line-beginning-position 2)))))
      (<span style="color: #8ac6f2; font-weight: bold;">progn</span> (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p1 (point-min))
             (<span style="color: #8ac6f2; font-weight: bold;">setq</span> p2 (point-max))))
    (kill-region p1 p2)))
(global-set-key [remap kill-region] 'smart/kill-region)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-12-6" class="outline-3">
<h3 id="sec-12-6"><span class="section-number-3">12.6</span> Case insensitive sort-lines</h3>
<div class="outline-text-3" id="text-12-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/sort-lines-nocase</span> ()
  <span style="color: #95e454;">"Sort marked lines with case sensitivity."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((sort-fold-case t))
    (call-interactively 'sort-lines)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-7" class="outline-3">
<h3 id="sec-12-7"><span class="section-number-3">12.7</span> Surround stuff</h3>
<div class="outline-text-3" id="text-12-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/surround</span> (begin end open close)
  <span style="color: #95e454;">"Put OPEN at BEGIN and CLOSE at END of the region.</span>

<span style="color: #95e454;">If you omit CLOSE, it will reuse OPEN."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>  <span style="color: #95e454;">"r\nsStart: \nsEnd: "</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">save-excursion</span>
    (goto-char end)
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> (string= close <span style="color: #95e454;">""</span>)
        (insert open)
      (insert close))
    (goto-char begin)
    (insert open)))
(global-set-key (kbd <span style="color: #95e454;">"M-s M-s"</span>) 'my/surround)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-8" class="outline-3">
<h3 id="sec-12-8"><span class="section-number-3">12.8</span> Untabify a buffer</h3>
<div class="outline-text-3" id="text-12-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/untabify-buffer</span> ()
  <span style="color: #95e454;">"Convert all tabs to spaces in the buffer."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (untabify (point-min) (point-max)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-9" class="outline-3">
<h3 id="sec-12-9"><span class="section-number-3">12.9</span> XML pretty print</h3>
<div class="outline-text-3" id="text-12-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/xml-pretty-print</span> ()
  <span style="color: #95e454;">"Reformat and indent XML."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">save-excursion</span>
    (sgml-pretty-print (point-min) (point-max))
    (indent-region (point-min) (point-max))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-10" class="outline-3">
<h3 id="sec-12-10"><span class="section-number-3">12.10</span> Yank pop forwards</h3>
<div class="outline-text-3" id="text-12-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/yank-pop-forwards</span> (arg)
  <span style="color: #95e454;">"Cycle forwards through the kill.  Reverse `</span><span style="color: #e5786d;">yank-pop</span><span style="color: #95e454;">'.  With ARG."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"p"</span>)
  (yank-pop (- arg)))
(global-set-key (kbd <span style="color: #95e454;">"C-M-y"</span>) 'my/yank-pop-forwards)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-11" class="outline-3">
<h3 id="sec-12-11"><span class="section-number-3">12.11</span> Editing related keyboard built-in keybindings</h3>
<div class="outline-text-3" id="text-12-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #95e454;">"C-c C-e"</span>) 'pp-eval-last-sexp)
(global-set-key (kbd <span style="color: #95e454;">"M-;"</span>) 'comment-line)
(global-set-key (kbd <span style="color: #95e454;">"M-z"</span>) 'zap-up-to-char)
(global-set-key (kbd <span style="color: #95e454;">"C-x M-t"</span>) 'transpose-regions)
(global-set-key (kbd <span style="color: #95e454;">"C-x M-p"</span>) 'transpose-paragraphs)
(global-set-key (kbd <span style="color: #95e454;">"M-SPC"</span>) 'cycle-spacing)
(global-set-key (kbd <span style="color: #95e454;">"M-%"</span>) 'query-replace-regexp)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-12" class="outline-3">
<h3 id="sec-12-12"><span class="section-number-3">12.12</span> DWIM replacements for changing case</h3>
<div class="outline-text-3" id="text-12-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key [remap capitalize-word] 'capitalize-dwim)
(global-set-key [remap downcase-word] 'downcase-dwim)
(global-set-key [remap upcase-word] 'upcase-dwim)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> File manipulation functions</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-sec-13-1" class="outline-3">
<h3 id="sec-13-1"><span class="section-number-3">13.1</span> Delete this file</h3>
<div class="outline-text-3" id="text-13-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/delete-this-file</span> ()
  <span style="color: #95e454;">"Delete the current file, and kill the buffer."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">or</span> (buffer-file-name) (<span style="color: #ccaa8f;">error</span> <span style="color: #95e454;">"No file is currently being edited"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">when</span> (yes-or-no-p (format <span style="color: #95e454;">"Really delete '%s'?"</span>
                             (file-name-nondirectory buffer-file-name)))
    (delete-file (buffer-file-name))
    (kill-this-buffer)))
(global-set-key (kbd <span style="color: #95e454;">"C-c f d"</span>) 'my/delete-this-file)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-13-2" class="outline-3">
<h3 id="sec-13-2"><span class="section-number-3">13.2</span> Yank current file name to kill ring</h3>
<div class="outline-text-3" id="text-13-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/copy-file-name-to-clipboard</span> ()
  <span style="color: #95e454;">"Copy the current buffer file name to the clipboard."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((filename (<span style="color: #8ac6f2; font-weight: bold;">if</span> (equal major-mode 'dired-mode)
                      default-directory
                    (buffer-file-name))))
    (<span style="color: #8ac6f2; font-weight: bold;">when</span> filename
      (kill-new filename)
      (message <span style="color: #95e454;">"Copied buffer file name '%s' to the clipboard."</span> filename))))
(global-set-key (kbd <span style="color: #95e454;">"C-c f w"</span>) 'my/copy-file-name-to-clipboard)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-13-3" class="outline-3">
<h3 id="sec-13-3"><span class="section-number-3">13.3</span> Make backup of current file</h3>
<div class="outline-text-3" id="text-13-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/make-backup</span> ()
  <span style="color: #95e454;">"Make a backup copy of current file or dired marked files.</span>

<span style="color: #95e454;">If in dired, backup current file or marked files."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> (($fname (buffer-file-name)))
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> $fname
        (<span style="color: #8ac6f2; font-weight: bold;">let</span> (($backup-name
               (concat $fname <span style="color: #95e454;">"."</span> (format-time-string <span style="color: #95e454;">"%y%m%d%H%M"</span>) <span style="color: #95e454;">".bak"</span>)))
          (copy-file $fname $backup-name t)
          (message (concat <span style="color: #95e454;">"Backup saved at: "</span> $backup-name)))
      (<span style="color: #8ac6f2; font-weight: bold;">if</span> (string-equal major-mode <span style="color: #95e454;">"dired-mode"</span>)
          (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
            (mapc (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> ($x)
                    (<span style="color: #8ac6f2; font-weight: bold;">let</span> (($backup-name
                           (concat $x <span style="color: #95e454;">"."</span> (format-time-string <span style="color: #95e454;">"%y%m%d%H%M"</span>) <span style="color: #95e454;">".bak"</span>)))
                      (copy-file $x $backup-name t)))
                  (dired-get-marked-files))
            (message <span style="color: #95e454;">"marked files backed up"</span>))
        (<span style="color: #ccaa8f;">user-error</span> <span style="color: #95e454;">"Buffer not file nor dired"</span>)))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/make-backup-and-save</span> ()
  <span style="color: #95e454;">"Backup of current file and save, or backup dired marked files.</span>
<span style="color: #95e454;">For detail, see `</span><span style="color: #e5786d;">my/make-backup</span><span style="color: #95e454;">'."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (buffer-file-name)
      (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
        (my/make-backup)
        (<span style="color: #8ac6f2; font-weight: bold;">when</span> (buffer-modified-p)
          (save-buffer)))
    (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
      (my/make-backup))))
(global-set-key (kbd <span style="color: #95e454;">"C-c f b"</span>) 'my/make-backup-and-save)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-13-4" class="outline-3">
<h3 id="sec-13-4"><span class="section-number-3">13.4</span> Rename file and buffer</h3>
<div class="outline-text-3" id="text-13-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/rename-this-file-and-buffer</span> (new-name)
  <span style="color: #95e454;">"Renames both current buffer and file it's visiting to NEW-NAME."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"FNew name: "</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((name (buffer-name))
        (filename (buffer-file-name)))
    (<span style="color: #8ac6f2; font-weight: bold;">unless</span> filename
      (<span style="color: #ccaa8f;">error</span> <span style="color: #95e454;">"Buffer '%s' is not visiting a file!"</span> name))
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> (get-buffer new-name)
        (message <span style="color: #95e454;">"A buffer named '%s' already exists!"</span> new-name)
      (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
        (<span style="color: #8ac6f2; font-weight: bold;">when</span> (file-exists-p filename)
          (rename-file filename new-name 1))
        (rename-buffer new-name)
        (set-visited-file-name new-name)))))
(global-set-key (kbd <span style="color: #95e454;">"C-c f r"</span>) 'my/rename-this-file-and-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-13-5" class="outline-3">
<h3 id="sec-13-5"><span class="section-number-3">13.5</span> Open current file as root</h3>
<div class="outline-text-3" id="text-13-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/sudoedit</span> (<span style="color: #92a65e; font-weight: bold;">&amp;optional</span> arg)
  <span style="color: #95e454;">"Open current or ARG file as root."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"P"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (<span style="color: #8ac6f2; font-weight: bold;">or</span> arg (not buffer-file-name))
      (find-file (concat <span style="color: #95e454;">"/sudo:root@localhost:"</span>
                         (read-file-name <span style="color: #95e454;">"Find file (as root): "</span>)))
    (find-alternate-file (concat <span style="color: #95e454;">"/sudo:root@localhost:"</span> buffer-file-name))))
(global-set-key (kbd <span style="color: #95e454;">"C-c f s"</span>) 'my/sudoedit)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> Miscellaneous functions</h2>
<div class="outline-text-2" id="text-14">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/google</span> (arg)
  <span style="color: #95e454;">"Googles a query or region.  With prefix ARG, wrap in quotes."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"P"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((query
         (<span style="color: #8ac6f2; font-weight: bold;">if</span> (region-active-p)
             (buffer-substring (region-beginning) (region-end))
           (read-string <span style="color: #95e454;">"Query: "</span>))))
    (<span style="color: #8ac6f2; font-weight: bold;">when</span> arg (<span style="color: #8ac6f2; font-weight: bold;">setq</span> query (concat <span style="color: #95e454;">"\""</span> query <span style="color: #95e454;">"\""</span>)))
    (browse-url
     (concat <span style="color: #95e454;">"http://www.google.com/search?ie=utf-8&amp;oe=utf-8&amp;q="</span> query))))
(global-set-key (kbd <span style="color: #95e454;">"C-c M-g"</span>) 'my/google)

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defmacro</span> <span style="color: #cae682;">my/measure-time</span> (<span style="color: #92a65e; font-weight: bold;">&amp;rest</span> body)
  <span style="color: #95e454;">"Measure the time it takes to evaluate BODY."</span>
  `(<span style="color: #8ac6f2; font-weight: bold;">let</span> ((time (current-time)))
     ,@body
     (message <span style="color: #95e454;">"%.06f"</span> (float-time (time-since time)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> Window manipulation functions</h2>
<div class="outline-text-2" id="text-15">
</div><div id="outline-container-sec-15-1" class="outline-3">
<h3 id="sec-15-1"><span class="section-number-3">15.1</span> Kill buffer other window</h3>
<div class="outline-text-3" id="text-15-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/kill-buffer-other-window</span> ()
  <span style="color: #95e454;">"Kill the buffer in the last used window."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">Window selection is used because point goes to a different window if more</span>
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">than 2 windows are present</span>
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((current-window (selected-window))
        (other-window (get-mru-window t t t)))
    (select-window other-window)
    (kill-this-buffer)
    (select-window current-window)))
(define-key ctl-x-4-map <span style="color: #95e454;">"k"</span> 'my/kill-buffer-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-2" class="outline-3">
<h3 id="sec-15-2"><span class="section-number-3">15.2</span> Toggle focus to last window</h3>
<div class="outline-text-3" id="text-15-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/last-window</span> ()
  <span style="color: #95e454;">"Switch back and forth between two windows easily."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((win (get-mru-window t t t)))
    (<span style="color: #8ac6f2; font-weight: bold;">unless</span> win (<span style="color: #ccaa8f;">error</span> <span style="color: #95e454;">"Last window not found"</span>))
    (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((frame (window-frame win)))
      (raise-frame frame)
      (select-frame frame)
      (select-window win))))
(global-set-key (kbd <span style="color: #95e454;">"C-c w w"</span>) 'my/last-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-3" class="outline-3">
<h3 id="sec-15-3"><span class="section-number-3">15.3</span> Open a buffer in another window</h3>
<div class="outline-text-3" id="text-15-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/open-buffer-other-window</span> (buffer)
  <span style="color: #95e454;">"Open a BUFFER in another window without switching to it."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"BBuffer: "</span>)
  (switch-to-buffer-other-window buffer)
  (other-window -1))
(define-key ctl-x-4-map <span style="color: #95e454;">"o"</span> 'my/open-buffer-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-4" class="outline-3">
<h3 id="sec-15-4"><span class="section-number-3">15.4</span> Switch to the previous window</h3>
<div class="outline-text-3" id="text-15-4">
<p>
This is basically <code>other-window</code> backwards.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/prev-window</span> ()
  <span style="color: #95e454;">"Go the previously used window, excluding other frames."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (other-window -1))
(global-set-key (kbd <span style="color: #95e454;">"C-x O"</span>) 'my/prev-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-5" class="outline-3">
<h3 id="sec-15-5"><span class="section-number-3">15.5</span> Scroll lines up like Ctrl-e in Vim</h3>
<div class="outline-text-3" id="text-15-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/scroll-line-up</span> (n)
  <span style="color: #95e454;">"Scroll line up N lines.  Like Ctrl-e in Vim."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"p"</span>)
  (scroll-up n))
(global-set-key (kbd <span style="color: #95e454;">"M-p"</span>) 'my/scroll-line-up)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-6" class="outline-3">
<h3 id="sec-15-6"><span class="section-number-3">15.6</span> Scroll lines down like Ctrl-y in Vim</h3>
<div class="outline-text-3" id="text-15-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/scroll-line-down</span> (n)
  <span style="color: #95e454;">"Scroll line down N lines.  Ctrl-y in Vim."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"p"</span>)
  (scroll-down n))
(global-set-key (kbd <span style="color: #95e454;">"M-n"</span>) 'my/scroll-line-down)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-7" class="outline-3">
<h3 id="sec-15-7"><span class="section-number-3">15.7</span> Open last buffer in horizontal split</h3>
<div class="outline-text-3" id="text-15-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/hsplit-last-buffer</span> (prefix)
  <span style="color: #95e454;">"Split the window vertically and display the previous buffer.</span>
<span style="color: #95e454;">With PREFIX stay in current buffer."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"p"</span>)
  (split-window-vertically)
  (other-window 1 nil)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (= prefix 1)
      (switch-to-next-buffer)))
(global-set-key (kbd <span style="color: #95e454;">"C-c 2"</span>) 'my/hsplit-last-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-8" class="outline-3">
<h3 id="sec-15-8"><span class="section-number-3">15.8</span> Open last buffer in vertical split</h3>
<div class="outline-text-3" id="text-15-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/vsplit-last-buffer</span> (prefix)
  <span style="color: #95e454;">"Split the window horizontally and display the previous buffer.</span>
<span style="color: #95e454;">With PREFIX stay in current buffer."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"p"</span>)
  (split-window-horizontally)
  (other-window 1 nil)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (= prefix 1) (switch-to-next-buffer)))
(global-set-key (kbd <span style="color: #95e454;">"C-c 3"</span>) 'my/vsplit-last-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-9" class="outline-3">
<h3 id="sec-15-9"><span class="section-number-3">15.9</span> Toggle vertical -&gt; horizontal splits</h3>
<div class="outline-text-3" id="text-15-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/toggle-split</span> ()
  <span style="color: #95e454;">"Switch window split from horizontally to vertically.</span>

<span style="color: #95e454;">Or vice versa.  Change right window to bottom, or change bottom</span>
<span style="color: #95e454;">window to right."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((done))
    (<span style="color: #8ac6f2; font-weight: bold;">dolist</span> (dirs '((right . down) (down . right)))
      (<span style="color: #8ac6f2; font-weight: bold;">unless</span> done
        (<span style="color: #8ac6f2; font-weight: bold;">let*</span> ((win (selected-window))
               (nextdir (car dirs))
               (neighbour-dir (cdr dirs))
               (next-win (windmove-find-other-window nextdir win))
               (neighbour1 (windmove-find-other-window neighbour-dir win))
               (neighbour2 (<span style="color: #8ac6f2; font-weight: bold;">if</span> next-win (<span style="color: #8ac6f2; font-weight: bold;">with-selected-window</span> next-win
                                          (windmove-find-other-window neighbour-dir next-win)))))
          <span style="color: #99968b;">;;</span><span style="color: #99968b;">(message "win: %s\nnext-win: %s\nneighbour1: %s\nneighbour2:%s" win next-win neighbour1 neighbour2)</span>
          (<span style="color: #8ac6f2; font-weight: bold;">setq</span> done (<span style="color: #8ac6f2; font-weight: bold;">and</span> (eq neighbour1 neighbour2)
                          (not (eq (minibuffer-window) next-win))))
          (<span style="color: #8ac6f2; font-weight: bold;">if</span> done
              (<span style="color: #8ac6f2; font-weight: bold;">let*</span> ((other-buf (window-buffer next-win)))
                (delete-window next-win)
                (<span style="color: #8ac6f2; font-weight: bold;">if</span> (eq nextdir 'right)
                    (split-window-vertically)
                  (split-window-horizontally))
                (set-window-buffer (windmove-find-other-window neighbour-dir) other-buf))))))))
(define-key ctl-x-4-map <span style="color: #95e454;">"s"</span> 'my/toggle-split)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-10" class="outline-3">
<h3 id="sec-15-10"><span class="section-number-3">15.10</span> Transpose windows</h3>
<div class="outline-text-3" id="text-15-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/transpose-windows</span> (arg)
  <span style="color: #95e454;">"Transpose windows.  Use prefix ARG to transpose in the other direction."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"P"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (not (&gt; (count-windows) 1))
      (message <span style="color: #95e454;">"You can't rotate a single window!"</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">let*</span> ((rotate-times (prefix-numeric-value arg))
           (direction (<span style="color: #8ac6f2; font-weight: bold;">if</span> (<span style="color: #8ac6f2; font-weight: bold;">or</span> (&lt; rotate-times 0) (equal arg '(4)))
                          'reverse 'identity)))
      (<span style="color: #8ac6f2; font-weight: bold;">dotimes</span> (_ (abs rotate-times))
        (<span style="color: #8ac6f2; font-weight: bold;">dotimes</span> (i (- (count-windows) 1))
          (<span style="color: #8ac6f2; font-weight: bold;">let*</span> ((w1 (elt (funcall direction (window-list)) i))
                 (w2 (elt (funcall direction (window-list)) (+ i 1)))
                 (b1 (window-buffer w1))
                 (b2 (window-buffer w2))
                 (s1 (window-start w1))
                 (s2 (window-start w2))
                 (p1 (window-point w1))
                 (p2 (window-point w2)))
            (set-window-buffer-start-and-point w1 b2 s2 p2)
            (set-window-buffer-start-and-point w2 b1 s1 p1)))))))
(define-key ctl-x-4-map <span style="color: #95e454;">"t"</span> 'my/transpose-windows)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-11" class="outline-3">
<h3 id="sec-15-11"><span class="section-number-3">15.11</span> Windmove keybindings</h3>
<div class="outline-text-3" id="text-15-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload 'windmove-left <span style="color: #95e454;">"windmove"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-c w b"</span>) 'windmove-left)
(autoload 'windmove-right <span style="color: #95e454;">"windmove"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-c w f"</span>) 'windmove-right)
(autoload 'windmove-up <span style="color: #95e454;">"windmove"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-c w p"</span>) 'windmove-up)
(autoload 'windmove-down <span style="color: #95e454;">"windmove"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-c w n"</span>) 'windmove-down)
(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'windmove
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> windmove-wrap-around t)
  (message <span style="color: #95e454;">"Lazy loaded windmove :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-12" class="outline-3">
<h3 id="sec-15-12"><span class="section-number-3">15.12</span> Winner mode</h3>
<div class="outline-text-3" id="text-15-12">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Startup-Summary.html#Startup-Summary">Startup Summary</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'window-setup-hook 'winner-mode)
(global-set-key (kbd <span style="color: #95e454;">"C-c w u"</span>) 'winner-undo)
(global-set-key (kbd <span style="color: #95e454;">"C-c w r"</span>) 'winner-redo)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15-13" class="outline-3">
<h3 id="sec-15-13"><span class="section-number-3">15.13</span> Scroll other window down</h3>
<div class="outline-text-3" id="text-15-13">
<p>
#+begin<sub>src</sub> emacs-lisp
(global-set-key (kbd "C-c v") 'scroll-other-window-down)
#+end<sub>src</sub>&gt;
</p>
</div>
</div>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> Emacs built in package configuration</h2>
<div class="outline-text-2" id="text-16">
</div><div id="outline-container-sec-16-1" class="outline-3">
<h3 id="sec-16-1"><span class="section-number-3">16.1</span> Auto-revert</h3>
<div class="outline-text-3" id="text-16-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'global-auto-revert-mode) <span style="color: #99968b;">;; </span><span style="color: #99968b;">reload if file changed on disk</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-2" class="outline-3">
<h3 id="sec-16-2"><span class="section-number-3">16.2</span> Dabbrev</h3>
<div class="outline-text-3" id="text-16-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'dabbrev
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> abbrev-file-name (concat user-emacs-directory <span style="color: #95e454;">"abbrevs"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> save-abbrevs 'silently)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dabbrev-abbrev-char-regexp <span style="color: #95e454;">"\\sw</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">|</span><span style="color: #95e454;">\\s_"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dabbrev-abbrev-skip-leading-regexp <span style="color: #95e454;">"[$*/=']"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dabbrev-backward-only nil)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dabbrev-case-distinction 'case-replace)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dabbrev-case-fold-search t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dabbrev-case-replace 'case-replace)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dabbrev-check-other-buffers t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dabbrev-eliminate-newlines t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dabbrev-upcase-means-case-search t)
  (message <span style="color: #95e454;">"Lazy loaded dabbrev :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-3" class="outline-3">
<h3 id="sec-16-3"><span class="section-number-3">16.3</span> Dired</h3>
<div class="outline-text-3" id="text-16-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'dired
  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/dired-get-size</span> ()
    <span style="color: #95e454;">"Get cumlative size of marked or current item."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((files (dired-get-marked-files)))
      (<span style="color: #8ac6f2; font-weight: bold;">with-temp-buffer</span>
        (apply 'call-process <span style="color: #95e454;">"/usr/bin/du"</span> nil t nil <span style="color: #95e454;">"-sch"</span> files)
        (message <span style="color: #95e454;">"Size of all marked files: %s"</span>
                 (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
                   (re-search-backward <span style="color: #95e454;">"</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">(</span><span style="color: #95e454;">^[0-9.,]+[A-Za-z]+</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">)</span><span style="color: #95e454;">.*total$"</span>)
                   (match-string 1))))))

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/dired-open-marked-files</span> ()
    <span style="color: #95e454;">"Open marked files."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((distinguish-one-marked nil))
      (mapc 'find-file
            (<span style="color: #8ac6f2; font-weight: bold;">dired-map-over-marks</span>
             (dired-get-file-for-visit)
             current-prefix-arg))))

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/dired-back-to-top</span> ()
    <span style="color: #95e454;">"Go to first file in directory."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (goto-char (point-min))
    (dired-next-line 2))

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/dired-jump-to-bottom</span> ()
    <span style="color: #95e454;">"Go to last file in directory."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (goto-char (point-max))
    (dired-next-line -1))

  (<span style="color: #8ac6f2; font-weight: bold;">defgroup</span> <span style="color: #92a65e; font-weight: bold;">my/dired-peep</span> nil
    <span style="color: #95e454;">"See the file at point when browsing in a Dired buffer."</span>
    <span style="color: #e5786d;">:group</span> 'dired)

  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> my/dired-peep-next-current-buffer nil)

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/dired-peep-next</span> ()
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (next-line 1)
    (dired-find-file-other-window)
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> my/dired-peep-next-current-buffer (kill-buffer my/dired-peep-next-current-buffer))
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> my/dired-peep-next-current-buffer (current-buffer))
    (other-window 1))

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/dired-peep-previous</span> ()
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (previous-line 1)
    (dired-find-file-other-window)
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> my/dired-peep-next-current-buffer (kill-buffer my/dired-peep-next-current-buffer))
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> my/dired-peep-next-current-buffer (current-buffer))
    (other-window 1))

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">define-minor-mode</span> <span style="color: #cae682;">my/dired-peep-mode</span>
    <span style="color: #95e454;">"Toggle preview of files when browsing in a Dired buffer."</span>
    <span style="color: #e5786d;">:global</span> t
    <span style="color: #e5786d;">:group</span> 'my/dired-peep
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> my/dired-peep-mode
        (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
          (define-key dired-mode-map <span style="color: #95e454;">"n"</span> 'my/dired-peep-next)
          (define-key dired-mode-map <span style="color: #95e454;">"p"</span> 'my/dired-peep-previous))
      (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
        (define-key dired-mode-map <span style="color: #95e454;">"n"</span> 'dired-next-line)
        (define-key dired-mode-map <span style="color: #95e454;">"p"</span> 'dired-previous-line)
        (other-window 1)
        (kill-buffer)
        (other-window 1))))

  (<span style="color: #8ac6f2; font-weight: bold;">defalias</span> '<span style="color: #cae682;">ranger-mode</span> 'my/dired-peep-mode)

  (<span style="color: #8ac6f2; font-weight: bold;">defvar</span> <span style="color: #cae682;">dired-compress-files-alist</span>
    '((<span style="color: #95e454;">"\\.tar\\.gz\\'"</span> . <span style="color: #95e454;">"tar -c %i | gzip -c9 &gt; %o"</span>)
      (<span style="color: #95e454;">"\\.zip\\'"</span> . <span style="color: #95e454;">"zip %o -r --filesync %i"</span>))
    <span style="color: #95e454;">"Control the compression shell command for `</span><span style="color: #e5786d;">dired-do-compress-to</span><span style="color: #95e454;">'.</span>

<span style="color: #95e454;">  Each element is (REGEXP . CMD), where REGEXP is the name of the</span>
<span style="color: #95e454;">  archive to which you want to compress, and CMD the the</span>
<span style="color: #95e454;">  corresponding command.</span>

<span style="color: #95e454;">  Within CMD, %i denotes the input file(s), and %o denotes the</span>
<span style="color: #95e454;">  output file.  %i path(s) are relative, while %o is absolute."</span>)

  (autoload 'dired-omit-mode <span style="color: #95e454;">"dired-x"</span>
    <span style="color: #95e454;">"Omit files from dired listings."</span> t)

  (autoload 'dired-omit-files <span style="color: #95e454;">"dired-x"</span>
    <span style="color: #95e454;">"User regex to specify what files to omit."</span> t)

  (<span style="color: #8ac6f2; font-weight: bold;">when</span> (eq system-type 'berkeley-unix)
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dired-listing-switches <span style="color: #95e454;">"-alhpL"</span>))

  (<span style="color: #8ac6f2; font-weight: bold;">when</span> (eq system-type 'gnu/linux)
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dired-listing-switches
          <span style="color: #95e454;">"-AGFhlv --group-directories-first --time-style=long-iso"</span>))

  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dired-omit-files <span style="color: #95e454;">"\\`[.]?#</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">|</span><span style="color: #95e454;">\\`[.][.]?\\'</span><span style="color: #95e454; font-weight: bold;">\\</span><span style="color: #95e454; font-weight: bold;">|</span><span style="color: #95e454;">^\\..+$"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dired-dwim-target t
        delete-by-moving-to-trash t
        dired-use-ls-dired nil
        dired-recursive-copies 'always
        dired-recursive-deletes 'always)

  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/dired-up-directory</span> ()
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (find-alternate-file <span style="color: #95e454;">".."</span>))

  (define-key dired-mode-map <span style="color: #95e454;">"b"</span> 'my/dired-up-directory)
  (define-key dired-mode-map <span style="color: #95e454;">"f"</span> 'dired-find-alternate-file)
  (define-key dired-mode-map <span style="color: #95e454;">"c"</span> 'dired-do-compress-to)
  (define-key dired-mode-map <span style="color: #95e454;">")"</span> 'dired-omit-mode)
  (define-key dired-mode-map <span style="color: #95e454;">"r"</span> 'ranger-mode)
  (define-key dired-mode-map <span style="color: #95e454;">"?"</span> 'my/dired-get-size)
  (define-key dired-mode-map (vector 'remap 'end-of-buffer) 'my/dired-jump-to-bottom)
  (define-key dired-mode-map (vector 'remap 'beginning-of-buffer) 'my/dired-back-to-top)
  (message <span style="color: #95e454;">"Lazy loaded dired :-)"</span>))
</pre>
</div>

<p>
Has to come outside of with-eval-after-load otherwise we have no dired-jump
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload 'dired-jump <span style="color: #95e454;">"dired-x"</span> <span style="color: #99968b;">;; </span><span style="color: #99968b;">bound to C-x C-j by default</span>
  <span style="color: #95e454;">"Jump to Dired buffer corresponding to current buffer."</span> t)
(global-set-key (kbd <span style="color: #95e454;">"C-x C-j"</span>) 'dired-jump)

(autoload 'dired-jump-other-window <span style="color: #95e454;">"dired-x"</span> <span style="color: #99968b;">;; </span><span style="color: #99968b;">bound to C-x 4 C-j by default.</span>
  <span style="color: #95e454;">"Like \\[</span><span style="color: #e5786d;">dired-jump</span><span style="color: #95e454;">] (dired-jump) but in other window."</span> t)
(define-key ctl-x-4-map <span style="color: #95e454;">"C-j"</span> 'dired-jump-other-window)
</pre>
</div>

<p>
Turn on hl-line-mode
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'dired-mode-hook 'hl-line-mode)
</pre>
</div>
</div>

<div id="outline-container-sec-16-3-1" class="outline-4">
<h4 id="sec-16-3-1"><span class="section-number-4">16.3.1</span> Dired AUX</h4>
<div class="outline-text-4" id="text-16-3-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'dired-aux
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dired-isearch-filenames 'dwim)
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">The following variables were introduced in Emacs 27.1</span>
  (<span style="color: #8ac6f2; font-weight: bold;">when</span> (not (version&lt; emacs-version <span style="color: #95e454;">"27.1"</span>))
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dired-create-destination-dirs 'ask)
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> dired-vc-rename-file t))
  (message <span style="color: #95e454;">"Lazy loaded dired-aux :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-3-2" class="outline-4">
<h4 id="sec-16-3-2"><span class="section-number-4">16.3.2</span> Find Dired</h4>
<div class="outline-text-4" id="text-16-3-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'find-dired
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq find-ls-option '("-print0 | xargs -0 ls -ld" . "-ld"))</span>
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> find-ls-option
        '(<span style="color: #95e454;">"-ls"</span> . <span style="color: #95e454;">"-AGFhlv --group-directories-first --time-style=long-iso"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> find-name-arg <span style="color: #95e454;">"-iname"</span>)
  (message <span style="color: #95e454;">"Lazy loaded find-dired :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-3-3" class="outline-4">
<h4 id="sec-16-3-3"><span class="section-number-4">16.3.3</span> Writeable Dired</h4>
<div class="outline-text-4" id="text-16-3-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'wdired
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> wdired-allow-to-change-permissions t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> wdired-create-parent-directories t)
  (message <span style="color: #95e454;">"Lazy loaded wdired :-)"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-16-4" class="outline-3">
<h3 id="sec-16-4"><span class="section-number-3">16.4</span> Doc View</h3>
<div class="outline-text-3" id="text-16-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'doc-view-mode
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> doc-view-continuous t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> doc-view-resolution 300)
  (message <span style="color: #95e454;">"Lazy loaded doc-view-mode :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-5" class="outline-3">
<h3 id="sec-16-5"><span class="section-number-3">16.5</span> Ediff</h3>
<div class="outline-text-3" id="text-16-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'ediff
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> ediff-diff-options <span style="color: #95e454;">"-w"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> ediff-keep-variants nil)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> ediff-make-buffers-readonly-at-startup nil)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> ediff-merge-revisions-with-ancestor t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> ediff-show-clashes-only t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> ediff-split-window-function 'split-window-horizontally)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> ediff-window-setup-function 'ediff-setup-windows-plain)
  (add-hook 'ediff-after-quit-hook-internal 'winner-undo)

  <span style="color: #99968b;">;; </span><span style="color: #99968b;">https://emacs.stackexchange.com/a/24602</span>
  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">disable-y-or-n-p</span> (orig-fun <span style="color: #92a65e; font-weight: bold;">&amp;rest</span> args)
    <span style="color: #95e454;">"Advise ORIG-FUN with ARGS so it dynamically rebinds `</span><span style="color: #e5786d;">y-or-n-p</span><span style="color: #95e454;">'."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">cl-letf</span> (((symbol-function 'y-or-n-p) (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> () t)))
      (apply orig-fun args)))

  (advice-add 'ediff-quit <span style="color: #e5786d;">:around</span> #'disable-y-or-n-p)
  (message <span style="color: #95e454;">"Lazy loaded ediff :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-6" class="outline-3">
<h3 id="sec-16-6"><span class="section-number-3">16.6</span> Electric</h3>
<div class="outline-text-3" id="text-16-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'electric-indent-mode)
(add-hook 'after-init-hook 'electric-pair-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-7" class="outline-3">
<h3 id="sec-16-7"><span class="section-number-3">16.7</span> ERC</h3>
<div class="outline-text-3" id="text-16-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'erc
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> erc-autojoin-channels-alist '((<span style="color: #95e454;">"freenode.net"</span>
                                       <span style="color: #95e454;">"#org-mode"</span>
                                       <span style="color: #95e454;">"#emacs"</span>)))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> erc-fill-column 80)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> erc-hide-list '(<span style="color: #95e454;">"JOIN"</span> <span style="color: #95e454;">"PART"</span> <span style="color: #95e454;">"QUIT"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> erc-input-line-position -2)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> erc-keywords '(<span style="color: #95e454;">"not2b"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> erc-nick <span style="color: #95e454;">"not2b"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> erc-prompt-for-password t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> erc-track-enable-keybindings t)
  (message <span style="color: #95e454;">"Lazy loaded erc :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-8" class="outline-3">
<h3 id="sec-16-8"><span class="section-number-3">16.8</span> Eshell</h3>
<div class="outline-text-3" id="text-16-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'eshell
<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/eshell-complete-recent-dir</span> (<span style="color: #92a65e; font-weight: bold;">&amp;optional</span> arg)
    <span style="color: #95e454;">"Switch to a recent `</span><span style="color: #e5786d;">eshell</span><span style="color: #95e454;">' directory using completion.</span>
<span style="color: #95e454;">With \\[</span><span style="color: #e5786d;">universal-argument</span><span style="color: #95e454;">] also open the directory in a `</span><span style="color: #e5786d;">dired</span><span style="color: #95e454;">'</span>
<span style="color: #95e454;">buffer."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span> <span style="color: #95e454;">"P"</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">let*</span> ((dirs (ring-elements eshell-last-dir-ring))
           (dir (completing-read <span style="color: #95e454;">"Switch to recent dir: "</span> dirs nil t)))
      (insert dir)
      (eshell-send-input)
      (<span style="color: #8ac6f2; font-weight: bold;">when</span> arg
        (dired dir))))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/eshell-complete-history</span> ()
    <span style="color: #95e454;">"Insert element from `</span><span style="color: #e5786d;">eshell</span><span style="color: #95e454;">' history using completion."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((hist (ring-elements eshell-history-ring)))
      (insert
       (completing-read <span style="color: #95e454;">"Input history: "</span> hist nil t))))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/eshell-prompt</span> ()
    <span style="color: #95e454;">"Custom eshell prompt."</span>
    (concat
     (propertize (user-login-name) 'face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"green"</span> ))
     (propertize <span style="color: #95e454;">"@"</span> 'face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"yellow"</span>))
     (propertize (system-name) `face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"green"</span>))
     (propertize <span style="color: #95e454;">":"</span> 'face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"yellow"</span>))
     (<span style="color: #8ac6f2; font-weight: bold;">if</span> (string= (eshell/pwd) (getenv <span style="color: #95e454;">"HOME"</span>))
         (propertize <span style="color: #95e454;">"~"</span> 'face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"magenta"</span>))
       (propertize (eshell/basename (eshell/pwd)) 'face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"magenta"</span>)))
     (propertize (<span style="color: #8ac6f2; font-weight: bold;">ignore-errors</span> (format <span style="color: #95e454;">" (%s)"</span>
                                        (vc-responsible-backend default-directory)))
                 'face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"cyan"</span>))
     <span style="color: #95e454;">"\n"</span>
     (<span style="color: #8ac6f2; font-weight: bold;">if</span> (= (user-uid) 0)
         (propertize <span style="color: #95e454;">"#"</span> 'face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"red"</span>))
       (propertize <span style="color: #95e454;">"$"</span> 'face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"yellow"</span>)))
     (propertize <span style="color: #95e454;">" "</span> 'face `(<span style="color: #e5786d;">:foreground</span> <span style="color: #95e454;">"white"</span>))))

  <span style="color: #99968b;">;; </span><span style="color: #99968b;">https://www.emacswiki.org/emacs/EshellPrompt</span>
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span>
   eshell-cd-on-directory t
   eshell-destroy-buffer-when-process-dies t
   eshell-highlight-prompt nil
   eshell-hist-ignoredups t
   eshell-history-size 4096
   eshell-ls-use-colors t
   eshell-prefer-lisp-functions t
   eshell-prefer-lisp-variables t
   eshell-prompt-regexp <span style="color: #95e454;">"^[</span><span style="color: #95e454;">^</span><span style="color: #95e454;">#$\n]*[#$] "</span>
   eshell-prompt-function 'my/eshell-prompt
   eshell-review-quick-commands nil
   eshell-save-history-on-exit t
   eshell-smart-space-goes-to-end t
   eshell-where-to-jump 'begin)

  (add-to-list 'eshell-modules-list 'eshell-tramp) <span style="color: #99968b;">;; </span><span style="color: #99968b;">no sudo password with ~/.authinfo</span>
  (add-hook 'eshell-preoutput-filter-functions 'ansi-color-apply)

  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/eshell-keys</span>()
    (define-key eshell-mode-map (kbd <span style="color: #95e454;">"M-r"</span>) 'my/eshell-complete-history)
    (define-key eshell-mode-map (kbd <span style="color: #95e454;">"C-="</span>) 'my/eshell-complete-recent-dir))

  (add-hook 'eshell-mode-hook 'my/eshell-keys)
  (message <span style="color: #95e454;">"Lazy loaded eshell :-)"</span>))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/eshell-other-window</span> ()
  <span style="color: #95e454;">"Open an `</span><span style="color: #e5786d;">eshell</span><span style="color: #95e454;">' in another window."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (eshell))

(autoload 'eshell <span style="color: #95e454;">"eshell"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-c e"</span>) 'eshell)
(global-set-key (kbd <span style="color: #95e454;">"C-c 4 e"</span>) 'my/eshell-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-9" class="outline-3">
<h3 id="sec-16-9"><span class="section-number-3">16.9</span> Gnus</h3>
<div class="outline-text-3" id="text-16-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'gnus
  (<span style="color: #8ac6f2; font-weight: bold;">require</span> '<span style="color: #e5786d;">nnir</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gnus-init-file <span style="color: #95e454;">"~/.emacs.d/init.el"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gnus-home-directory <span style="color: #95e454;">"~/.emacs.d/"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> message-directory <span style="color: #95e454;">"~/.emacs.d/mail"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gnus-directory <span style="color: #95e454;">"~/.emacs.d/news"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> nnfolder-directory <span style="color: #95e454;">"~/.emacs.d/mail/archive"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gnus-use-full-window nil)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gnus-select-method '(nntp <span style="color: #95e454;">"news.gwene.org"</span>))
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq gnus-secondary-select-methods '((nntp "news.gnus.org")))</span>
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gnus-summary-thread-gathering-function 'gnus-gather-threads-by-subject)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gnus-thread-hide-subtree t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gnus-thread-ignore-subject t)
  (message <span style="color: #95e454;">"Lazy loaded gnus :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-10" class="outline-3">
<h3 id="sec-16-10"><span class="section-number-3">16.10</span> Highlight changes</h3>
<div class="outline-text-3" id="text-16-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'highlight-changes
  (global-set-key (kbd <span style="color: #95e454;">"C-c h n"</span>) 'highlight-changes-next-change)
  (global-set-key (kbd <span style="color: #95e454;">"C-c h p"</span>) 'highlight-changes-previous-change)
  (message <span style="color: #95e454;">"Lazy loaded highlight-changes-mode :-)"</span>))
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> highlight-changes-visibility-initial-state nil)
(add-hook 'emacs-startup-hook 'global-highlight-changes-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-11" class="outline-3">
<h3 id="sec-16-11"><span class="section-number-3">16.11</span> Hippie Expand</h3>
<div class="outline-text-3" id="text-16-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/hippie-expand-completions</span> (<span style="color: #92a65e; font-weight: bold;">&amp;optional</span> hippie-expand-function)
  <span style="color: #95e454;">"Return the full list of completions generated by HIPPIE-EXPAND-FUNCTION.</span>
<span style="color: #95e454;">The optional argument can be generated with `</span><span style="color: #e5786d;">make-hippie-expand-function</span><span style="color: #95e454;">'."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((this-command 'my/hippie-expand-completions)
        (last-command last-command)
        (buffer-modified (buffer-modified-p))
        (hippie-expand-function (<span style="color: #8ac6f2; font-weight: bold;">or</span> hippie-expand-function 'hippie-expand)))
    (<span style="color: #8ac6f2; font-weight: bold;">cl-flet</span> ((ding)) <span style="color: #99968b;">; </span><span style="color: #99968b;">avoid the (ding) when hippie-expand exhausts its options.</span>
      (<span style="color: #8ac6f2; font-weight: bold;">while</span> (<span style="color: #8ac6f2; font-weight: bold;">progn</span>
               (funcall hippie-expand-function nil)
               (<span style="color: #8ac6f2; font-weight: bold;">setq</span> last-command 'my/hippie-expand-completions)
               (not (equal he-num -1)))))
    <span style="color: #99968b;">;; </span><span style="color: #99968b;">Evaluating the completions modifies the buffer, however we will finish</span>
    <span style="color: #99968b;">;; </span><span style="color: #99968b;">up in the same state that we began.</span>
    (set-buffer-modified-p buffer-modified)
    <span style="color: #99968b;">;; </span><span style="color: #99968b;">Provide the options in the order in which they are normally generated.</span>
    (delete he-search-string (reverse he-tried-table))))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/hippie-complete-with</span> (hippie-expand-function)
  <span style="color: #95e454;">"Offer `</span><span style="color: #e5786d;">completing-read</span><span style="color: #95e454;">' using the specified HIPPIE-EXPAND-FUNCTION."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">let*</span> ((options (my/hippie-expand-completions hippie-expand-function))
         (selection (<span style="color: #8ac6f2; font-weight: bold;">and</span> options (completing-read <span style="color: #95e454;">"Completions: "</span> options))))
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> selection
        (he-substitute-string selection t)
      (message <span style="color: #95e454;">"No expansion found"</span>))))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/hippie-expand-completing-read</span> ()
  <span style="color: #95e454;">"Offer `</span><span style="color: #e5786d;">completing-read</span><span style="color: #95e454;">' for the word at point."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (my/hippie-complete-with 'hippie-expand))
(global-set-key (kbd <span style="color: #95e454;">"C-c /"</span>) 'my/hippie-expand-completing-read)

(global-set-key (kbd <span style="color: #95e454;">"M-/"</span>) 'hippie-expand)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-12" class="outline-3">
<h3 id="sec-16-12"><span class="section-number-3">16.12</span> Icomplete</h3>
<div class="outline-text-3" id="text-16-12">
<p>
Turn on <code>fido-mode</code> if we are on Emacs 27+
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">if</span> (version&lt; emacs-version <span style="color: #95e454;">"27"</span>)
    (icomplete-mode)
  (fido-mode))
</pre>
</div>
</div>

<div id="outline-container-sec-16-12-1" class="outline-4">
<h4 id="sec-16-12-1"><span class="section-number-4">16.12.1</span> Change completion styles</h4>
<div class="outline-text-4" id="text-16-12-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/icomplete-styles</span> ()
  <span style="color: #95e454;">"Set icomplete styles based on Emacs version."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (version&lt; emacs-version <span style="color: #95e454;">"27"</span>)
      (<span style="color: #8ac6f2; font-weight: bold;">setq-local</span> completion-styles '(initials partial-completion substring basic))
    (<span style="color: #8ac6f2; font-weight: bold;">setq-local</span> completion-styles '(initials partial-completion flex substring basic))))
(add-hook 'icomplete-minibuffer-setup-hook 'my/icomplete-styles)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-12-2" class="outline-4">
<h4 id="sec-16-12-2"><span class="section-number-4">16.12.2</span> Icomplete settings</h4>
<div class="outline-text-4" id="text-16-12-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-delay-completions-threshold 100)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-max-delay-chars 2)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-compute-delay 0.2)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-show-matches-on-no-input t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-hide-common-prefix nil)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-prospects-height 1)
<span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq icomplete-separator "\n")</span>
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-separator (propertize <span style="color: #95e454;">" &#183; "</span> 'face 'shadow))
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-with-completion-tables t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-tidy-shadowed-file-names t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> icomplete-in-buffer t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-12-3" class="outline-4">
<h4 id="sec-16-12-3"><span class="section-number-4">16.12.3</span> Icomplete keybindings</h4>
<div class="outline-text-4" id="text-16-12-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">if</span> (version&lt; emacs-version <span style="color: #95e454;">"27"</span>)
    (define-key icomplete-minibuffer-map (kbd <span style="color: #95e454;">"C-j"</span>) 'icomplete-fido-exit))
(define-key icomplete-minibuffer-map (kbd <span style="color: #95e454;">"M-j"</span>) 'exit-minibuffer)
(define-key icomplete-minibuffer-map (kbd <span style="color: #95e454;">"C-n"</span>) 'icomplete-forward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #95e454;">"C-p"</span>) 'icomplete-backward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #95e454;">"&lt;up&gt;"</span>) 'icomplete-backward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #95e454;">"&lt;down&gt;"</span>) 'icomplete-forward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #95e454;">"&lt;left&gt;"</span>) 'icomplete-backward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #95e454;">"&lt;right&gt;"</span>) 'icomplete-forward-completions)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-16-13" class="outline-3">
<h3 id="sec-16-13"><span class="section-number-3">16.13</span> Imenu</h3>
<div class="outline-text-3" id="text-16-13">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'imenu
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> imenu-auto-rescan t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> imenu-auto-rescan-maxout 600000)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> imenu-eager-completion-buffer t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> imenu-level-separator <span style="color: #95e454;">"/"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> imenu-max-item-length 100)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> imenu-space-replacement <span style="color: #95e454;">" "</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> imenu-use-markers t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> imenu-use-popup-menu nil)
  (message <span style="color: #95e454;">"Lazy loaded imenu :-)"</span>))

(autoload 'imenu <span style="color: #95e454;">"imenu"</span> nil t)
(global-set-key (kbd <span style="color: #95e454;">"C-c i"</span>) 'imenu)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-14" class="outline-3">
<h3 id="sec-16-14"><span class="section-number-3">16.14</span> Isearch</h3>
<div class="outline-text-3" id="text-16-14">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'isearch
   <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/isearch-exit</span> ()
    <span style="color: #95e454;">"Move point to the start of the matched string."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">when</span> (eq isearch-forward t)
      (goto-char isearch-other-end))
    (isearch-exit))

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/isearch-abort-dwim</span> ()
    <span style="color: #95e454;">"Delete failed `</span><span style="color: #e5786d;">isearch</span><span style="color: #95e454;">' input, single char, or cancel search.</span>

<span style="color: #95e454;">This is a modified variant of `</span><span style="color: #e5786d;">isearch-abort</span><span style="color: #95e454;">' that allows us to</span>
<span style="color: #95e454;">perform the following, based on the specifics of the case: (i)</span>
<span style="color: #95e454;">delete the entirety of a non-matching part, when present; (ii)</span>
<span style="color: #95e454;">delete a single character, when possible; (iii) exit current</span>
<span style="color: #95e454;">search if no character is present and go back to point where the</span>
<span style="color: #95e454;">search started."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> (eq (length isearch-string) 0)
        (isearch-cancel)
      (isearch-del-char)
      (<span style="color: #8ac6f2; font-weight: bold;">while</span> (<span style="color: #8ac6f2; font-weight: bold;">or</span> (not isearch-success) isearch-error)
        (isearch-pop-state)))
    (isearch-update))

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/copy-to-isearch</span> ()
    <span style="color: #95e454;">"Copy up to the search match when searching forward.</span>

<span style="color: #95e454;">When searching backward, copy to the start of the search match."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (my/isearch-exit)
    (call-interactively 'kill-ring-save)
    (exchange-point-and-mark))

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/kill-to-isearch</span> ()
    <span style="color: #95e454;">"Kill up to the search match when searching forward.</span>

<span style="color: #95e454;">When searching backward, kill to the beginning of the match."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (my/isearch-exit)
    (call-interactively 'kill-region))

  (<span style="color: #8ac6f2; font-weight: bold;">when</span> (not (version&lt; emacs-version <span style="color: #95e454;">"27.1"</span>))
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> isearch-allow-scroll 'unlimited)
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> isearch-yank-on-move 't)
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> isearch-lazy-count t)
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> lazy-count-prefix-format nil)
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> lazy-count-suffix-format <span style="color: #95e454;">" (%s/%s)"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> search-highlight t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> search-whitespace-regexp <span style="color: #95e454;">".*?"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> isearch-lax-whitespace t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> isearch-regexp-lax-whitespace nil)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> isearch-lazy-highlight t)

  (define-key isearch-mode-map (kbd <span style="color: #95e454;">"RET"</span>) 'my/isearch-exit)
  (define-key isearch-mode-map (kbd <span style="color: #95e454;">"&lt;backspace&gt;"</span>) 'my/isearch-abort-dwim)
  (define-key isearch-mode-map (kbd <span style="color: #95e454;">"M-w"</span>) 'my/copy-to-isearch)
  (define-key isearch-mode-map (kbd <span style="color: #95e454;">"C-M-w"</span>) 'my/kill-to-isearch)
  (define-key isearch-mode-map (kbd <span style="color: #95e454;">"M-/"</span>) 'isearch-complete)
  (define-key minibuffer-local-isearch-map (kbd <span style="color: #95e454;">"M-/"</span>) 'isearch-complete-edit)
  (message <span style="color: #95e454;">"Lazy loaded isearch :-)"</span>))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #95e454;">"C-r"</span>) 'isearch-backward-regexp)
(global-set-key (kbd <span style="color: #95e454;">"C-s"</span>) 'isearch-forward-regexp)
(global-set-key (kbd <span style="color: #95e454;">"M-s b"</span>) 'multi-isearch-buffers-regexp)
(global-set-key (kbd <span style="color: #95e454;">"M-s f"</span>) 'multi-isearch-files-regexp)
(global-set-key (kbd <span style="color: #95e454;">"M-s M-o"</span>) 'multi-occur)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'occur-mode-hook 'hl-line-mode)
(define-key occur-mode-map <span style="color: #95e454;">"t"</span> 'toggle-truncate-lines)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-15" class="outline-3">
<h3 id="sec-16-15"><span class="section-number-3">16.15</span> Minibuffer</h3>
<div class="outline-text-3" id="text-16-15">
</div><div id="outline-container-sec-16-15-1" class="outline-4">
<h4 id="sec-16-15-1"><span class="section-number-4">16.15.1</span> Save history mode</h4>
<div class="outline-text-4" id="text-16-15-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'savehist
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> savehist-additional-variables '(kill-ring search-ring regexp-search-ring))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> savehist-save-minibuffer-history 1)
  (message <span style="color: #95e454;">"Lazy loaded savehist :-)"</span>))
(add-hook 'after-init-hook 'savehist-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-15-2" class="outline-4">
<h4 id="sec-16-15-2"><span class="section-number-4">16.15.2</span> Completion framework settings</h4>
<div class="outline-text-4" id="text-16-15-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> completion-category-defaults nil)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> completion-cycle-threshold 3)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> completion-flex-nospace nil)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> completion-ignore-case t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> completion-pcm-complete-word-inserts-delimiters t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> completion-pcm-word-delimiters <span style="color: #95e454;">"-_./:| "</span>)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> completion-show-help nil)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> completions-detailed t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> completions-format 'one-column)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-15-3" class="outline-4">
<h4 id="sec-16-15-3"><span class="section-number-4">16.15.3</span> Misc Minibuffer settings</h4>
<div class="outline-text-4" id="text-16-15-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">setq</span> enable-recursive-minibuffers t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> file-name-shadow-mode 1)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> minibuffer-depth-indicate-mode 1)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> minibuffer-eldef-shorten-default t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> minibuffer-electric-default-mode 1)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> read-answer-short t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> read-buffer-completion-ignore-case t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> read-file-name-completion-ignore-case t)
(<span style="color: #8ac6f2; font-weight: bold;">setq</span> resize-mini-windows t)
</pre>
</div>

<p>
It may also be wise to raise gc-cons-threshold while the minibuffer is active,
so the GC doesn’t slow down expensive commands (or completion frameworks, like
helm and ivy). Stolen from <a href="https://github.com/hlissner/doom-emacs/blob/develop/docs/faq.org#how-does-doom-start-up-so-quickly">Doom Emacs FAQ</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'minibuffer-setup-hook (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> () (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gc-cons-threshold most-positive-fixnum)))
(add-hook 'minibuffer-exit-hook (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> () (<span style="color: #8ac6f2; font-weight: bold;">setq</span> gc-cons-threshold 16777216))) <span style="color: #99968b;">; </span><span style="color: #99968b;">16mb</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-16-16" class="outline-3">
<h3 id="sec-16-16"><span class="section-number-3">16.16</span> Org</h3>
<div class="outline-text-3" id="text-16-16">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'org
  (<span style="color: #8ac6f2; font-weight: bold;">require</span> '<span style="color: #e5786d;">org-tempo</span>)
<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/org-recursive-sort</span> ()
    <span style="color: #95e454;">"Sort all entries in the current buffer, recursively."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (org-map-entries
     (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> ()
       (<span style="color: #8ac6f2; font-weight: bold;">condition-case</span> x
           (org-sort-entries nil ?a)
         (<span style="color: #ccaa8f;">user-error</span>)))))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/org-tangle-block</span> ()
    <span style="color: #95e454;">"Only tangle the block at point."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((current-prefix-arg '(4)))
      (call-interactively 'org-babel-tangle)))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/org-babel-insert-elisp-boilerplate</span> (file)
    <span style="color: #95e454;">"Insert elisp documentation boilerplate into FILE, using COMMENTARY.</span>
<span style="color: #95e454;">Return the file name, so that this function can be piped to other</span>
<span style="color: #95e454;">functions."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">when</span> (equal (file-name-extension file) <span style="color: #95e454;">"el"</span>)
      (<span style="color: #8ac6f2; font-weight: bold;">with-current-buffer</span> (find-file-noselect file)
        (<span style="color: #8ac6f2; font-weight: bold;">let*</span> ((filename (file-name-sans-extension (file-name-nondirectory file)))
               (copyright (concat (format-time-string <span style="color: #95e454;">"%Y"</span>) <span style="color: #95e454;">" "</span> user-full-name))
               (author (concat user-full-name <span style="color: #95e454;">" &lt;"</span>user-mail-address<span style="color: #95e454;">"&gt;"</span>))
               (header (concat <span style="color: #95e454;">";;; "</span> filename <span style="color: #95e454;">".el --- "</span> filename<span style="color: #95e454;">"\n\n"</span>
                               <span style="color: #95e454;">";;; Commentary:\n\n"</span>
                               <span style="color: #95e454;">";; Copyright: (C) "</span> copyright <span style="color: #95e454;">"\n"</span>
                               <span style="color: #95e454;">";; Author: "</span> author <span style="color: #95e454;">"\n\n"</span>
                               <span style="color: #95e454;">";;; Code:\n"</span>))
               (footer (concat <span style="color: #95e454;">"\n(provide '"</span> filename <span style="color: #95e454;">")\n"</span>
                               <span style="color: #95e454;">";; Local Variables&#58;\n"</span>
                               <span style="color: #95e454;">";; indent-tabs-mode: nil\n"</span>
                               <span style="color: #95e454;">";; byte-compile-warnings: (not free-vars noruntime)\n"</span>
                               <span style="color: #95e454;">";; End:\n"</span>
                               <span style="color: #95e454;">";;; "</span> filename <span style="color: #95e454;">".el ends here"</span>)))
          (goto-char (point-min)) (insert header)
          (goto-char (point-max)) (insert footer)
          (add-file-local-variable-prop-line 'lexical-binding t)
          (save-buffer) (kill-buffer)
          (message (concat <span style="color: #95e454;">"Inserted boilerplate into "</span> file))))
      (<span style="color: #8ac6f2; font-weight: bold;">when</span> (file-readable-p (concat file <span style="color: #95e454;">"~"</span>))
        (delete-file (concat file <span style="color: #95e454;">"~"</span>))
        (message (concat <span style="color: #95e454;">"Deleted "</span> file <span style="color: #95e454;">"~ backup file"</span>)))))
  (add-hook 'org-babel-post-tangle-hook
            (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> () (my/org-babel-insert-elisp-boilerplate buffer-file-name)))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/buffer-substring-p</span> (string)
    (<span style="color: #8ac6f2; font-weight: bold;">save-excursion</span>
      (<span style="color: #8ac6f2; font-weight: bold;">save-match-data</span>
        (goto-char (point-min))
        (<span style="color: #8ac6f2; font-weight: bold;">if</span> (re-search-forward string nil t) t nil))))

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/org-babel-auto-tangle-init-file</span> ()
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> (<span style="color: #8ac6f2; font-weight: bold;">and</span> (equal (buffer-name) <span style="color: #95e454;">"README.org"</span>)
             (my/buffer-substring-p
              <span style="color: #95e454;">"^\\#\\+PROPERTY\\: header-args\\+ \\:tangle \\~\\/\\.emacs.d\\/init\\.el"</span>))
        (org-babel-tangle)))
  (add-hook 'after-save-hook 'my/org-babel-auto-tangle-init-file)

  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-image-actual-width nil)
  (<span style="color: #8ac6f2; font-weight: bold;">setf</span> org-blank-before-new-entry '((heading . nil) (plain-list-item . nil)))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-emphasis-regexp-components '(<span style="color: #95e454;">" \t('\"{"</span> <span style="color: #95e454;">"- \t.,:!?;'\")}\\"</span> <span style="color: #95e454;">" \t\r\n,\"'"</span> <span style="color: #95e454;">"."</span> 300))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-confirm-babel-evaluate t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-agenda-files (file-expand-wildcards <span style="color: #95e454;">"~/*.org"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-agenda-files (<span style="color: #8ac6f2; font-weight: bold;">quote</span> (<span style="color: #95e454;">"~/org/todo.org"</span>)))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-default-notes-file <span style="color: #95e454;">"~/org/notes.org"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-directory <span style="color: #95e454;">"~/org"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-export-with-toc t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-indent-indentation-per-level 1)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-list-allow-alphabetical t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-list-indent-offset 1)
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq org-replace-disputed-keys t) ;; fix windmove conflicts</span>
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-return-follows-link t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-refile-use-outline-path 'file)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-outline-path-complete-in-steps nil)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-refile-allow-creating-parent-nodes 'confirm)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-refile-targets '((nil <span style="color: #e5786d;">:maxlevel</span> . 9)))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-speed-commands-user (<span style="color: #8ac6f2; font-weight: bold;">quote</span> ((<span style="color: #95e454;">"N"</span> . org-down-element)
                                        (<span style="color: #95e454;">"P"</span> . org-up-element))))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-src-fontify-natively t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-src-tab-acts-natively t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-src-window-setup 'current-window)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-startup-indented t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-use-fast-todo-selection t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-use-speed-commands t)

  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-latex-listings 'minted)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-latex-pdf-process
        '(<span style="color: #95e454;">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>
          <span style="color: #95e454;">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>
          <span style="color: #95e454;">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>))
  (add-to-list 'org-latex-packages-alist '(<span style="color: #95e454;">""</span> <span style="color: #95e454;">"minted"</span>))

  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> org-capture-templates
        '((<span style="color: #95e454;">"t"</span> <span style="color: #95e454;">"TODO Entry"</span> entry (file+headline <span style="color: #95e454;">"~/org/todo.org"</span> <span style="color: #95e454;">"CURRENT"</span>)
           <span style="color: #95e454;">"* TODO %?\n  %i\n  %a"</span>)
          (<span style="color: #95e454;">"j"</span> <span style="color: #95e454;">"Journal Entry"</span> entry (file+datetree <span style="color: #95e454;">"~/org/journal.org"</span> <span style="color: #95e454;">"JOURNAL"</span>)
           <span style="color: #95e454;">"* %?\nEntered on %U\n  %i\n  %a"</span>)))

  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"cl"</span> . <span style="color: #95e454;">"src common-lisp"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"el"</span> . <span style="color: #95e454;">"src emacs-lisp"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"go"</span> . <span style="color: #95e454;">"src go"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"ja"</span> . <span style="color: #95e454;">"src java"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"js"</span> . <span style="color: #95e454;">"src javascript"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"kr"</span> . <span style="color: #95e454;">"src c"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"py"</span> . <span style="color: #95e454;">"src python"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"sh"</span> . <span style="color: #95e454;">"src shell"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"sq"</span> . <span style="color: #95e454;">"src sql"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #95e454;">"tx"</span> . <span style="color: #95e454;">"src text"</span>))

  (org-babel-do-load-languages
   'org-babel-load-languages
   '((awk . t)
     (C . t)
     (clojure . t)
     (css . t)
     (dot . t) <span style="color: #99968b;">;; </span><span style="color: #99968b;">graphviz language</span>
     (emacs-lisp . t)
     (gnuplot . t)
     (haskell . t)
     <span style="color: #99968b;">;; </span><span style="color: #99968b;">(http . t)</span>
     (java . t)
     (js . t)
     (latex . t)
     (lisp . t)
     (makefile . t)
     (ocaml . t)
     (perl . t)
     (python . t)
     (plantuml . t)
     (ruby . t)
     (scheme . t)
     (sed . t)
     (shell . t)
     (sql . t)
     (sqlite . t)))

  (add-hook 'org-mode-hook 'auto-fill-mode)
  (add-hook 'org-mode-hook 'hl-line-mode)
  (message <span style="color: #95e454;">"Lazy loaded org :-)"</span>))
</pre>
</div>
</div>

<div id="outline-container-sec-16-16-1" class="outline-4">
<h4 id="sec-16-16-1"><span class="section-number-4">16.16.1</span> Org global bindings</h4>
<div class="outline-text-4" id="text-16-16-1">
<pre class="example">
(autoload 'org-mode "org" nil t)
(autoload 'org-agenda "org" nil t)
(global-set-key (kbd "C-c C-o a") 'org-agenda)
(autoload 'org-capture "org" nil t)
(global-set-key (kbd "C-c C-o c") 'org-capture)
(autoload 'org-store-link "org" nil t)
(global-set-key (kbd "C-c C-o l") 'org-store-link)
(autoload 'org-time-stamp "org" nil t)
(global-set-key (kbd "C-c C-o t") 'org-time-stamp)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-17" class="outline-3">
<h3 id="sec-16-17"><span class="section-number-3">16.17</span> Pending delete</h3>
<div class="outline-text-3" id="text-16-17">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'pending-delete-mode 1) <span style="color: #99968b;">;; </span><span style="color: #99968b;">remove selected region if typing</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-18" class="outline-3">
<h3 id="sec-16-18"><span class="section-number-3">16.18</span> Prettify Symbols</h3>
<div class="outline-text-3" id="text-16-18">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'prettify-symbols
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> prettify-symbols-unprettify-at-point 'right-edge)
  (message <span style="color: #95e454;">"Lazy loaded prettify-symbols :-)"</span>))
(add-hook 'emacs-startup-hook 'global-prettify-symbols-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-19" class="outline-3">
<h3 id="sec-16-19"><span class="section-number-3">16.19</span> Recentf</h3>
<div class="outline-text-3" id="text-16-19">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'recentf
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> recentf-exclude '(<span style="color: #95e454;">".gz"</span>
                          <span style="color: #95e454;">".xz"</span>
                          <span style="color: #95e454;">".zip"</span>
                          <span style="color: #95e454;">"/elpa/"</span>
                          <span style="color: #95e454;">"/ssh:"</span>
                          <span style="color: #95e454;">"/sudo:"</span>
                          <span style="color: #95e454;">"^/var/folders\\.*"</span>
                          <span style="color: #95e454;">"COMMIT_EDITMSG\\'"</span>
                          <span style="color: #95e454;">".*-autoloads\\.el\\'"</span>
                          <span style="color: #95e454;">"[/\\]\\.elpa/"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> recentf-max-menu-items 128)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> recentf-max-saved-items 256)

  <span style="color: #99968b;">;;;</span><span style="color: #99968b;">###autoload</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/completing-recentf</span> ()
    <span style="color: #95e454;">"Show a list of recent files."</span>
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (<span style="color: #8ac6f2; font-weight: bold;">let*</span> ((all-files recentf-list)
           (list1 (mapcar (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> (x) (file-name-nondirectory x) x) all-files))
           (list2 (mapcar #'substring-no-properties list1))
           (list3 (mapcar #'abbreviate-file-name list2))
           (list4 (cl-remove-duplicates list3 <span style="color: #e5786d;">:test</span> #'string-equal)))
      (find-file (completing-read <span style="color: #95e454;">"Recent Files: "</span> list4 nil t))))
  (global-set-key (kbd <span style="color: #95e454;">"C-c r"</span>) 'my/completing-recentf)

  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/completing-recentf-other-window</span> ()
    (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
    (split-window-sensibly)
    (other-window 1)
    (my/completing-recentf))
  (global-set-key (kbd <span style="color: #95e454;">"C-c 4 r"</span>) 'my/completing-recentf-other-window)

  (message <span style="color: #95e454;">"Lazy loaded recentf :-)"</span>))

(global-set-key (kbd <span style="color: #95e454;">"C-c C-r"</span>) 'recentf-open-files)
(add-hook 'after-init-hook 'recentf-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-20" class="outline-3">
<h3 id="sec-16-20"><span class="section-number-3">16.20</span> Show paren</h3>
<div class="outline-text-3" id="text-16-20">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'show-paren-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-21" class="outline-3">
<h3 id="sec-16-21"><span class="section-number-3">16.21</span> Saveplace</h3>
<div class="outline-text-3" id="text-16-21">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'save-place
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> save-place-file (concat user-emacs-directory <span style="color: #95e454;">"saveplace.el"</span>))
  (message <span style="color: #95e454;">"Lazy loaded save-place-mode :-)"</span>))
(add-hook 'emacs-startup-hook 'save-place-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-22" class="outline-3">
<h3 id="sec-16-22"><span class="section-number-3">16.22</span> Shell script</h3>
<div class="outline-text-3" id="text-16-22">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'sh-script
  (add-hook 'shell-script-mode-hook 'hl-line-mode)
  (add-hook 'sh-script-hook 'display-line-numbers-mode)
  (add-hook 'after-save-hook 'executable-make-buffer-file-executable-if-script-p)
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\.sh\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\.bash.*\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\.zsh.*\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\bashrc\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\kshrc\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\profile\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\zshenv\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\zprompt\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\zshrc\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #95e454;">"\\prompt_.*_setup\\'"</span> . shell-script-mode))
  (add-to-list 'interpreter-mode-alist '(<span style="color: #95e454;">"bash"</span> . shell-script-mode))
  (add-to-list 'interpreter-mode-alist '(<span style="color: #95e454;">"ksh"</span> . shell-script-mode))
  (add-to-list 'interpreter-mode-alist '(<span style="color: #95e454;">"sh"</span> . shell-script-mode))
  (add-to-list 'interpreter-mode-alist '(<span style="color: #95e454;">"zsh"</span> . shell-script-mode))
  (message <span style="color: #95e454;">"Lazy loaded shell-script-mode :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-23" class="outline-3">
<h3 id="sec-16-23"><span class="section-number-3">16.23</span> Subword</h3>
<div class="outline-text-3" id="text-16-23">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'global-subword-mode) <span style="color: #99968b;">;; </span><span style="color: #99968b;">move by camel case, etc</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-24" class="outline-3">
<h3 id="sec-16-24"><span class="section-number-3">16.24</span> Term</h3>
<div class="outline-text-3" id="text-16-24">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload 'term <span style="color: #95e454;">"term"</span> nil t)
(autoload 'ansi-term <span style="color: #95e454;">"term"</span> nil t)
</pre>
</div>
</div>

<div id="outline-container-sec-16-24-1" class="outline-4">
<h4 id="sec-16-24-1"><span class="section-number-4">16.24.1</span> ANSI Term launcher</h4>
<div class="outline-text-4" id="text-16-24-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/ansi-term</span> ()
  <span style="color: #95e454;">"Opens shell from $SHELL environmental variable in `</span><span style="color: #e5786d;">ansi-term</span><span style="color: #95e454;">'."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">https://emacs.stackexchange.com/a/48481</span>
  (<span style="color: #8ac6f2; font-weight: bold;">let</span> ((switch-to-buffer-obey-display-actions))
    (ansi-term (getenv <span style="color: #95e454;">"SHELL"</span>))))
(global-set-key (kbd <span style="color: #95e454;">"C-c tt"</span>) 'my/ansi-term)

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/ansi-term-other-window</span> ()
  <span style="color: #95e454;">"Opens default $SHELL `</span><span style="color: #e5786d;">ansi-term</span><span style="color: #95e454;">' in another window."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (my/ansi-term))
(global-set-key (kbd <span style="color: #95e454;">"C-c 4 tt"</span>) 'my/ansi-term-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-24-2" class="outline-4">
<h4 id="sec-16-24-2"><span class="section-number-4">16.24.2</span> Switch to ANSI Term</h4>
<div class="outline-text-4" id="text-16-24-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/switch-to-ansi-term</span> ()
  <span style="color: #95e454;">"Open an `</span><span style="color: #e5786d;">ansi-term</span><span style="color: #95e454;">' if it doesn't already exist.</span>
<span style="color: #95e454;">Otherwise switch to current one."</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (get-buffer <span style="color: #95e454;">"*ansi-term*"</span>)
      (switch-to-buffer <span style="color: #95e454;">"*ansi-term*"</span>)
    (ansi-term (getenv <span style="color: #95e454;">"SHELL"</span>))))
(global-set-key (kbd <span style="color: #95e454;">"C-c ts"</span>) 'my/switch-to-ansi-term)

<span style="color: #99968b;">;;;</span><span style="color: #99968b;">###</span><span style="color: #ccaa8f;">autoload</span>
(<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/switch-to-ansi-term-other-window</span>()
  <span style="color: #95e454;">"Does what it states on the tin!"</span>
  (<span style="color: #8ac6f2; font-weight: bold;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (my/switch-to-ansi-term))
(global-set-key (kbd <span style="color: #95e454;">"C-c 4 ts"</span>) 'my/switch-to-ansi-term-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-24-3" class="outline-4">
<h4 id="sec-16-24-3"><span class="section-number-4">16.24.3</span> Lazy load</h4>
<div class="outline-text-4" id="text-16-24-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'term
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">get unicode characters in ansi-term - https://stackoverflow.com/a/7442266</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defadvice</span> <span style="color: #cae682;">ansi-term</span> (after advise-ansi-term-coding-system)
    <span style="color: #95e454;">"Get unicode characters in `</span><span style="color: #e5786d;">ansi-term</span><span style="color: #95e454;">'."</span>
    (set-buffer-process-coding-system 'utf-8-unix 'utf-8-unix))
  (ad-activate 'ansi-term)

  (<span style="color: #8ac6f2; font-weight: bold;">defadvice</span> <span style="color: #cae682;">term-handle-exit</span> (after term-kill-buffer-on-exit activate)
    <span style="color: #95e454;">"Kill term when shell exits."</span>
    (kill-buffer))

  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> term-buffer-maximum-size 200000)
  (message <span style="color: #95e454;">"Lazy loaded term :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-24-4" class="outline-4">
<h4 id="sec-16-24-4"><span class="section-number-4">16.24.4</span> Set term coding system to UTF-8</h4>
<div class="outline-text-4" id="text-16-24-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'term-exec (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> () (set-process-coding-system 'utf-8-unix 'utf-8-unix)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-16-25" class="outline-3">
<h3 id="sec-16-25"><span class="section-number-3">16.25</span> Tramp</h3>
<div class="outline-text-3" id="text-16-25">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'tramp
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> tramp-backup-directory-alist backup-directory-alist)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> tramp-default-method <span style="color: #95e454;">"ssh"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setf</span> tramp-persistency-file-name (concat temporary-file-directory <span style="color: #95e454;">"tramp-"</span> (user-login-name)))
  (message <span style="color: #95e454;">"Lazy loaded tramp :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-26" class="outline-3">
<h3 id="sec-16-26"><span class="section-number-3">16.26</span> Version Control</h3>
<div class="outline-text-3" id="text-16-26">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'vc
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> vc-follow-symlinks t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> vc-make-backup-files t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> version-control t)
  (message <span style="color: #95e454;">"Lazy loaded vc :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-27" class="outline-3">
<h3 id="sec-16-27"><span class="section-number-3">16.27</span> Whitespace</h3>
<div class="outline-text-3" id="text-16-27">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">with-eval-after-load</span> 'whitespace
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> whitespace-line-column 120)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> whitespace-style '(face
                           tabs
                           spaces
                           trailing
                           lines
                           space-before-tab::space
                           newline
                           indentation::space
                           empty
                           space-after-tab::space
                           space-mark
                           tab-mark
                           newline-mark)
        whitespace-face 'whitespace-trailing)
  (global-set-key (kbd <span style="color: #95e454;">"C-c M-w"</span>) 'whitespace-mode)
  (message <span style="color: #95e454;">"Lazy loaded whitespace :-)"</span>))
</pre>
</div>

<p>
Cleanup whitespace on save
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'before-save-hook 'whitespace-cleanup)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><span class="section-number-2">17</span> Third party package configuration</h2>
<div class="outline-text-2" id="text-17">
<p>
I like to split up my "vanilla" Emacs configuration and custom functions from
the customisations provided by third party libraries that have been installed
using <code>package.el</code> and <code>use-package</code>.
</p>

<p>
If you want to go for a more vanilla setup, just prefix the <code>COMMENT</code> keyword
to the tile above, and re-tangle the file.
</p>

<p>
This way it makes it very easy to run a semi-stock Emacs without <code>package.el</code>
or any third party libraries, but still have some saner defaults and some extra
functionality.
</p>

<p>
I'm using John Wiegley's awesome <a href="https://github.com/jwiegley/use-package">use-package</a> to pull in and configure any third
party packages from <a href="https://melpa.org/">MELPA</a>.
</p>
</div>

<div id="outline-container-sec-17-1" class="outline-3">
<h3 id="sec-17-1"><span class="section-number-3">17.1</span> Setup package.el and use-package</h3>
<div class="outline-text-3" id="text-17-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">require</span> '<span style="color: #e5786d;">package</span>)
(<span style="color: #8ac6f2; font-weight: bold;">unless</span> (package-installed-p 'use-package)
  (package-refresh-contents)
  (package-install 'use-package))

(<span style="color: #8ac6f2; font-weight: bold;">setq</span> use-package-enable-imenu-support t
      <span style="color: #99968b;">;; </span><span style="color: #99968b;">use-package-hook-name-suffix nil</span>
      use-package-always-ensure t
      use-package-verbose t)
(<span style="color: #8ac6f2; font-weight: bold;">require</span> '<span style="color: #e5786d;">use-package</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-2" class="outline-3">
<h3 id="sec-17-2"><span class="section-number-3">17.2</span> Ansible</h3>
<div class="outline-text-3" id="text-17-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">ansible</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:hook</span> (yaml-mode . ansible))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">ansible-doc</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:hook</span> (yaml-mode . ansible-doc-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-3" class="outline-3">
<h3 id="sec-17-3"><span class="section-number-3">17.3</span> Async</h3>
<div class="outline-text-3" id="text-17-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">async</span> <span style="color: #e5786d;">:defer</span> 5
  <span style="color: #e5786d;">:commands</span> (async-byte-compile-file
             async-bytecomp-package-mode)
  <span style="color: #e5786d;">:init</span>
  (<span style="color: #8ac6f2; font-weight: bold;">unless</span> (equal system-type 'windows-nt)
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> async-bytecomp-allowed-packages '(all)))
  <span style="color: #e5786d;">:config</span>
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> (equal system-type 'windows-nt)
      (async-bytecomp-package-mode -1)
    (async-bytecomp-package-mode 1))
  <span style="color: #e5786d;">:hook</span> (dired-mode-hook . dired-async-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-4" class="outline-3">
<h3 id="sec-17-4"><span class="section-number-3">17.4</span> Blacken</h3>
<div class="outline-text-3" id="text-17-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">blacken</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:hook</span> (python-mode . blacken-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-5" class="outline-3">
<h3 id="sec-17-5"><span class="section-number-3">17.5</span> Default text scaling</h3>
<div class="outline-text-3" id="text-17-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">default-text-scale</span>
  <span style="color: #e5786d;">:if</span> window-system
  <span style="color: #e5786d;">:bind*</span>
  (<span style="color: #95e454;">"C-M-="</span> . default-text-scale-increase)
  (<span style="color: #95e454;">"C-M--"</span> . default-text-scale-decrease)
  (<span style="color: #95e454;">"C-M-0"</span> . default-text-scale-reset))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-6" class="outline-3">
<h3 id="sec-17-6"><span class="section-number-3">17.6</span> Diminish</h3>
<div class="outline-text-3" id="text-17-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">diminish</span> <span style="color: #e5786d;">:defer</span> 2
  <span style="color: #e5786d;">:diminish</span> abbrev-mode
  <span style="color: #e5786d;">:diminish</span> auto-fill-function <span style="color: #99968b;">;; </span><span style="color: #99968b;">wtf?!</span>
  <span style="color: #e5786d;">:diminish</span> eldoc-mode
  <span style="color: #e5786d;">:diminish</span> hs-minor-mode
  <span style="color: #e5786d;">:diminish</span> highlight-changes-mode
  <span style="color: #e5786d;">:diminish</span> my/key-mode
  <span style="color: #e5786d;">:diminish</span> org-indent-mode
  <span style="color: #e5786d;">:diminish</span> org-src-mode
  <span style="color: #e5786d;">:diminish</span> subword-mode
  <span style="color: #e5786d;">:hook</span>
  (org-indent-mode . (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> () (diminish 'org-indent-mode)))
  (hs-minor-mode . (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> () (diminish 'hs-minor-mode))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-7" class="outline-3">
<h3 id="sec-17-7"><span class="section-number-3">17.7</span> Docker</h3>
<div class="outline-text-3" id="text-17-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">docker</span>
  <span style="color: #e5786d;">:bind</span> (<span style="color: #95e454;">"C-c C-d"</span> . docker))

(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">dockerfile-mode</span> <span style="color: #e5786d;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-8" class="outline-3">
<h3 id="sec-17-8"><span class="section-number-3">17.8</span> Exec path from shell</h3>
<div class="outline-text-3" id="text-17-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">exec-path-from-shell</span> <span style="color: #e5786d;">:defer</span> 10
  <span style="color: #e5786d;">:if</span> (not (eq system-type 'windows-nt))
  <span style="color: #e5786d;">:commands</span> exec-path-from-shell-initialize
  <span style="color: #e5786d;">:init</span>
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> exec-path-from-shell-check-startup-files 'nil)
  <span style="color: #e5786d;">:config</span>
  (exec-path-from-shell-initialize)
  (exec-path-from-shell-copy-env <span style="color: #95e454;">"PYTHONPATH"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-9" class="outline-3">
<h3 id="sec-17-9"><span class="section-number-3">17.9</span> Flycheck</h3>
<div class="outline-text-3" id="text-17-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">flycheck</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:diminish</span> flycheck-mode
  <span style="color: #e5786d;">:hook</span> (prog-mode . flycheck-mode)
  <span style="color: #e5786d;">:config</span> (flycheck-add-mode 'javascript-eslint 'web-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-17-10" class="outline-3">
<h3 id="sec-17-10"><span class="section-number-3">17.10</span> Git</h3>
<div class="outline-text-3" id="text-17-10">
</div><div id="outline-container-sec-17-10-1" class="outline-4">
<h4 id="sec-17-10-1"><span class="section-number-4">17.10.1</span> Git Timemachine</h4>
<div class="outline-text-4" id="text-17-10-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">git-timemachine</span> <span style="color: #e5786d;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-10-2" class="outline-4">
<h4 id="sec-17-10-2"><span class="section-number-4">17.10.2</span> Gitlab CI</h4>
<div class="outline-text-4" id="text-17-10-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">gitlab-ci-mode</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:mode</span>
  <span style="color: #95e454;">"\\.gitlab-ci.yaml\\'"</span>
  <span style="color: #95e454;">"\\.gitlab-ci.yml\\'"</span>
  <span style="color: #e5786d;">:hook</span>
  (yaml-mode . hs-minor-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-10-3" class="outline-4">
<h4 id="sec-17-10-3"><span class="section-number-4">17.10.3</span> Lazygit</h4>
<div class="outline-text-4" id="text-17-10-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">lazygitlab</span> <span style="color: #e5786d;">:ensure</span> nil
  <span style="color: #e5786d;">:if</span> (file-directory-p (expand-file-name <span style="color: #95e454;">"~/src/gitlab/tspub/lisp/lazygit"</span>))
  <span style="color: #e5786d;">:load-path</span> (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> () (expand-file-name <span style="color: #95e454;">"~/src/gitlab/tspub/lisp/lazygit"</span>))
  <span style="color: #e5786d;">:bind</span>
  (<span style="color: #95e454;">"C-c g l a"</span> . lazygitlab-clone-or-pull-all)
  (<span style="color: #95e454;">"C-c g l c"</span> . lazygitlab-clone-or-pull-project)
  (<span style="color: #95e454;">"C-c g l g"</span> . lazygitlab-clone-or-pull-group)
  (<span style="color: #95e454;">"C-c g l r"</span> . lazygitlab-retriever)
  <span style="color: #e5786d;">:config</span>
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> lazygit-token-file (expand-file-name <span style="color: #95e454;">"~/.lazygit.el"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">defalias</span> '<span style="color: #cae682;">gl/api</span> 'lazygitlab-retriever)
  (<span style="color: #8ac6f2; font-weight: bold;">defalias</span> '<span style="color: #cae682;">gl/all</span> 'lazygitlab-clone-or-pull-all)
  (<span style="color: #8ac6f2; font-weight: bold;">defalias</span> '<span style="color: #cae682;">gl/grp</span> 'lazygitlab-clone-or-pull-group)
  (<span style="color: #8ac6f2; font-weight: bold;">defalias</span> '<span style="color: #cae682;">gl/repo</span> 'lazygitlab-clone-or-pull-project))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">lazygithub</span> <span style="color: #e5786d;">:ensure</span> nil
  <span style="color: #e5786d;">:if</span> (file-directory-p (expand-file-name <span style="color: #95e454;">"~/src/gitlab/tspub/lisp/lazygit"</span>))
  <span style="color: #e5786d;">:load-path</span> (<span style="color: #8ac6f2; font-weight: bold;">lambda</span> () (expand-file-name <span style="color: #95e454;">"~/src/gitlab/tspub/lisp/lazygit"</span>))
  <span style="color: #e5786d;">:bind</span>
  (<span style="color: #95e454;">"C-c g h a"</span> . lazygithub-clone-or-pull-all)
  (<span style="color: #95e454;">"C-c g h c"</span> . lazygithub-clone-or-pull-repo)
  (<span style="color: #95e454;">"C-c g h r"</span> . lazygithub-retriever)
  <span style="color: #e5786d;">:config</span>
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> lazygit-token-file (expand-file-name <span style="color: #95e454;">"~/.lazygit.el"</span>))
  (<span style="color: #8ac6f2; font-weight: bold;">defalias</span> '<span style="color: #cae682;">gh/api</span> 'lazygithub-retriever)
  (<span style="color: #8ac6f2; font-weight: bold;">defalias</span> '<span style="color: #cae682;">gh/all</span> 'lazygithub-clone-or-pull-all)
  (<span style="color: #8ac6f2; font-weight: bold;">defalias</span> '<span style="color: #cae682;">gh/repo</span> 'lazygithub-clone-or-pull-repo))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-10-4" class="outline-4">
<h4 id="sec-17-10-4"><span class="section-number-4">17.10.4</span> Magit</h4>
<div class="outline-text-4" id="text-17-10-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">magit</span>
  <span style="color: #e5786d;">:bind*</span>
  (<span style="color: #95e454;">"C-x g"</span> . magit-status)
  <span style="color: #e5786d;">:config</span>
  (<span style="color: #8ac6f2; font-weight: bold;">when</span> (eq system-type 'windows-nt)
    (<span style="color: #8ac6f2; font-weight: bold;">if</span> (file-readable-p <span style="color: #95e454;">"C:/Program Files/Git/bin/git.exe"</span>)
        (<span style="color: #8ac6f2; font-weight: bold;">setq</span> magit-git-executable <span style="color: #95e454;">"C:/Program Files/Git/bin/git.exe"</span>))
    (<span style="color: #8ac6f2; font-weight: bold;">when</span> (file-directory-p <span style="color: #95e454;">"C:/Program Files/Git/bin"</span>)
      (<span style="color: #8ac6f2; font-weight: bold;">setq</span> exec-path (add-to-list 'exec-path <span style="color: #95e454;">"C:/Program Files/Git/bin"</span>))
      (setenv <span style="color: #95e454;">"PATH"</span> (concat <span style="color: #95e454;">"C:\\Program Files\\Git\\bin;"</span> (getenv <span style="color: #95e454;">"PATH"</span>)))))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> magit-clone-set-remote.pushDefault t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> magit-completing-read-function 'magit-builtin-completing-read))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">magit-repos</span> <span style="color: #e5786d;">:ensure</span> nil
  <span style="color: #e5786d;">:bind*</span> (<span style="color: #95e454;">"C-x C-g"</span> . magit-list-repositories)
  <span style="color: #e5786d;">:config</span>
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> magit-repository-directories `((<span style="color: #95e454;">"~/"</span> . 0)
                                       (<span style="color: #95e454;">"~/src/gitlab"</span> . 10)))
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> magit-repolist-columns
        '((<span style="color: #95e454;">"Name"</span> 25 magit-repolist-column-ident)
          <span style="color: #99968b;">;; </span><span style="color: #99968b;">("Version" 25 magit-repolist-column-version)</span>
          (<span style="color: #95e454;">"Pull"</span> 5 magit-repolist-column-unpulled-from-upstream)
          (<span style="color: #95e454;">"Push"</span> 5 magit-repolist-column-unpushed-to-upstream)
          (<span style="color: #95e454;">"Commit"</span> 8 magit-repolist-column-flag t)
          (<span style="color: #95e454;">"Path"</span> 99 magit-repolist-column-path))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-17-11" class="outline-3">
<h3 id="sec-17-11"><span class="section-number-3">17.11</span> Go mode</h3>
<div class="outline-text-3" id="text-17-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">go-mode</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:config</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/go-indent</span> ()
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> indent-tabs-mode 1)
    (<span style="color: #8ac6f2; font-weight: bold;">setq</span> tab-width 2))
  <span style="color: #e5786d;">:hook</span> (go-mode . my/go-indent))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-12" class="outline-3">
<h3 id="sec-17-12"><span class="section-number-3">17.12</span> Hungry delete</h3>
<div class="outline-text-3" id="text-17-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">hungry-delete</span> <span style="color: #e5786d;">:defer</span> 6
  <span style="color: #e5786d;">:diminish</span> hungry-delete-mode
  <span style="color: #e5786d;">:config</span> (global-hungry-delete-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-13" class="outline-3">
<h3 id="sec-17-13"><span class="section-number-3">17.13</span> JS2 mode</h3>
<div class="outline-text-3" id="text-17-13">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">js2-mode</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:hook</span>
  (js-mode . js2-minor-mode)
  (js2-mode . js2-imenu-extras-mode)
  <span style="color: #e5786d;">:mode</span>
  <span style="color: #95e454;">"\\.js\\'"</span>)

(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">js2-refactor</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:hook</span> (js2-mode . js2-refactor-mode)
  <span style="color: #e5786d;">:bind</span> (<span style="color: #e5786d;">:map</span> js2-mode-map
              (<span style="color: #95e454;">"C-k"</span> . js2r-kill))
  <span style="color: #e5786d;">:config</span> (js2r-add-keybindings-with-prefix <span style="color: #95e454;">"C-c C-j"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-14" class="outline-3">
<h3 id="sec-17-14"><span class="section-number-3">17.14</span> JSON</h3>
<div class="outline-text-3" id="text-17-14">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">json-mode</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:config</span>
  (<span style="color: #8ac6f2; font-weight: bold;">defun</span> <span style="color: #cae682;">my/json-mode-setup</span> ()
    (json-mode)
    (json-pretty-print (point-min) (point-max))
    (goto-char (point-min))
    (set-buffer-modified-p nil))
  (add-to-list 'auto-mode-alist
               '(<span style="color: #95e454;">"\\.json\\'"</span> . 'my/json-mode-setup)))

(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">json-navigator</span> <span style="color: #e5786d;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-15" class="outline-3">
<h3 id="sec-17-15"><span class="section-number-3">17.15</span> Markdown</h3>
<div class="outline-text-3" id="text-17-15">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">markdown-mode</span>
  <span style="color: #e5786d;">:commands</span> (markdown-mode gfm-mode)
  <span style="color: #e5786d;">:mode</span> ((<span style="color: #95e454;">"README\\.md\\'"</span> . gfm-mode)
         (<span style="color: #95e454;">"\\.md\\'"</span> . gfm-mode)
         (<span style="color: #95e454;">"\\.markdown\\'"</span> . gfm-mode))
  <span style="color: #e5786d;">:init</span> (<span style="color: #8ac6f2; font-weight: bold;">setq</span> markdown-command <span style="color: #95e454;">"multimarkdown"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-16" class="outline-3">
<h3 id="sec-17-16"><span class="section-number-3">17.16</span> Node JS</h3>
<div class="outline-text-3" id="text-17-16">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">nodejs-repl</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:bind</span>
  (<span style="color: #e5786d;">:map</span> js2-mode-map
        (<span style="color: #95e454;">"C-x C-e"</span> . nodejs-repl-send-last-expression)
        (<span style="color: #95e454;">"C-c C-j"</span> . nodejs-repl-send-line)
        (<span style="color: #95e454;">"C-c SPC"</span> . nodejs-repl-send-region)
        (<span style="color: #95e454;">"C-c C-b"</span> . nodejs-repl-send-buffer)
        (<span style="color: #95e454;">"C-c C-f"</span> . nodejs-repl-load-file)
        (<span style="color: #95e454;">"C-c C-z"</span> . nodejs-repl-switch-to-repl)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-17" class="outline-3">
<h3 id="sec-17-17"><span class="section-number-3">17.17</span> Org</h3>
<div class="outline-text-3" id="text-17-17">
</div><div id="outline-container-sec-17-17-1" class="outline-4">
<h4 id="sec-17-17-1"><span class="section-number-4">17.17.1</span> Org Bullets</h4>
<div class="outline-text-4" id="text-17-17-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">org-bullets</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:hook</span> (org-mode . org-bullets-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-17-2" class="outline-4">
<h4 id="sec-17-17-2"><span class="section-number-4">17.17.2</span> HTMLize</h4>
<div class="outline-text-4" id="text-17-17-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">htmlize</span> <span style="color: #e5786d;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-17-3" class="outline-4">
<h4 id="sec-17-17-3"><span class="section-number-4">17.17.3</span> Toc Org</h4>
<div class="outline-text-4" id="text-17-17-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">toc-org</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:hook</span> (org-mode . toc-org-enable))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-17-4" class="outline-4">
<h4 id="sec-17-17-4"><span class="section-number-4">17.17.4</span> PDF Tools</h4>
<div class="outline-text-4" id="text-17-17-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">pdf-tools</span> <span style="color: #e5786d;">:defer</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-17-18" class="outline-3">
<h3 id="sec-17-18"><span class="section-number-3">17.18</span> Powershell</h3>
<div class="outline-text-3" id="text-17-18">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">powershell</span>
  <span style="color: #e5786d;">:mode</span> ((<span style="color: #95e454;">"\\.ps1\\'"</span> . powershell-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-19" class="outline-3">
<h3 id="sec-17-19"><span class="section-number-3">17.19</span> Powerline</h3>
<div class="outline-text-3" id="text-17-19">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">powerline</span> <span style="color: #e5786d;">:defer</span> 4
  <span style="color: #e5786d;">:config</span>
  (<span style="color: #8ac6f2; font-weight: bold;">if</span> window-system <span style="color: #99968b;">; </span><span style="color: #99968b;">use-package if doesn't work for emacsclient</span>
      (powerline-default-theme)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-20" class="outline-3">
<h3 id="sec-17-20"><span class="section-number-3">17.20</span> Projectile</h3>
<div class="outline-text-3" id="text-17-20">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">projectile</span> <span style="color: #e5786d;">:diminish</span> projectile-mode
  <span style="color: #e5786d;">:bind-keymap</span>
  (<span style="color: #95e454;">"C-c p"</span> . projectile-command-map)
  <span style="color: #e5786d;">:config</span>
  (projectile-mode)
  <span style="color: #99968b;">;; </span><span style="color: #99968b;">(setq projectile-completion-system 'ivy)</span>
  (<span style="color: #8ac6f2; font-weight: bold;">when</span> (<span style="color: #8ac6f2; font-weight: bold;">require</span> '<span style="color: #e5786d;">magit</span> nil t)
    (mapc #'projectile-add-known-project
          (mapcar #'file-name-as-directory (magit-list-repos)))
    <span style="color: #99968b;">;; </span><span style="color: #99968b;">Optionally write to persistent `</span><span style="color: #e5786d;">projectile-known-projects-file</span><span style="color: #99968b;">'</span>
    (projectile-save-known-projects)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-21" class="outline-3">
<h3 id="sec-17-21"><span class="section-number-3">17.21</span> RESTClient</h3>
<div class="outline-text-3" id="text-17-21">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">restclient</span> <span style="color: #e5786d;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-22" class="outline-3">
<h3 id="sec-17-22"><span class="section-number-3">17.22</span> systemd</h3>
<div class="outline-text-3" id="text-17-22">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">systemd</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:if</span> (not (equal system-type 'windows-nt)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-23" class="outline-3">
<h3 id="sec-17-23"><span class="section-number-3">17.23</span> Terraform</h3>
<div class="outline-text-3" id="text-17-23">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">terraform-mode</span> <span style="color: #e5786d;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-24" class="outline-3">
<h3 id="sec-17-24"><span class="section-number-3">17.24</span> Web Mode</h3>
<div class="outline-text-3" id="text-17-24">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">web-mode</span>
  <span style="color: #e5786d;">:mode</span>
  <span style="color: #95e454;">"\\.phtml\\'"</span>
  <span style="color: #95e454;">"\\.tpl\\.php\\'"</span>
  <span style="color: #95e454;">"\\.[agj]sp\\'"</span>
  <span style="color: #95e454;">"\\.as[cp]x\\'"</span>
  <span style="color: #95e454;">"\\.erb\\'"</span>
  <span style="color: #95e454;">"\\.mustache\\'"</span>
  <span style="color: #95e454;">"\\.djhtml\\'"</span>
  <span style="color: #95e454;">"\\.html\\.twig\\'"</span>
  <span style="color: #95e454;">"\\.html?\\'"</span>
  <span style="color: #95e454;">"\\.php?\\'"</span>
  <span style="color: #95e454;">"\\.css?\\'"</span>
  <span style="color: #e5786d;">:hook</span>
  (web-mode . js2-minor-mode)
  <span style="color: #e5786d;">:config</span>
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-content-type <span style="color: #95e454;">"jsx"</span>)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-enable-auto-quoting nil)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-code-indent-offset 2)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-markup-indent-offset 2)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-attr-indent-offset 2)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-css-indent-offset 2)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-code-indent-offset 2)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-enable-auto-pairing t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-enable-css-colorization t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-enable-block-face t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-enable-part-face t)
  (<span style="color: #8ac6f2; font-weight: bold;">setq</span> web-mode-enable-comment-keywords t)
  (add-to-list 'web-mode-indentation-params '(<span style="color: #95e454;">"lineup-args"</span> . nil))
  (add-to-list 'web-mode-indentation-params '(<span style="color: #95e454;">"lineup-calls"</span> . nil))
  (add-to-list 'web-mode-indentation-params '(<span style="color: #95e454;">"lineup-concats"</span> . nil))
  (add-to-list 'web-mode-indentation-params '(<span style="color: #95e454;">"lineup-ternary"</span> . nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-25" class="outline-3">
<h3 id="sec-17-25"><span class="section-number-3">17.25</span> Writeable Grep</h3>
<div class="outline-text-3" id="text-17-25">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">wgrep</span> <span style="color: #e5786d;">:defer</span> <span style="color: #e5786d;">:commands</span> wgrep
  <span style="color: #e5786d;">:bind</span> (<span style="color: #e5786d;">:map</span> grep-mode-map
              (<span style="color: #95e454;">"e"</span> . wgrep-change-to-wgrep-mode)
              (<span style="color: #95e454;">"C-x C-q"</span> . wgrep-change-to-wgrep-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-26" class="outline-3">
<h3 id="sec-17-26"><span class="section-number-3">17.26</span> Which Key</h3>
<div class="outline-text-3" id="text-17-26">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">which-key</span> <span style="color: #e5786d;">:defer</span> 5
  <span style="color: #e5786d;">:diminish</span> which-key-mode
  <span style="color: #e5786d;">:config</span>
  (which-key-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-27" class="outline-3">
<h3 id="sec-17-27"><span class="section-number-3">17.27</span> YAML</h3>
<div class="outline-text-3" id="text-17-27">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">yaml-mode</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:hook</span>
  (yaml-mode . hs-minor-mode)
  (yaml-mode . display-line-numbers-mode)
  <span style="color: #e5786d;">:config</span>
  (remove-hook 'before-save-hook 'my/indent-buffer))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-28" class="outline-3">
<h3 id="sec-17-28"><span class="section-number-3">17.28</span> Yasnippet</h3>
<div class="outline-text-3" id="text-17-28">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">yasnippet</span> <span style="color: #e5786d;">:defer</span>
  <span style="color: #e5786d;">:diminish</span> yas-minor-mode
  <span style="color: #e5786d;">:hook</span> (prog-mode . yas-minor-mode))
</pre>
</div>
</div>

<div id="outline-container-sec-17-28-1" class="outline-4">
<h4 id="sec-17-28-1"><span class="section-number-4">17.28.1</span> Snippets</h4>
<div class="outline-text-4" id="text-17-28-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">yasnippet-snippets</span> <span style="color: #e5786d;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-28-2" class="outline-4">
<h4 id="sec-17-28-2"><span class="section-number-4">17.28.2</span> Classic snippets</h4>
<div class="outline-text-4" id="text-17-28-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8ac6f2; font-weight: bold;">use-package</span> <span style="color: #e5786d;">yasnippet-classic-snippets</span> <span style="color: #e5786d;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-17-28-3" class="outline-4">
<h4 id="sec-17-28-3"><span class="section-number-4">17.28.3</span> Custom Yasnippet snippets</h4>
<div class="outline-text-4" id="text-17-28-3">
</div><ol class="org-ol"><li><a id="sec-17-28-3-1" name="sec-17-28-3-1"></a>Emacs Lisp snippets<br ><ol class="org-ol"><li><a id="sec-17-28-3-1-1" name="sec-17-28-3-1-1"></a>Standard elisp boilerplate<br ><div class="outline-text-6" id="text-17-28-3-1-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"># -*- mode: snippet -*-
# name: boilerplate
# key: bp
# --
<span style="color: #99968b;">;;; </span><span style="color: #99968b;">`(file-name-nondirectory (buffer-file-name))` --- ${1:summary} -*- lexical-binding: t; -*-</span>

<span style="color: #99968b;">;;; </span><span style="color: #99968b;">Commentary:</span>

<span style="color: #99968b;">;; </span><span style="color: #99968b;">${2:commentary}</span>

<span style="color: #99968b;">;; </span><span style="color: #99968b;">Copyright (C) `(format-time-string "%Y")` `user-full-name`</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">Author: `user-full-name` &lt;`user-mail-address`&gt;</span>

<span style="color: #99968b;">;;; </span><span style="color: #99968b;">Code:</span>
$0
(<span style="color: #8ac6f2; font-weight: bold;">provide</span> <span style="color: #e5786d;">\'</span>`(file-name-sans-extension (file-name-nondirectory (buffer-file-name)))`)
<span style="color: #99968b;">;; </span><span style="color: #99968b;">Local Variables&#58;</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">indent-tabs-mode: nil</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">byte-compile-warnings: (not free-vars noruntime)</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">End:</span>
<span style="color: #99968b;">;;; </span><span style="color: #99968b;">`(file-name-nondirectory (buffer-file-name))` ends here</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-17-28-3-1-2" name="sec-17-28-3-1-2"></a>Package elisp boilerplate<br ><div class="outline-text-6" id="text-17-28-3-1-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"># -*- mode: snippet -*-
# name: boilerplate-package
# key: bpp
# --
<span style="color: #99968b;">;;; </span><span style="color: #99968b;">`(file-name-nondirectory (buffer-file-name))` --- ${1:summary} -*- lexical-binding: t; -*-</span>

<span style="color: #99968b;">;;; </span><span style="color: #99968b;">Commentary:</span>

<span style="color: #99968b;">;; </span><span style="color: #99968b;">${2:commentary}</span>

<span style="color: #99968b;">;; </span><span style="color: #99968b;">Copyright (C) `(format-time-string "%Y")` `user-full-name`</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">Author: `user-full-name` `user-mail-address`</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">Version: 0.0.1</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">Package-Requires: ${3:depandancies}</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">URL: https://github.com/tslight/${4:repo}</span>

<span style="color: #99968b;">;;; </span><span style="color: #99968b;">Code:</span>
$0
(<span style="color: #8ac6f2; font-weight: bold;">provide</span> <span style="color: #e5786d;">\'</span>`(file-name-sans-extension (file-name-nondirectory (buffer-file-name)))`)
<span style="color: #99968b;">;; </span><span style="color: #99968b;">Local Variables&#58;</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">indent-tabs-mode: nil</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">byte-compile-warnings: (not free-vars noruntime)</span>
<span style="color: #99968b;">;; </span><span style="color: #99968b;">End:</span>
<span style="color: #99968b;">;;; </span><span style="color: #99968b;">`(file-name-nondirectory (buffer-file-name))` ends here</span>
</pre>
</div>
</div>
</li></ol>
</li></ol>
</div>
</div>
</div>
</div></div></div>
<footer id="postamble" class="">
<div><p class="author">Author: Toby Slight</p>
<p class="date">Created: 2020-12-24 Thu 05:15</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.1 (<a href="http://orgmode.org">Org-mode</a> 9.3)</p>
</div>
</footer>
</body>
</html>
