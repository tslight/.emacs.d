<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-12-29 Tue 14:00 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs Configuration</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Toby Slight" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">Emacs Configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org11b9486">1. Doom startup speed hacks</a>
<ul>
<li><a href="#org88c2b50">1.1. Lexical Binding</a></li>
<li><a href="#orgb53f5e4">1.2. Avoid garbage collection at startup</a></li>
<li><a href="#orgaeb6dd9">1.3. Unset file-name-handler-alist temporarily</a></li>
</ul>
</li>
<li><a href="#org08f1c87">2. General Settings</a>
<ul>
<li><a href="#org745b3c8">2.1. Auto-save</a></li>
<li><a href="#org48e4d4b">2.2. Backups</a></li>
<li><a href="#org41f1c3d">2.3. Bell</a></li>
<li><a href="#orgb388314">2.4. Clipboard</a></li>
<li><a href="#org4a30405">2.5. Text filling</a></li>
<li><a href="#orgc26d3b4">2.6. Delete all on backspace</a></li>
<li><a href="#org38cea61">2.7. Emacsclient executable</a></li>
<li><a href="#org8e5b41e">2.8. No lockfiles</a></li>
<li><a href="#org9a659ed">2.9. Final newline</a></li>
<li><a href="#org780f587">2.10. Pop mark on repeat</a></li>
<li><a href="#org517e778">2.11. Encryption</a></li>
<li><a href="#orgdd7bd52">2.12. History</a></li>
<li><a href="#org210a443">2.13. Bookmarks</a></li>
<li><a href="#org6d4065f">2.14. Customize settings file</a></li>
<li><a href="#orgffc775e">2.15. Enable all advanced features</a></li>
<li><a href="#orgc29a6bd">2.16. Increase message logging max</a></li>
<li><a href="#orga71c4f4">2.17. More extensive apropos</a></li>
<li><a href="#org23627dc">2.18. Mouse yank at point</a></li>
<li><a href="#org8714f22">2.19. Scrolling</a></li>
<li><a href="#orgae5b2ba">2.20. Initial startup</a></li>
<li><a href="#orgdfa50b7">2.21. Undo limits</a></li>
<li><a href="#org33c4b29">2.22. Uniquify</a></li>
<li><a href="#org0fccd5d">2.23. User info</a></li>
<li><a href="#org3bc18e8">2.24. Windows</a></li>
<li><a href="#orgd62dfbf">2.25. Yes or no</a></li>
</ul>
</li>
<li><a href="#orgbb127ee">3. Code Style</a></li>
<li><a href="#orgfa2fa90">4. File Encoding</a></li>
<li><a href="#orge2d4933">5. Hooks</a></li>
<li><a href="#org30f087c">6. Keybindings</a>
<ul>
<li><a href="#org76d12f1">6.1. Calculator/Calc bindings</a></li>
<li><a href="#org3f2468e">6.2. Buffers</a></li>
<li><a href="#orgc555ccf">6.3. Desktop read/save</a></li>
<li><a href="#org3a3eccd">6.4. Editing</a></li>
<li><a href="#org4db845a">6.5. Frames</a></li>
<li><a href="#org02cd80f">6.6. Grep</a></li>
<li><a href="#org6369cae">6.7. Menubar</a></li>
<li><a href="#org394692d">6.8. Special mode</a></li>
<li><a href="#orgeddf0d2">6.9. Toggle filling</a></li>
<li><a href="#orgc0b71bf">6.10. Tabs (Emacs 27+)</a></li>
</ul>
</li>
<li><a href="#orge4a49af">7. Registers</a></li>
<li><a href="#orgca7aae9">8. Theme/UI</a></li>
<li><a href="#orgbd54fe3">9. Buffer functions</a>
<ul>
<li><a href="#orga23553c">9.1. Indent Buffer</a></li>
<li><a href="#orgcb988ba">9.2. Kill this buffer</a></li>
<li><a href="#org827bbec">9.3. Last buffer</a></li>
<li><a href="#org3d7cfb0">9.4. Narrow DWIM</a></li>
<li><a href="#org2e709a6">9.5. Nuke buffers</a></li>
<li><a href="#org7bc3025">9.6. Remove stuff from a buffer</a></li>
<li><a href="#org6243616">9.7. Save buffers silently</a></li>
<li><a href="#orgeac7a6b">9.8. Toggle maximize buffer</a></li>
</ul>
</li>
<li><a href="#org99b008b">10. Complilation related</a>
<ul>
<li><a href="#org4a32c36">10.1. Prefer newer over compiled</a></li>
<li><a href="#org7240512">10.2. Place point after complilation error</a></li>
<li><a href="#orgdc06844">10.3. Ensure init files are byte compiled</a></li>
<li><a href="#org8efc75e">10.4. Recompile config</a></li>
<li><a href="#org8cdfb56">10.5. Make compilation buffers more colorful</a></li>
</ul>
</li>
<li><a href="#org0055edc">11. Editing functions</a>
<ul>
<li><a href="#org3255bcf">11.1. Aligning symbols</a></li>
<li><a href="#orge4b3b17">11.2. Change numbers</a></li>
<li><a href="#orgcf065e7">11.3. Delete inside delimiters</a></li>
<li><a href="#org00776f4">11.4. Generate a numbered list</a></li>
<li><a href="#org1bbca0d">11.5. Moving lines</a></li>
<li><a href="#orgd98e281">11.6. Smarter that the default functions</a>
<ul>
<li><a href="#orgc6712b0">11.6.1. Fill or unfill</a></li>
<li><a href="#org1d2ba73">11.6.2. Beginning of line</a></li>
<li><a href="#org8ca5c72">11.6.3. Kill ring save</a></li>
<li><a href="#orgcc42a0c">11.6.4. Kill region</a></li>
</ul>
</li>
<li><a href="#org1876e85">11.7. Case insensitive sort-lines</a></li>
<li><a href="#orgcfb94fb">11.8. Surround stuff</a></li>
<li><a href="#org8ca5e45">11.9. Untabify a buffer</a></li>
<li><a href="#orge56f031">11.10. XML pretty print</a></li>
<li><a href="#org3d21769">11.11. Yank pop forwards (Emacs&lt;28)</a></li>
</ul>
</li>
<li><a href="#org31d523b">12. File manipulation functions</a>
<ul>
<li><a href="#org4609eeb">12.1. Delete this file</a></li>
<li><a href="#org2203c33">12.2. Yank current file name to kill ring</a></li>
<li><a href="#org78aac18">12.3. Make backup of current file</a></li>
<li><a href="#org0cef3c1">12.4. Rename file and buffer</a></li>
<li><a href="#orgec76440">12.5. Open current file as root</a></li>
</ul>
</li>
<li><a href="#org0195be5">13. Miscellaneous functions</a></li>
<li><a href="#org1146887">14. Window manipulation functions</a>
<ul>
<li><a href="#orgd941e6d">14.1. Better scrolling of other windows</a></li>
<li><a href="#org39d0c9f">14.2. Kill buffer other window</a></li>
<li><a href="#orgbea548c">14.3. Toggle focus to last window</a></li>
<li><a href="#org6dd904a">14.4. Open a buffer in another window</a></li>
<li><a href="#orgf1c4831">14.5. Switch to the previous window</a></li>
<li><a href="#orge74f649">14.6. Scroll lines up like Ctrl-e in Vim</a></li>
<li><a href="#org2d89418">14.7. Scroll lines down like Ctrl-y in Vim</a></li>
<li><a href="#org0cda3a0">14.8. Open last buffer in horizontal split</a></li>
<li><a href="#org1dec806">14.9. Open last buffer in vertical split</a></li>
<li><a href="#orgb55b80d">14.10. Toggle vertical -&gt; horizontal splits</a></li>
<li><a href="#orgf8e047e">14.11. Transpose windows</a></li>
<li><a href="#org61ad0a1">14.12. Windmove keybindings</a></li>
<li><a href="#org9cf2697">14.13. Winner mode</a></li>
</ul>
</li>
<li><a href="#org9f568ed">15. Emacs built in packages</a>
<ul>
<li><a href="#org3db2437">15.1. Auto-revert</a></li>
<li><a href="#org3a031d1">15.2. Dabbrev</a></li>
<li><a href="#orgc4fb0ae">15.3. Dired</a>
<ul>
<li><a href="#orga7da91c">15.3.1. Dired-X Jump (Emacs&lt;28)</a></li>
<li><a href="#org3afbf47">15.3.2. Dired AUX</a></li>
<li><a href="#org5c45296">15.3.3. Find Dired</a></li>
<li><a href="#orgccc4cb3">15.3.4. Writeable Dired</a></li>
</ul>
</li>
<li><a href="#orga733563">15.4. Doc View</a></li>
<li><a href="#org1726200">15.5. Ediff</a></li>
<li><a href="#orgee24b47">15.6. Electric</a></li>
<li><a href="#org98a38a3">15.7. ERC</a></li>
<li><a href="#org43369c5">15.8. Eshell</a></li>
<li><a href="#orge19d6f8">15.9. Gnus</a></li>
<li><a href="#org116ce8d">15.10. Highlight changes</a></li>
<li><a href="#orgedb48bd">15.11. Hippie Expand</a></li>
<li><a href="#orgf77f530">15.12. Icomplete</a>
<ul>
<li><a href="#org05f6715">15.12.1. Change completion styles</a></li>
<li><a href="#orgff3ebfa">15.12.2. Icomplete settings</a></li>
<li><a href="#org239c6cf">15.12.3. Icomplete keybindings</a></li>
</ul>
</li>
<li><a href="#org22b059b">15.13. Imenu</a></li>
<li><a href="#orgf09e695">15.14. Isearch</a>
<ul>
<li><a href="#orgd0031df">15.14.1. Isearch exit</a></li>
<li><a href="#orgcab872a">15.14.2. Isearch Abort DWIM</a></li>
<li><a href="#org282a595">15.14.3. Copy to isearch</a></li>
<li><a href="#orgdbdbe1b">15.14.4. Kill to isearch</a></li>
<li><a href="#orgf785e65">15.14.5. Emacs 27+ Settings</a></li>
<li><a href="#org7b2fcfd">15.14.6. Settings</a></li>
<li><a href="#org3617f80">15.14.7. Keybindings</a></li>
</ul>
</li>
<li><a href="#org6cdfec8">15.15. Minibuffer</a>
<ul>
<li><a href="#orgc1c4391">15.15.1. Save history mode</a></li>
<li><a href="#orgb31b317">15.15.2. Completion framework settings</a></li>
<li><a href="#orge3db5e7">15.15.3. Misc Minibuffer settings</a></li>
</ul>
</li>
<li><a href="#orgd6470c6">15.16. Occur</a></li>
<li><a href="#orgd7349c2">15.17. Org</a>
<ul>
<li><a href="#orgd53223e">15.17.1. Org global bindings</a></li>
</ul>
</li>
<li><a href="#org75b4c88">15.18. Pending delete</a></li>
<li><a href="#orgff39048">15.19. Prettify Symbols</a></li>
<li><a href="#orgf5ad9b7">15.20. Project</a></li>
<li><a href="#orgbf964e4">15.21. Recentf</a></li>
<li><a href="#orga996edd">15.22. Show paren</a></li>
<li><a href="#org35c5ea4">15.23. Saveplace</a></li>
<li><a href="#orgf0123f9">15.24. Shell script</a></li>
<li><a href="#org1ab79f7">15.25. Subword</a></li>
<li><a href="#orgeece7d9">15.26. Term</a>
<ul>
<li><a href="#org89f2e49">15.26.1. ANSI Term launcher</a></li>
<li><a href="#orga43f755">15.26.2. Switch to ANSI Term</a></li>
<li><a href="#org45a457d">15.26.3. Term Advise</a></li>
<li><a href="#orgc7c90f7">15.26.4. Set term coding system to UTF-8</a></li>
</ul>
</li>
<li><a href="#org3c7dabe">15.27. Tramp</a></li>
<li><a href="#orgfcfc2b9">15.28. Version Control</a></li>
<li><a href="#orgbfb7f5b">15.29. Whitespace</a></li>
</ul>
</li>
<li><a href="#org3980a6c">16. My custom packages</a>
<ul>
<li><a href="#org3c12445">16.1. Lazygit</a></li>
<li><a href="#org187a923">16.2. Dired Peep</a></li>
</ul>
</li>
<li><a href="#org595fd53">17. Third party packages</a>
<ul>
<li><a href="#orgfef97c2">17.1. Setup up package.el</a></li>
<li><a href="#org7af2eea">17.2. use-package bootstrap</a></li>
<li><a href="#org97a8801">17.3. Ansible</a></li>
<li><a href="#org0463e30">17.4. Async</a></li>
<li><a href="#orga1fc6ae">17.5. Blacken</a></li>
<li><a href="#orgea49bbe">17.6. Default text scaling</a></li>
<li><a href="#orgb905a07">17.7. Diminish</a></li>
<li><a href="#orgb047f0f">17.8. Docker</a></li>
<li><a href="#org1ea6546">17.9. Exec path from shell</a></li>
<li><a href="#orgd404c0e">17.10. Flycheck</a></li>
<li><a href="#orge66d0f3">17.11. Git</a>
<ul>
<li><a href="#orgd3d15f4">17.11.1. Git Timemachine</a></li>
<li><a href="#org5e03c6b">17.11.2. Gitlab CI</a></li>
<li><a href="#org28c8ccd">17.11.3. Magit</a></li>
</ul>
</li>
<li><a href="#orgaafc391">17.12. Go mode</a></li>
<li><a href="#orgf58512a">17.13. Hungry delete</a></li>
<li><a href="#orga9cc612">17.14. JS2 mode</a></li>
<li><a href="#orgef83539">17.15. JSON</a></li>
<li><a href="#orgf02260e">17.16. Markdown</a></li>
<li><a href="#orgc5b2142">17.17. Node JS</a></li>
<li><a href="#orgbc44ce3">17.18. Org</a>
<ul>
<li><a href="#org682e5b1">17.18.1. Org Bullets</a></li>
<li><a href="#orgf53624d">17.18.2. HTMLize</a></li>
<li><a href="#org15fe29c">17.18.3. Toc Org</a></li>
<li><a href="#orgcda140e">17.18.4. PDF Tools</a></li>
</ul>
</li>
<li><a href="#orgb4ed162">17.19. Powershell</a></li>
<li><a href="#org0cbf365">17.20. Projectile</a></li>
<li><a href="#orgf15441c">17.21. Restclient</a></li>
<li><a href="#orga8a9264">17.22. systemd</a></li>
<li><a href="#org7e77d17">17.23. Terraform</a></li>
<li><a href="#org2b048f1">17.24. Web Mode</a></li>
<li><a href="#org557ebab">17.25. Writeable Grep</a></li>
<li><a href="#org4d73237">17.26. Which Key</a></li>
<li><a href="#orgaa5ba9a">17.27. YAML</a></li>
<li><a href="#org6a105f5">17.28. Yasnippet</a>
<ul>
<li><a href="#org88d3e49">17.28.1. Snippets</a></li>
<li><a href="#orga20c382">17.28.2. Classic snippets</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org678d42c">18. Safe Local Variables</a></li>
</ul>
</div>
</div>
<p>
A fairly standard <a href="https://en.wikipedia.org/wiki/Literate_programming">literate</a> Emacs configuration using <a href="https://orgmode.org/">Org mode</a>.
</p>

<p>
To install, evaluate the code block below with <code>C-c C-c</code> in Emacs:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-babel-tangle)
(load early-init)
(load init-file)
(my/ensure-byte-compiled-init)
</pre>
</div>

<div id="outline-container-org11b9486" class="outline-2">
<h2 id="org11b9486"><span class="section-number-2">1</span> Doom startup speed hacks</h2>
<div class="outline-text-2" id="text-1">
<p>
Stole this stuff from <a href="https://github.com/hlissner/doom-emacs/blob/develop/docs/faq.org#how-does-doom-start-up-so-quickly">here</a>.
</p>
</div>

<div id="outline-container-org88c2b50" class="outline-3">
<h3 id="org88c2b50"><span class="section-number-3">1.1</span> Lexical Binding</h3>
<div class="outline-text-3" id="text-1-1">
<p>
This must come at the beginning of the file
</p>

<p>
<a href="https://nullprogram.com/blog/2016/12/22/">Some Performance Advantages of Lexical Scope</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">-*- lexical-binding: t; -*-</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb53f5e4" class="outline-3">
<h3 id="orgb53f5e4"><span class="section-number-3">1.2</span> Avoid garbage collection at startup</h3>
<div class="outline-text-3" id="text-1-2">
<p>
The GC can easily double startup time, so we suppress it at startup by
turning up gc-cons-threshold (and perhaps gc-cons-percentage) temporarily:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> gc-cons-threshold most-positive-fixnum <span style="color: #a8a8a8;">; </span><span style="color: #a8a8a8;">2^61 bytes</span>
      gc-cons-percentage 0.6)
</pre>
</div>

<p>
It is important to reset the garbage collection settings eventually. Not
doing so will cause garbage collection freezes during long-term interactive
use. Conversely, a gc-cons-threshold that is too small will cause
stuttering. We use 16mb as our default.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/default-gc-cons-settings</span> ()
  (<span style="color: #b6a0ff;">setq</span> gc-cons-threshold 16777216 <span style="color: #a8a8a8;">; </span><span style="color: #a8a8a8;">16mb</span>
        gc-cons-percentage 0.1))
(add-hook 'emacs-startup-hook 'my/default-gc-cons-settings)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaeb6dd9" class="outline-3">
<h3 id="orgaeb6dd9"><span class="section-number-3">1.3</span> Unset file-name-handler-alist temporarily</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Emacs consults this variable every time a file is read or library loaded, or
when certain functions in the file API are used (like expand-file-name or
file-truename).
</p>

<p>
Emacs does this to check if a special handler is needed to read that file, but
none of them are (typically) necessary at startup, so we disable them
(temporarily!):
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">my/default-file-name-handler-alist</span> file-name-handler-alist)
(<span style="color: #b6a0ff;">setq</span> file-name-handler-alist nil)
</pre>
</div>

<p>
Don’t forget to restore file-name-handler-alist, otherwise TRAMP won’t work and
compressed/encrypted files won’t open.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/restore-default-file-name-handler-alist</span> ()
  (<span style="color: #b6a0ff;">setq</span> file-name-handler-alist my/default-file-name-handler-alist))
(add-hook 'emacs-startup-hook 'my/restore-default-file-name-handler-alist)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org08f1c87" class="outline-2">
<h2 id="org08f1c87"><span class="section-number-2">2</span> General Settings</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org745b3c8" class="outline-3">
<h3 id="org745b3c8"><span class="section-number-3">2.1</span> Auto-save</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> auto-save-file-name-transforms '((<span style="color: #79a8ff;">".*"</span> <span style="color: #79a8ff;">"~/.emacs.d/auto-save-list/"</span> t)))
(<span style="color: #b6a0ff;">setq</span> auto-save-timeout 5)
</pre>
</div>
</div>
</div>

<div id="outline-container-org48e4d4b" class="outline-3">
<h3 id="org48e4d4b"><span class="section-number-3">2.2</span> Backups</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> backup-directory-alist '((<span style="color: #79a8ff;">"."</span> . <span style="color: #79a8ff;">"~/.emacs.d/backups"</span>)))
(<span style="color: #b6a0ff;">setq</span> backup-by-copying t) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">copy files, don't rename them.</span>
(<span style="color: #b6a0ff;">setq</span> delete-old-versions t)
(<span style="color: #b6a0ff;">setq</span> kept-new-versions 12)
(<span style="color: #b6a0ff;">setq</span> kept-old-versions 12)
</pre>
</div>
</div>
</div>

<div id="outline-container-org41f1c3d" class="outline-3">
<h3 id="org41f1c3d"><span class="section-number-3">2.3</span> Bell</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> ring-bell-function 'ignore)
(<span style="color: #b6a0ff;">setq</span> visible-bell 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb388314" class="outline-3">
<h3 id="orgb388314"><span class="section-number-3">2.4</span> Clipboard</h3>
<div class="outline-text-3" id="text-2-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> select-enable-clipboard t)
(<span style="color: #b6a0ff;">setq</span> select-enable-primary t)
(<span style="color: #b6a0ff;">setq</span> x-select-enable-clipboard-manager nil)
(<span style="color: #b6a0ff;">setq</span> save-interprogram-paste-before-kill t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4a30405" class="outline-3">
<h3 id="org4a30405"><span class="section-number-3">2.5</span> Text filling</h3>
<div class="outline-text-3" id="text-2-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq-default</span> fill-column 79)
(set-default 'truncate-lines t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc26d3b4" class="outline-3">
<h3 id="orgc26d3b4"><span class="section-number-3">2.6</span> Delete all on backspace</h3>
<div class="outline-text-3" id="text-2-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> backward-delete-char-untabify-method 'all)
</pre>
</div>
</div>
</div>

<div id="outline-container-org38cea61" class="outline-3">
<h3 id="org38cea61"><span class="section-number-3">2.7</span> Emacsclient executable</h3>
<div class="outline-text-3" id="text-2-7">
<p>
Only tangled on Windows.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">https://emacs.stackexchange.com/a/31061</span>
(<span style="color: #b6a0ff;">when</span> (equal system-type 'windows-nt)
  (<span style="color: #b6a0ff;">if</span> (file-readable-p <span style="color: #79a8ff;">"C:/Program Files/Emacs/x86_64/bin/emacsclient.exe"</span>)
      (<span style="color: #b6a0ff;">setq-default</span> with-editor-emacsclient-executable <span style="color: #79a8ff;">"C:/Program Files/Emacs/x86_64/bin/emacsclient.exe"</span>)
    (<span style="color: #b6a0ff;">setq-default</span> with-editor-emacsclient-executable nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8e5b41e" class="outline-3">
<h3 id="org8e5b41e"><span class="section-number-3">2.8</span> No lockfiles</h3>
<div class="outline-text-3" id="text-2-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> create-lockfiles nil) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">prevent creation of .#myfile.ext</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9a659ed" class="outline-3">
<h3 id="org9a659ed"><span class="section-number-3">2.9</span> Final newline</h3>
<div class="outline-text-3" id="text-2-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> require-final-newline t) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">useful for crontab</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org780f587" class="outline-3">
<h3 id="org780f587"><span class="section-number-3">2.10</span> Pop mark on repeat</h3>
<div class="outline-text-3" id="text-2-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> set-mark-command-repeat-pop t) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">repeating C-SPC after popping, pops it</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org517e778" class="outline-3">
<h3 id="org517e778"><span class="section-number-3">2.11</span> Encryption</h3>
<div class="outline-text-3" id="text-2-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> epa-file-cache-passphrase-for-symmetric-encryption t)
(<span style="color: #b6a0ff;">setf</span> epg-pinentry-mode 'loopback)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdd7bd52" class="outline-3">
<h3 id="orgdd7bd52"><span class="section-number-3">2.12</span> History</h3>
<div class="outline-text-3" id="text-2-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> history-length t)
(<span style="color: #b6a0ff;">setq</span> history-delete-duplicates t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org210a443" class="outline-3">
<h3 id="org210a443"><span class="section-number-3">2.13</span> Bookmarks</h3>
<div class="outline-text-3" id="text-2-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> bookmark-save-flag 1) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">always save bookmarks to file</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6d4065f" class="outline-3">
<h3 id="org6d4065f"><span class="section-number-3">2.14</span> Customize settings file</h3>
<div class="outline-text-3" id="text-2-14">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> custom-file (expand-file-name <span style="color: #79a8ff;">"custom.el"</span> user-emacs-directory))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgffc775e" class="outline-3">
<h3 id="orgffc775e"><span class="section-number-3">2.15</span> Enable all advanced features</h3>
<div class="outline-text-3" id="text-2-15">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> disabled-command-function nil) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">enable all "advanced" features</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc29a6bd" class="outline-3">
<h3 id="orgc29a6bd"><span class="section-number-3">2.16</span> Increase message logging max</h3>
<div class="outline-text-3" id="text-2-16">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> message-log-max 10000)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga71c4f4" class="outline-3">
<h3 id="orga71c4f4"><span class="section-number-3">2.17</span> More extensive apropos</h3>
<div class="outline-text-3" id="text-2-17">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> apropos-do-all t) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">doesn't seem to be documented anywhere..</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org23627dc" class="outline-3">
<h3 id="org23627dc"><span class="section-number-3">2.18</span> Mouse yank at point</h3>
<div class="outline-text-3" id="text-2-18">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> mouse-yank-at-point t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8714f22" class="outline-3">
<h3 id="org8714f22"><span class="section-number-3">2.19</span> Scrolling</h3>
<div class="outline-text-3" id="text-2-19">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> scroll-step 4)
(<span style="color: #b6a0ff;">setq</span> scroll-margin 6)
(<span style="color: #b6a0ff;">setq</span> scroll-conservatively 8)
(<span style="color: #b6a0ff;">setq</span> scroll-preserve-screen-position t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgae5b2ba" class="outline-3">
<h3 id="orgae5b2ba"><span class="section-number-3">2.20</span> Initial startup</h3>
<div class="outline-text-3" id="text-2-20">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">display-startup-echo-area-message</span> ()
  <span style="color: #c6eaff;">"Redefine this function to be more useful."</span>
  (message <span style="color: #79a8ff;">"Started in %s. Hacks &amp; Glory await! :-)"</span> (emacs-init-time)))
(<span style="color: #b6a0ff;">setq</span> inhibit-startup-screen t)
(<span style="color: #b6a0ff;">setq</span> initial-scratch-message nil)
(<span style="color: #b6a0ff;">setq</span> initial-major-mode 'fundamental-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdfa50b7" class="outline-3">
<h3 id="orgdfa50b7"><span class="section-number-3">2.21</span> Undo limits</h3>
<div class="outline-text-3" id="text-2-21">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">http://www.dr-qubit.org/Lost_undo-tree_history.html</span>
(<span style="color: #b6a0ff;">setq</span> undo-limit 80000000)
(<span style="color: #b6a0ff;">setq</span> undo-strong-limit 90000000)
</pre>
</div>
</div>
</div>

<div id="outline-container-org33c4b29" class="outline-3">
<h3 id="org33c4b29"><span class="section-number-3">2.22</span> Uniquify</h3>
<div class="outline-text-3" id="text-2-22">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> uniquify-buffer-name-style 'forward)
(<span style="color: #b6a0ff;">setq</span> uniquify-strip-common-suffix t)
(<span style="color: #b6a0ff;">setq</span> uniquify-after-kill-buffer-p t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0fccd5d" class="outline-3">
<h3 id="org0fccd5d"><span class="section-number-3">2.23</span> User info</h3>
<div class="outline-text-3" id="text-2-23">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> user-full-name <span style="color: #79a8ff;">"Toby Slight"</span>)
(<span style="color: #b6a0ff;">setq</span> user-mail-address <span style="color: #79a8ff;">"tslight@pm.me"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3bc18e8" class="outline-3">
<h3 id="org3bc18e8"><span class="section-number-3">2.24</span> Windows</h3>
<div class="outline-text-3" id="text-2-24">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> split-width-threshold 200)
(<span style="color: #b6a0ff;">setq</span> split-height-threshold 100)
(<span style="color: #b6a0ff;">setq</span> auto-window-vscroll nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd62dfbf" class="outline-3">
<h3 id="orgd62dfbf"><span class="section-number-3">2.25</span> Yes or no</h3>
<div class="outline-text-3" id="text-2-25">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(fset 'yes-or-no-p 'y-or-n-p) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">never have to type full word</span>
(<span style="color: #b6a0ff;">setq</span> confirm-kill-emacs 'y-or-n-p)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbb127ee" class="outline-2">
<h2 id="orgbb127ee"><span class="section-number-2">3</span> Code Style</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> c-default-style <span style="color: #79a8ff;">"bsd"</span>)
(<span style="color: #b6a0ff;">setq</span> c-basic-offset 4)
(<span style="color: #b6a0ff;">setq</span> css-indent-offset 2)
(<span style="color: #b6a0ff;">setq</span> js-indent-level 2)

<span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">If indent-tabs-mode is t, it may use tab, resulting in mixed spaces and tabs</span>
(<span style="color: #b6a0ff;">setq-default</span> indent-tabs-mode nil)

(<span style="color: #b6a0ff;">with-eval-after-load</span> 'python
  (<span style="color: #b6a0ff;">setq</span> python-fill-docstring-style 'django)
  (message <span style="color: #79a8ff;">"Lazy loaded python :-)"</span>))

<span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">make tab key do indent first then completion.</span>
(<span style="color: #b6a0ff;">setq-default</span> tab-always-indent 'complete)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa2fa90" class="outline-2">
<h2 id="orgfa2fa90"><span class="section-number-2">4</span> File Encoding</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/convert-to-unix-coding-system</span> ()
  <span style="color: #c6eaff;">"Change the current buffer's file encoding to unix."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((coding-str (symbol-name buffer-file-coding-system)))
    (<span style="color: #b6a0ff;">when</span> (string-match <span style="color: #79a8ff;">"-</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">(?:</span><span style="color: #79a8ff;">dos</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">|</span><span style="color: #79a8ff;">mac</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">)</span><span style="color: #79a8ff;">$"</span> coding-str)
      (set-buffer-file-coding-system 'unix))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-x RET u"</span>) 'my/convert-to-unix-coding-system)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/hide-dos-eol</span> ()
  <span style="color: #c6eaff;">"Do not show ^M in files containing mixed UNIX and DOS line endings."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">setq</span> buffer-display-table (make-display-table))
  (aset buffer-display-table ?\^M []))
(add-hook 'find-file-hook 'my/hide-dos-eol)

(<span style="color: #b6a0ff;">setq-default</span> buffer-file-coding-system 'utf-8-unix)
(<span style="color: #b6a0ff;">setq-default</span> default-buffer-file-coding-system 'utf-8-unix)
(<span style="color: #b6a0ff;">setq</span> coding-system-for-read 'utf-8-unix)
(<span style="color: #b6a0ff;">setq</span> coding-system-for-write 'utf-8-unix)
(set-language-environment <span style="color: #79a8ff;">"UTF-8"</span>)
(set-default-coding-systems 'utf-8-unix)
(prefer-coding-system 'utf-8-unix)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge2d4933" class="outline-2">
<h2 id="orge2d4933"><span class="section-number-2">5</span> Hooks</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'emacs-lisp-mode-hook 'eldoc-mode)
(add-hook 'lisp-interaction-mode-hook 'eldoc-mode)
(add-hook 'lisp-mode-hook 'eldoc-mode)
(add-hook 'prog-mode-hook 'hl-line-mode)
(add-hook 'text-mode-hook 'hl-line-mode)
(add-hook 'prog-mode-hook 'hs-minor-mode)
(add-hook 'prog-mode-hook 'display-line-numbers-mode)
(add-hook 'text-mode-hook 'auto-fill-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org30f087c" class="outline-2">
<h2 id="org30f087c"><span class="section-number-2">6</span> Keybindings</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org76d12f1" class="outline-3">
<h3 id="org76d12f1"><span class="section-number-3">6.1</span> Calculator/Calc bindings</h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(autoload 'calculator <span style="color: #79a8ff;">"calculator"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c c"</span>) 'calculator)
(autoload 'calc <span style="color: #79a8ff;">"calc"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-c"</span>) 'calc)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3f2468e" class="outline-3">
<h3 id="org3f2468e"><span class="section-number-3">6.2</span> Buffers</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-e"</span>) 'eval-buffer)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x c"</span>) 'save-buffers-kill-emacs)
(autoload 'ibuffer <span style="color: #79a8ff;">"ibuffer"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x C-b"</span>) 'ibuffer)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-k"</span>) 'kill-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc555ccf" class="outline-3">
<h3 id="orgc555ccf"><span class="section-number-3">6.3</span> Desktop read/save</h3>
<div class="outline-text-3" id="text-6-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-d r"</span>) 'desktop-read)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-d s"</span>) 'desktop-save)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3a3eccd" class="outline-3">
<h3 id="org3a3eccd"><span class="section-number-3">6.4</span> Editing</h3>
<div class="outline-text-3" id="text-6-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-c C-e"</span>) 'pp-eval-last-sexp)
(global-set-key (kbd <span style="color: #79a8ff;">"M-;"</span>) 'comment-line)
(global-set-key (kbd <span style="color: #79a8ff;">"C-z"</span>) 'zap-up-to-char) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">suspend is still bound to C-x C-z</span>
(global-set-key (kbd <span style="color: #79a8ff;">"M-z"</span>) 'zap-to-char)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-t"</span>) 'transpose-regions)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-p"</span>) 'transpose-paragraphs)
(global-set-key (kbd <span style="color: #79a8ff;">"M-SPC"</span>) 'cycle-spacing)
(global-set-key (kbd <span style="color: #79a8ff;">"M-%"</span>) 'query-replace-regexp)
(global-set-key [remap capitalize-word] 'capitalize-dwim)
(global-set-key [remap downcase-word] 'downcase-dwim)
(global-set-key [remap upcase-word] 'upcase-dwim)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4db845a" class="outline-3">
<h3 id="org4db845a"><span class="section-number-3">6.5</span> Frames</h3>
<div class="outline-text-3" id="text-6-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-&lt;f10&gt;"</span>) 'toggle-frame-maximized)
(global-set-key (kbd <span style="color: #79a8ff;">"C-&lt;f11&gt;"</span>) 'toggle-frame-fullscreen)
(global-set-key (kbd <span style="color: #79a8ff;">"C-s-f"</span>) 'toggle-frame-fullscreen)
(global-set-key (kbd <span style="color: #79a8ff;">"C-s-m"</span>) 'toggle-frame-maximized)
</pre>
</div>
</div>
</div>

<div id="outline-container-org02cd80f" class="outline-3">
<h3 id="org02cd80f"><span class="section-number-3">6.6</span> Grep</h3>
<div class="outline-text-3" id="text-6-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(autoload 'grep <span style="color: #79a8ff;">"grep"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c C-g"</span>) 'grep)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6369cae" class="outline-3">
<h3 id="org6369cae"><span class="section-number-3">6.7</span> Menubar</h3>
<div class="outline-text-3" id="text-6-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-m"</span>) 'menu-bar-mode)
(global-set-key (kbd <span style="color: #79a8ff;">"S-&lt;f10&gt;"</span>) 'menu-bar-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org394692d" class="outline-3">
<h3 id="org394692d"><span class="section-number-3">6.8</span> Special mode</h3>
<div class="outline-text-3" id="text-6-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">for help modes, and simple/special modes</span>
(define-key special-mode-map <span style="color: #79a8ff;">"n"</span> #'forward-button)
(define-key special-mode-map <span style="color: #79a8ff;">"p"</span> #'backward-button)
(define-key special-mode-map <span style="color: #79a8ff;">"f"</span> #'forward-button)
(define-key special-mode-map <span style="color: #79a8ff;">"b"</span> #'backward-button)
(define-key special-mode-map <span style="color: #79a8ff;">"n"</span> #'widget-forward)
(define-key special-mode-map <span style="color: #79a8ff;">"p"</span> #'widget-backward)
(define-key special-mode-map <span style="color: #79a8ff;">"f"</span> #'widget-forward)
(define-key special-mode-map <span style="color: #79a8ff;">"b"</span> #'widget-backward)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeddf0d2" class="outline-3">
<h3 id="orgeddf0d2"><span class="section-number-3">6.9</span> Toggle filling</h3>
<div class="outline-text-3" id="text-6-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-t a"</span>) 'toggle-text-mode-autofill)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-t t"</span>) 'toggle-truncate-lines)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc0b71bf" class="outline-3">
<h3 id="orgc0b71bf"><span class="section-number-3">6.10</span> Tabs (Emacs 27+)</h3>
<div class="outline-text-3" id="text-6-10">
<p>
Don't tangle this block on <code>emacs-version</code> &lt; 27.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27"</span>) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">belt and braces</span>
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x t t"</span>) 'tab-bar-select-tab-by-name)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x t c"</span>) 'tab-bar-new-tab)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x t k"</span>) 'tab-bar-close-tab)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x t n"</span>) 'tab-bar-switch-to-next-tab)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x t p"</span>) 'tab-bar-switch-to-prev-tab)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x t l"</span>) 'tab-bar-switch-to-recent-tab))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge4a49af" class="outline-2">
<h2 id="orge4a49af"><span class="section-number-2">7</span> Registers</h2>
<div class="outline-text-2" id="text-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/jump-to-register-other-window</span> ()
  <span style="color: #c6eaff;">"Tin job."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (jump-to-register (register-read-with-preview <span style="color: #79a8ff;">"Jump to register"</span>)))

(global-set-key (kbd <span style="color: #79a8ff;">"C-x j"</span>) 'jump-to-register)
(define-key ctl-x-4-map <span style="color: #79a8ff;">"j"</span> 'my/jump-to-register-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgca7aae9" class="outline-2">
<h2 id="orgca7aae9"><span class="section-number-2">8</span> Theme/UI</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">when</span> (fboundp 'menu-bar-mode) (menu-bar-mode -1))
(<span style="color: #b6a0ff;">when</span> (fboundp 'scroll-bar-mode) (scroll-bar-mode -1))
(<span style="color: #b6a0ff;">when</span> (fboundp 'tool-bar-mode) (tool-bar-mode -1))
(<span style="color: #b6a0ff;">when</span> (fboundp 'tooltip-mode) (tooltip-mode -1))
(<span style="color: #b6a0ff;">setq</span> frame-resize-pixelwise t) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">jwm resize fix</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/after-make-frame</span> (frame)
  <span style="color: #c6eaff;">"Add custom settings after making the FRAME."</span>
  (select-frame frame)
  (<span style="color: #b6a0ff;">if</span> (display-graphic-p)
      (<span style="color: #b6a0ff;">progn</span>
        (<span style="color: #b6a0ff;">when</span> (eq system-type 'windows-nt)
          (set-frame-font <span style="color: #79a8ff;">"Cascadia Mono 10"</span> nil t))
        (<span style="color: #b6a0ff;">when</span> (eq system-type 'darwin)
          (set-frame-font <span style="color: #79a8ff;">"Monaco 10"</span> nil t))
        (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">or</span> (eq system-type 'gnu/linux)
                  (eq system-type 'berkeley-unix))
          (set-frame-font <span style="color: #79a8ff;">"Monospace 11"</span> nil t))
        (<span style="color: #b6a0ff;">if</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
            (load-theme 'wombat)
          (load-theme 'modus-vivendi)))
    (<span style="color: #b6a0ff;">progn</span>
      (<span style="color: #b6a0ff;">if</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
          (load-theme 'manoj-dark)
        (load-theme 'modus-vivendi))
      (xterm-mouse-mode 1)
      (mouse-avoidance-mode 'banish)
      (<span style="color: #b6a0ff;">setq</span> mouse-wheel-follow-mouse 't) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">scroll window under mouse</span>
      (<span style="color: #b6a0ff;">setq</span> mouse-wheel-progressive-speed nil) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">don't accelerate scrolling</span>
      (<span style="color: #b6a0ff;">setq</span> mouse-wheel-scroll-amount '(1 ((shift) . 1))) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">one line at a time</span>
      (global-set-key [mouse-4] '(lambda () (<span style="color: #b6a0ff;">interactive</span>) (scroll-down 1)))
      (global-set-key [mouse-5] '(lambda () (<span style="color: #b6a0ff;">interactive</span>) (scroll-up 1))))))

(<span style="color: #b6a0ff;">if</span> (daemonp)
    (add-hook 'after-make-frame-functions #'my/after-make-frame(selected-frame))
  (my/after-make-frame(selected-frame)))
</pre>
</div>

<p>
Modeline configuration
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> display-time-format <span style="color: #79a8ff;">"%H:%M %d/%m"</span>)
(<span style="color: #b6a0ff;">setq</span> display-time-default-load-average 'nil)
(column-number-mode t)
(display-time-mode t)
(display-battery-mode t)
(size-indication-mode t)
</pre>
</div>

<p>
Disable the current theme, before loading a new one.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defadvice</span> <span style="color: #feacd0;">load-theme</span> (before theme-dont-propagate activate)
  <span style="color: #c6eaff;">"Disable theme before loading new one."</span>
  (mapc #'disable-theme custom-enabled-themes))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/disable-themes</span> ()
  <span style="color: #c6eaff;">"Disable all custom themes in one fail swoop."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (mapc #'disable-theme custom-enabled-themes))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-t C-t"</span>) 'my/disable-themes)
</pre>
</div>

<p>
Maximize the frame on launch and disable scroll bars
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> default-frame-alist
      '((fullscreen . maximized) (vertical-scroll-bars . nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd54fe3" class="outline-2">
<h2 id="orgbd54fe3"><span class="section-number-2">9</span> Buffer functions</h2>
<div class="outline-text-2" id="text-9">
<p>
A collection of useful functions for manipulating buffers in various ways that
I've collected (stolen!) or written over the years.
</p>
</div>

<div id="outline-container-orga23553c" class="outline-3">
<h3 id="orga23553c"><span class="section-number-3">9.1</span> Indent Buffer</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/indent-buffer</span> ()
  <span style="color: #c6eaff;">"Indent the contents of a buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (indent-region (point-min) (point-max)))
(global-set-key (kbd <span style="color: #79a8ff;">"M-i"</span>) 'my/indent-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb988ba" class="outline-3">
<h3 id="orgcb988ba"><span class="section-number-3">9.2</span> Kill this buffer</h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/kill-this-buffer</span> ()
  <span style="color: #c6eaff;">"Kill the current buffer - `</span><span style="color: #00bcff;">kill-this-buffer</span><span style="color: #c6eaff;">' is unreliable."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (kill-buffer (current-buffer)))
(global-set-key (kbd <span style="color: #79a8ff;">"C-x k"</span>) 'my/kill-this-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-org827bbec" class="outline-3">
<h3 id="org827bbec"><span class="section-number-3">9.3</span> Last buffer</h3>
<div class="outline-text-3" id="text-9-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/last-buffer</span> ()
  <span style="color: #c6eaff;">"Switch back and forth between two buffers easily."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (switch-to-buffer (other-buffer (current-buffer) 1)))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c b"</span>) 'my/last-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d7cfb0" class="outline-3">
<h3 id="org3d7cfb0"><span class="section-number-3">9.4</span> Narrow DWIM</h3>
<div class="outline-text-3" id="text-9-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/narrow-or-widen-dwim</span> (p)
  <span style="color: #c6eaff;">"If the buffer is narrowed, it widens, otherwise, it narrows intelligently.</span>

<span style="color: #c6eaff;">Intelligently means: region, org-src-block, org-subtree, or</span>
<span style="color: #c6eaff;">defun, whichever applies first.</span>

<span style="color: #c6eaff;">Narrowing to org-src-block actually calls `</span><span style="color: #00bcff;">org-edit-src-code</span><span style="color: #c6eaff;">'.</span>
<span style="color: #c6eaff;">With prefix P, don't widen, just narrow even if buffer is already</span>
<span style="color: #c6eaff;">narrowed."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">declare</span> (interactive-only))
  (<span style="color: #b6a0ff;">cond</span> ((<span style="color: #b6a0ff;">and</span> (buffer-narrowed-p) (not p)) (widen))
        ((region-active-p)
         (narrow-to-region (region-beginning) (region-end)))
        ((derived-mode-p 'org-mode)
         <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">`</span><span style="color: #00bcff;">org-edit-src-code</span><span style="color: #a8a8a8;">' is not a real narrowing command.</span>
         <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">Remove this first conditional if you don't want it.</span>
         (<span style="color: #b6a0ff;">cond</span> ((<span style="color: #b6a0ff;">ignore-errors</span> (org-edit-src-code))
                (delete-other-windows))
               ((org-at-block-p)
                (org-narrow-to-block))
               (t (org-narrow-to-subtree))))
        (t (narrow-to-defun))))
(define-key ctl-x-map <span style="color: #79a8ff;">"n"</span> 'my/narrow-or-widen-dwim)
(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (define-key org-mode-map (kbd <span style="color: #79a8ff;">"C-x n"</span>) 'my/narrow-or-widen-dwim))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2e709a6" class="outline-3">
<h3 id="org2e709a6"><span class="section-number-3">9.5</span> Nuke buffers</h3>
<div class="outline-text-3" id="text-9-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/nuke-buffers</span> ()
  <span style="color: #c6eaff;">"Kill all buffers, leaving *scratch* only."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (mapc
   (<span style="color: #b6a0ff;">lambda</span> (buffer)
     (kill-buffer buffer))
   (buffer-list))
  (<span style="color: #b6a0ff;">if</span> current-prefix-arg
      (delete-other-windows)))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-n"</span>) 'my/nuke-buffers)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7bc3025" class="outline-3">
<h3 id="org7bc3025"><span class="section-number-3">9.6</span> Remove stuff from a buffer</h3>
<div class="outline-text-3" id="text-9-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/remove-from-buffer</span> (string)
  <span style="color: #c6eaff;">"Remove all occurences of STRING from the whole buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"sString to remove: "</span>)
  (<span style="color: #b6a0ff;">save-match-data</span>
    (<span style="color: #b6a0ff;">save-excursion</span>
      (<span style="color: #b6a0ff;">let</span> ((count 0))
        (goto-char (point-min))
        (<span style="color: #b6a0ff;">while</span> (re-search-forward string (point-max) t)
          (<span style="color: #b6a0ff;">setq</span> count (+ count 1))
          (replace-match <span style="color: #79a8ff;">""</span> nil nil))
        (message (format <span style="color: #79a8ff;">"%d %s removed from buffer."</span> count string))))))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/remove-character-number</span> (number)
  <span style="color: #c6eaff;">"Remove all occurences of a control character NUMBER.</span>
<span style="color: #c6eaff;">  Excluding ^I (tabs) and ^J (newline)."</span>
  (<span style="color: #b6a0ff;">if</span> (<span style="color: #b6a0ff;">and</span> (&gt;= number 0) (&lt;= number 31)
           (not (= number 9)) (not (= number 10)))
      (<span style="color: #b6a0ff;">let</span> ((character (string number)))
        (my/remove-from-buffer character))))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/remove-all-ctrl-characters</span> ()
  <span style="color: #c6eaff;">"Remove all occurences of all control characters.</span>
<span style="color: #c6eaff;">  Excluding ^I (tabs) and ^J (newlines)."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (mapcar (<span style="color: #b6a0ff;">lambda</span> (n)
            (my/remove-character-number n))
          (number-sequence 0 31)))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/remove-ctrl-m</span> ()
  <span style="color: #c6eaff;">"Remove all ^M occurrences from EOL in a buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (my/remove-from-buffer <span style="color: #79a8ff;">"$"</span>))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c k"</span>) 'my/remove-from-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6243616" class="outline-3">
<h3 id="org6243616"><span class="section-number-3">9.7</span> Save buffers silently</h3>
<div class="outline-text-3" id="text-9-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/save-buffers-silently</span> ()
  <span style="color: #c6eaff;">"Save all open buffers without prompting."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (save-some-buffers t)
  (message <span style="color: #79a8ff;">"Saved all buffers :-)"</span>))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c s"</span>) 'my/save-buffers-silently)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeac7a6b" class="outline-3">
<h3 id="orgeac7a6b"><span class="section-number-3">9.8</span> Toggle maximize buffer</h3>
<div class="outline-text-3" id="text-9-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/toggle-maximize-buffer</span> ()
  <span style="color: #c6eaff;">"Temporarily maximize a buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (= 1 (length (window-list)))
      (jump-to-register '_)
    (<span style="color: #b6a0ff;">progn</span>
      (window-configuration-to-register '_)
      (delete-other-windows))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c z"</span>) 'my/toggle-maximize-buffer)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org99b008b" class="outline-2">
<h2 id="org99b008b"><span class="section-number-2">10</span> Complilation related</h2>
<div class="outline-text-2" id="text-10">
</div>
<div id="outline-container-org4a32c36" class="outline-3">
<h3 id="org4a32c36"><span class="section-number-3">10.1</span> Prefer newer over compiled</h3>
<div class="outline-text-3" id="text-10-1">
<p>
If init.elc is older, use newer <code>init.el</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> load-prefer-newer t) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">if init.elc is older, use newer init.el</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7240512" class="outline-3">
<h3 id="org7240512"><span class="section-number-3">10.2</span> Place point after complilation error</h3>
<div class="outline-text-3" id="text-10-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> compilation-scroll-output 'first-error)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdc06844" class="outline-3">
<h3 id="orgdc06844"><span class="section-number-3">10.3</span> Ensure init files are byte compiled</h3>
<div class="outline-text-3" id="text-10-3">
<p>
This block will byte compile <code>early-init.el</code> and <code>init.el</code> if an existing
<code>.elc</code> file is not up to date with their contents.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/ensure-byte-compiled-init</span> ()
  <span style="color: #c6eaff;">"Run `</span><span style="color: #00bcff;">byte-recompile-file</span><span style="color: #c6eaff;">' on config files with 'nil' FORCE and ARG 0.</span>
<span style="color: #c6eaff;">This means we don't compile if .elc is up to date but we always</span>
<span style="color: #c6eaff;">create a new .elc file if it doesn't already exist."</span>
  (autoload 'byte-recompile-file <span style="color: #79a8ff;">"bytecomp"</span>)
  (<span style="color: #b6a0ff;">if</span> (file-readable-p (expand-file-name <span style="color: #79a8ff;">"early-init.el"</span> user-emacs-directory))
      (byte-recompile-file (expand-file-name <span style="color: #79a8ff;">"early-init.el"</span> user-emacs-directory) 'nil 0))
  (byte-recompile-file (expand-file-name <span style="color: #79a8ff;">"init.el"</span> user-emacs-directory) 'nil 0))
(add-hook 'after-init-hook 'my/ensure-byte-compiled-init)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8efc75e" class="outline-3">
<h3 id="org8efc75e"><span class="section-number-3">10.4</span> Recompile config</h3>
<div class="outline-text-3" id="text-10-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">my/files-to-recompile</span> '(<span style="color: #79a8ff;">"early-init.el"</span> <span style="color: #79a8ff;">"init.el"</span>)
  <span style="color: #c6eaff;">"Files under `</span><span style="color: #00bcff;">user-emacs-directory</span><span style="color: #c6eaff;">' that we use for configuration."</span>)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/recompile-config</span> ()
  <span style="color: #c6eaff;">"Recompile everything in Emacs configuration."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (mapc (<span style="color: #b6a0ff;">lambda</span> (file)
          (<span style="color: #b6a0ff;">let</span> ((path (expand-file-name file user-emacs-directory)))
            (<span style="color: #b6a0ff;">when</span> (file-readable-p path)
              (byte-recompile-file path t 0)
              (load (file-name-sans-extension path))
              (message <span style="color: #79a8ff;">"Re-compiled &amp; loaded %s :-)"</span> path))))
        my/files-to-recompile))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8cdfb56" class="outline-3">
<h3 id="org8cdfb56"><span class="section-number-3">10.5</span> Make compilation buffers more colorful</h3>
<div class="outline-text-3" id="text-10-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'comint-output-filter-functions 'ansi-color-process-output)
<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">colorize-compilation-buffer</span> ()
  <span style="color: #c6eaff;">"ANSI color in compilation buffer."</span>
  (ansi-color-apply-on-region compilation-filter-start (point)))
(add-hook 'compilation-filter-hook 'colorize-compilation-buffer)
(add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0055edc" class="outline-2">
<h2 id="org0055edc"><span class="section-number-2">11</span> Editing functions</h2>
<div class="outline-text-2" id="text-11">
<p>
Various stolen/cobbled together functions to make editing a bit more comfy.
</p>
</div>

<div id="outline-container-org3255bcf" class="outline-3">
<h3 id="org3255bcf"><span class="section-number-3">11.1</span> Aligning symbols</h3>
<div class="outline-text-3" id="text-11-1">
<p>
Some handy functions to make aligning symbols less painful.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/align-symbol</span> (begin end symbol)
  <span style="color: #c6eaff;">"Align any SYMBOL in region (between BEGIN and END)."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"r\nsEnter align symbol: "</span>)
  (align-regexp begin end (concat <span style="color: #79a8ff;">"</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">(</span><span style="color: #79a8ff;">\\s-*</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">)</span><span style="color: #79a8ff;">"</span> symbol) 1 1))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c a"</span>) 'my/align-symbol)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/align-equals</span> (begin end)
  <span style="color: #c6eaff;">"Align equals in region (between BEGIN and END)."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"r"</span>)
  (my/align-symbol begin end <span style="color: #79a8ff;">"="</span>))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c ="</span>) 'my/align-equals)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/align-colon</span> (begin end)
  <span style="color: #c6eaff;">"Align colons in region (between BEGIN and END)."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"r"</span>)
  (my/align-symbol begin end <span style="color: #79a8ff;">":"</span>))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c :"</span>) 'my/align-colon)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/align-numbers</span> (begin end)
  <span style="color: #c6eaff;">"Align numbers in region (between BEGIN and END)."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"r"</span>)
  (my/align-symbol begin end <span style="color: #79a8ff;">"[0-9]+"</span>))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c #"</span>) 'my/align-numbers)

(<span style="color: #b6a0ff;">defadvice</span> <span style="color: #feacd0;">align-regexp</span> (around align-regexp-with-spaces activate)
  <span style="color: #c6eaff;">"Force alignment commands to use spaces, not tabs."</span>
  (<span style="color: #b6a0ff;">let</span> ((indent-tabs-mode nil))
    ad-do-it))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge4b3b17" class="outline-3">
<h3 id="orge4b3b17"><span class="section-number-3">11.2</span> Change numbers</h3>
<div class="outline-text-3" id="text-11-2">
<p>
Increment or decrement numbers at the point.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/change-number-at-point</span> (change)
  <span style="color: #c6eaff;">"Change a number by CHANGE amount."</span>
  (<span style="color: #b6a0ff;">let</span> ((number (number-at-point))
        (point (point)))
    (<span style="color: #b6a0ff;">when</span> number
      (<span style="color: #b6a0ff;">progn</span>
        (forward-word)
        (search-backward (number-to-string number))
        (replace-match (number-to-string (funcall change number)))
        (goto-char point)))))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/increment-number-at-point</span> ()
  <span style="color: #c6eaff;">"Increment number at point."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (my/change-number-at-point '1+))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c +"</span>) 'my/increment-number-at-point)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/decrement-number-at-point</span> ()
  <span style="color: #c6eaff;">"Decrement number at point."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (my/change-number-at-point '1-))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c -"</span>) 'my/decrement-number-at-point)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcf065e7" class="outline-3">
<h3 id="orgcf065e7"><span class="section-number-3">11.3</span> Delete inside delimiters</h3>
<div class="outline-text-3" id="text-11-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/delete-inside</span> ()
  <span style="color: #c6eaff;">"Deletes the text within parentheses, brackets or quotes."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">Search for a match on the same line, don't delete across lines</span>
  (search-backward-regexp <span style="color: #79a8ff;">"[[{(&lt;\"</span><span style="color: #dbbe5f;">\</span><span style="color: #79a8ff;">']"</span> (line-beginning-position))
  (forward-char)
  (<span style="color: #b6a0ff;">let</span> ((lstart (point)))
    (search-forward-regexp <span style="color: #79a8ff;">"[]})&gt;\"</span><span style="color: #dbbe5f;">\</span><span style="color: #79a8ff;">']"</span> (line-end-position))
    (backward-char)
    (kill-region lstart (point))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c d"</span>) 'my/delete-inside)
</pre>
</div>
</div>
</div>

<div id="outline-container-org00776f4" class="outline-3">
<h3 id="org00776f4"><span class="section-number-3">11.4</span> Generate a numbered list</h3>
<div class="outline-text-3" id="text-11-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/generate-numbered-list</span> (start end char)
  <span style="color: #c6eaff;">"Create a numbered list from START to END.  Using CHAR as punctuation."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"nStart number:\nnEnd number:\nsCharacter:"</span>)
  (<span style="color: #b6a0ff;">let</span> ((x start))
    (<span style="color: #b6a0ff;">while</span> (&lt;= x end)
      (insert (concat (number-to-string x) char))
      (newline)
      (<span style="color: #b6a0ff;">setq</span> x (+ x 1)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1bbca0d" class="outline-3">
<h3 id="org1bbca0d"><span class="section-number-3">11.5</span> Moving lines</h3>
<div class="outline-text-3" id="text-11-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">save-column</span> (<span style="color: #f78fe7;">&amp;rest</span> body)
  `(<span style="color: #b6a0ff;">let</span> ((column (current-column)))
     (<span style="color: #b6a0ff;">unwind-protect</span> (<span style="color: #b6a0ff;">progn</span> ,@body) (move-to-column column))))
(put 'save-column 'lisp-indent-function 0)

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">move-line-up</span> ()
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">save-column</span> (transpose-lines 1) (forward-line -2)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">move-line-down</span> ()
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">save-column</span> (forward-line 1) (transpose-lines 1) (forward-line -1)))

(global-set-key (kbd <span style="color: #79a8ff;">"M-&lt;up&gt;"</span>) 'move-line-up)
(global-set-key (kbd <span style="color: #79a8ff;">"M-&lt;down&gt;"</span>) 'move-line-down)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd98e281" class="outline-3">
<h3 id="orgd98e281"><span class="section-number-3">11.6</span> Smarter that the default functions</h3>
<div class="outline-text-3" id="text-11-6">
<p>
Overwrite some default functions that do stuff in a slightly counter-intuitive
or just less than ideal way&#x2026;
</p>
</div>

<div id="outline-container-orgc6712b0" class="outline-4">
<h4 id="orgc6712b0"><span class="section-number-4">11.6.1</span> Fill or unfill</h4>
<div class="outline-text-4" id="text-11-6-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">smart/fill-or-unfill</span> ()
  <span style="color: #c6eaff;">"Like `</span><span style="color: #00bcff;">fill-paragraph</span><span style="color: #c6eaff;">', but unfill if used twice."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((fill-column
         (<span style="color: #b6a0ff;">if</span> (eq last-command 'smart/fill-or-unfill)
             (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> this-command nil)
                    (point-max))
           fill-column)))
    (call-interactively #'fill-paragraph)))
(global-set-key [remap fill-paragraph] 'smart/fill-or-unfill)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1d2ba73" class="outline-4">
<h4 id="org1d2ba73"><span class="section-number-4">11.6.2</span> Beginning of line</h4>
<div class="outline-text-4" id="text-11-6-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">smart/move-beginning-of-line</span> ()
  <span style="color: #c6eaff;">"Move point back to indentation.</span>

<span style="color: #c6eaff;">If there is any non blank characters to the left of the cursor.</span>
<span style="color: #c6eaff;">Otherwise point moves to beginning of line."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (= (point) (<span style="color: #b6a0ff;">save-excursion</span> (back-to-indentation) (point)))
      (beginning-of-line)
    (back-to-indentation)))
(global-set-key [remap move-beginning-of-line] 'smart/move-beginning-of-line)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ca5c72" class="outline-4">
<h4 id="org8ca5c72"><span class="section-number-4">11.6.3</span> Kill ring save</h4>
<div class="outline-text-4" id="text-11-6-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">smart/kill-ring-save</span> ()
  <span style="color: #c6eaff;">"Copy current line or text selection to kill ring.</span>

<span style="color: #c6eaff;">When `</span><span style="color: #00bcff;">universal-argument</span><span style="color: #c6eaff;">' is called first, copy whole buffer (but</span>
<span style="color: #c6eaff;">respect `</span><span style="color: #00bcff;">narrow-to-region</span><span style="color: #c6eaff;">')."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> (p1 p2)
    (<span style="color: #b6a0ff;">if</span> (null current-prefix-arg)
        (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">if</span> (use-region-p)
                   (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (region-beginning))
                          (<span style="color: #b6a0ff;">setq</span> p2 (region-end)))
                 (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (line-beginning-position))
                        (<span style="color: #b6a0ff;">setq</span> p2 (line-end-position)))))
      (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (point-min))
             (<span style="color: #b6a0ff;">setq</span> p2 (point-max))))
    (kill-ring-save p1 p2)))
(global-set-key [remap kill-ring-save] 'smart/kill-ring-save)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc42a0c" class="outline-4">
<h4 id="orgcc42a0c"><span class="section-number-4">11.6.4</span> Kill region</h4>
<div class="outline-text-4" id="text-11-6-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">smart/kill-region</span> ()
  <span style="color: #c6eaff;">"Cut current line, or text selection to kill ring.</span>

<span style="color: #c6eaff;">When `</span><span style="color: #00bcff;">universal-argument</span><span style="color: #c6eaff;">' is called first, cut whole buffer (but</span>
<span style="color: #c6eaff;">respect `</span><span style="color: #00bcff;">narrow-to-region</span><span style="color: #c6eaff;">')."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> (p1 p2)
    (<span style="color: #b6a0ff;">if</span> (null current-prefix-arg)
        (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">if</span> (use-region-p)
                   (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (region-beginning))
                          (<span style="color: #b6a0ff;">setq</span> p2 (region-end)))
                 (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (line-beginning-position))
                        (<span style="color: #b6a0ff;">setq</span> p2 (line-beginning-position 2)))))
      (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (point-min))
             (<span style="color: #b6a0ff;">setq</span> p2 (point-max))))
    (kill-region p1 p2)))
(global-set-key [remap kill-region] 'smart/kill-region)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1876e85" class="outline-3">
<h3 id="org1876e85"><span class="section-number-3">11.7</span> Case insensitive sort-lines</h3>
<div class="outline-text-3" id="text-11-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/sort-lines-nocase</span> ()
  <span style="color: #c6eaff;">"Sort marked lines with case sensitivity."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((sort-fold-case t))
    (call-interactively 'sort-lines)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcfb94fb" class="outline-3">
<h3 id="orgcfb94fb"><span class="section-number-3">11.8</span> Surround stuff</h3>
<div class="outline-text-3" id="text-11-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/surround</span> (begin end open close)
  <span style="color: #c6eaff;">"Put OPEN at BEGIN and CLOSE at END of the region.</span>

<span style="color: #c6eaff;">If you omit CLOSE, it will reuse OPEN."</span>
  (<span style="color: #b6a0ff;">interactive</span>  <span style="color: #79a8ff;">"r\nsStart: \nsEnd: "</span>)
  (<span style="color: #b6a0ff;">save-excursion</span>
    (goto-char end)
    (<span style="color: #b6a0ff;">if</span> (string= close <span style="color: #79a8ff;">""</span>)
        (insert open)
      (insert close))
    (goto-char begin)
    (insert open)))
(global-set-key (kbd <span style="color: #79a8ff;">"M-s M-s"</span>) 'my/surround)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ca5e45" class="outline-3">
<h3 id="org8ca5e45"><span class="section-number-3">11.9</span> Untabify a buffer</h3>
<div class="outline-text-3" id="text-11-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/untabify-buffer</span> ()
  <span style="color: #c6eaff;">"Convert all tabs to spaces in the buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (untabify (point-min) (point-max)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge56f031" class="outline-3">
<h3 id="orge56f031"><span class="section-number-3">11.10</span> XML pretty print</h3>
<div class="outline-text-3" id="text-11-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/xml-pretty-print</span> ()
  <span style="color: #c6eaff;">"Reformat and indent XML."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">save-excursion</span>
    (sgml-pretty-print (point-min) (point-max))
    (indent-region (point-min) (point-max))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d21769" class="outline-3">
<h3 id="org3d21769"><span class="section-number-3">11.11</span> Yank pop forwards (Emacs&lt;28)</h3>
<div class="outline-text-3" id="text-11-11">
<p>
Don't bother tangling this if <code>emacs-version</code> &gt; 28, as Emacs 28 has <code>M-y</code> bound
to completing read of the kill ring, making this pretty pointless.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/yank-pop-forwards</span> (arg)
  <span style="color: #c6eaff;">"Cycle forwards through the kill.  Reverse `</span><span style="color: #00bcff;">yank-pop</span><span style="color: #c6eaff;">'.  With ARG."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (yank-pop (- arg)))
(global-set-key (kbd <span style="color: #79a8ff;">"C-M-y"</span>) 'my/yank-pop-forwards)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org31d523b" class="outline-2">
<h2 id="org31d523b"><span class="section-number-2">12</span> File manipulation functions</h2>
<div class="outline-text-2" id="text-12">
</div>
<div id="outline-container-org4609eeb" class="outline-3">
<h3 id="org4609eeb"><span class="section-number-3">12.1</span> Delete this file</h3>
<div class="outline-text-3" id="text-12-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/delete-this-file</span> ()
  <span style="color: #c6eaff;">"Delete the current file, and kill the buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">or</span> (buffer-file-name) (<span style="color: #dbbe5f;">error</span> <span style="color: #79a8ff;">"No file is currently being edited"</span>))
  (<span style="color: #b6a0ff;">when</span> (yes-or-no-p (format <span style="color: #79a8ff;">"Really delete '%s'?"</span>
                             (file-name-nondirectory buffer-file-name)))
    (delete-file (buffer-file-name))
    (kill-this-buffer)))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c f d"</span>) 'my/delete-this-file)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2203c33" class="outline-3">
<h3 id="org2203c33"><span class="section-number-3">12.2</span> Yank current file name to kill ring</h3>
<div class="outline-text-3" id="text-12-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/copy-file-name-to-clipboard</span> ()
  <span style="color: #c6eaff;">"Copy the current buffer file name to the clipboard."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((filename (<span style="color: #b6a0ff;">if</span> (equal major-mode 'dired-mode)
                      default-directory
                    (buffer-file-name))))
    (<span style="color: #b6a0ff;">when</span> filename
      (kill-new filename)
      (message <span style="color: #79a8ff;">"Copied buffer file name '%s' to the clipboard."</span> filename))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c f w"</span>) 'my/copy-file-name-to-clipboard)
</pre>
</div>
</div>
</div>

<div id="outline-container-org78aac18" class="outline-3">
<h3 id="org78aac18"><span class="section-number-3">12.3</span> Make backup of current file</h3>
<div class="outline-text-3" id="text-12-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/make-backup</span> ()
  <span style="color: #c6eaff;">"Make a backup copy of current file or dired marked files.</span>

<span style="color: #c6eaff;">If in dired, backup current file or marked files."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> (($fname (buffer-file-name)))
    (<span style="color: #b6a0ff;">if</span> $fname
        (<span style="color: #b6a0ff;">let</span> (($backup-name
               (concat $fname <span style="color: #79a8ff;">"."</span> (format-time-string <span style="color: #79a8ff;">"%y%m%d%H%M"</span>) <span style="color: #79a8ff;">".bak"</span>)))
          (copy-file $fname $backup-name t)
          (message (concat <span style="color: #79a8ff;">"Backup saved at: "</span> $backup-name)))
      (<span style="color: #b6a0ff;">if</span> (string-equal major-mode <span style="color: #79a8ff;">"dired-mode"</span>)
          (<span style="color: #b6a0ff;">progn</span>
            (mapc (<span style="color: #b6a0ff;">lambda</span> ($x)
                    (<span style="color: #b6a0ff;">let</span> (($backup-name
                           (concat $x <span style="color: #79a8ff;">"."</span> (format-time-string <span style="color: #79a8ff;">"%y%m%d%H%M"</span>) <span style="color: #79a8ff;">".bak"</span>)))
                      (copy-file $x $backup-name t)))
                  (dired-get-marked-files))
            (message <span style="color: #79a8ff;">"marked files backed up"</span>))
        (<span style="color: #dbbe5f;">user-error</span> <span style="color: #79a8ff;">"Buffer not file nor dired"</span>)))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/make-backup-and-save</span> ()
  <span style="color: #c6eaff;">"Backup of current file and save, or backup dired marked files.</span>
<span style="color: #c6eaff;">For detail, see `</span><span style="color: #00bcff;">my/make-backup</span><span style="color: #c6eaff;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (buffer-file-name)
      (<span style="color: #b6a0ff;">progn</span>
        (my/make-backup)
        (<span style="color: #b6a0ff;">when</span> (buffer-modified-p)
          (save-buffer)))
    (<span style="color: #b6a0ff;">progn</span>
      (my/make-backup))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c f b"</span>) 'my/make-backup-and-save)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0cef3c1" class="outline-3">
<h3 id="org0cef3c1"><span class="section-number-3">12.4</span> Rename file and buffer</h3>
<div class="outline-text-3" id="text-12-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/rename-this-file-and-buffer</span> (new-name)
  <span style="color: #c6eaff;">"Renames both current buffer and file it's visiting to NEW-NAME."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"FNew name: "</span>)
  (<span style="color: #b6a0ff;">let</span> ((name (buffer-name))
        (filename (buffer-file-name)))
    (<span style="color: #b6a0ff;">unless</span> filename
      (<span style="color: #dbbe5f;">error</span> <span style="color: #79a8ff;">"Buffer '%s' is not visiting a file!"</span> name))
    (<span style="color: #b6a0ff;">if</span> (get-buffer new-name)
        (message <span style="color: #79a8ff;">"A buffer named '%s' already exists!"</span> new-name)
      (<span style="color: #b6a0ff;">progn</span>
        (<span style="color: #b6a0ff;">when</span> (file-exists-p filename)
          (rename-file filename new-name 1))
        (rename-buffer new-name)
        (set-visited-file-name new-name)))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c f r"</span>) 'my/rename-this-file-and-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgec76440" class="outline-3">
<h3 id="orgec76440"><span class="section-number-3">12.5</span> Open current file as root</h3>
<div class="outline-text-3" id="text-12-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/sudoedit</span> (<span style="color: #f78fe7;">&amp;optional</span> arg)
  <span style="color: #c6eaff;">"Open current or ARG file as root."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">if</span> (<span style="color: #b6a0ff;">or</span> arg (not buffer-file-name))
      (find-file (concat <span style="color: #79a8ff;">"/sudo:root@localhost:"</span>
                         (read-file-name <span style="color: #79a8ff;">"Find file (as root): "</span>)))
    (find-alternate-file (concat <span style="color: #79a8ff;">"/sudo:root@localhost:"</span> buffer-file-name))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c f s"</span>) 'my/sudoedit)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0195be5" class="outline-2">
<h2 id="org0195be5"><span class="section-number-2">13</span> Miscellaneous functions</h2>
<div class="outline-text-2" id="text-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/google</span> (arg)
  <span style="color: #c6eaff;">"Googles a query or region.  With prefix ARG, wrap in quotes."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">let</span> ((query
         (<span style="color: #b6a0ff;">if</span> (region-active-p)
             (buffer-substring (region-beginning) (region-end))
           (read-string <span style="color: #79a8ff;">"Query: "</span>))))
    (<span style="color: #b6a0ff;">when</span> arg (<span style="color: #b6a0ff;">setq</span> query (concat <span style="color: #79a8ff;">"\""</span> query <span style="color: #79a8ff;">"\""</span>)))
    (browse-url
     (concat <span style="color: #79a8ff;">"http://www.google.com/search?ie=utf-8&amp;oe=utf-8&amp;q="</span> query))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-s"</span>) 'my/google)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">my/measure-time</span> (<span style="color: #f78fe7;">&amp;rest</span> body)
  <span style="color: #c6eaff;">"Measure the time it takes to evaluate BODY."</span>
  `(<span style="color: #b6a0ff;">let</span> ((time (current-time)))
     ,@body
     (message <span style="color: #79a8ff;">"%.06f"</span> (float-time (time-since time)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1146887" class="outline-2">
<h2 id="org1146887"><span class="section-number-2">14</span> Window manipulation functions</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-orgd941e6d" class="outline-3">
<h3 id="orgd941e6d"><span class="section-number-3">14.1</span> Better scrolling of other windows</h3>
<div class="outline-text-3" id="text-14-1">
<p>
This is better, since I don't need to send prefix to <code>scroll-other-window</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/scroll-other-window</span> (arg)
  <span style="color: #c6eaff;">"Scroll up other window when called with prefix."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">if</span> arg (scroll-other-window-down) (scroll-other-window)))

(global-set-key [remap scroll-other-window] 'my/scroll-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org39d0c9f" class="outline-3">
<h3 id="org39d0c9f"><span class="section-number-3">14.2</span> Kill buffer other window</h3>
<div class="outline-text-3" id="text-14-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/kill-buffer-other-window</span> ()
  <span style="color: #c6eaff;">"Kill the buffer in the last used window."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">Window selection is used because point goes to a different window if more</span>
  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">than 2 windows are present</span>
  (<span style="color: #b6a0ff;">let</span> ((current-window (selected-window))
        (other-window (get-mru-window t t t)))
    (select-window other-window)
    (kill-this-buffer)
    (select-window current-window)))
(define-key ctl-x-4-map <span style="color: #79a8ff;">"k"</span> 'my/kill-buffer-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbea548c" class="outline-3">
<h3 id="orgbea548c"><span class="section-number-3">14.3</span> Toggle focus to last window</h3>
<div class="outline-text-3" id="text-14-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/last-window</span> ()
  <span style="color: #c6eaff;">"Switch back and forth between two windows easily."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((win (get-mru-window t t t)))
    (<span style="color: #b6a0ff;">unless</span> win (<span style="color: #dbbe5f;">error</span> <span style="color: #79a8ff;">"Last window not found"</span>))
    (<span style="color: #b6a0ff;">let</span> ((frame (window-frame win)))
      (raise-frame frame)
      (select-frame frame)
      (select-window win))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w w"</span>) 'my/last-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6dd904a" class="outline-3">
<h3 id="org6dd904a"><span class="section-number-3">14.4</span> Open a buffer in another window</h3>
<div class="outline-text-3" id="text-14-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/open-buffer-other-window</span> (buffer)
  <span style="color: #c6eaff;">"Open a BUFFER in another window without switching to it."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"BBuffer: "</span>)
  (switch-to-buffer-other-window buffer)
  (other-window -1))
(define-key ctl-x-4-map <span style="color: #79a8ff;">"o"</span> 'my/open-buffer-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf1c4831" class="outline-3">
<h3 id="orgf1c4831"><span class="section-number-3">14.5</span> Switch to the previous window</h3>
<div class="outline-text-3" id="text-14-5">
<p>
This is basically <code>other-window</code> backwards.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/prev-window</span> ()
  <span style="color: #c6eaff;">"Go the previously used window, excluding other frames."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (other-window -1))
(global-set-key (kbd <span style="color: #79a8ff;">"C-x O"</span>) 'my/prev-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge74f649" class="outline-3">
<h3 id="orge74f649"><span class="section-number-3">14.6</span> Scroll lines up like Ctrl-e in Vim</h3>
<div class="outline-text-3" id="text-14-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/scroll-line-up</span> (n)
  <span style="color: #c6eaff;">"Scroll line up N lines.  Like Ctrl-e in Vim."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (scroll-up n))
(global-set-key (kbd <span style="color: #79a8ff;">"M-p"</span>) 'my/scroll-line-up)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2d89418" class="outline-3">
<h3 id="org2d89418"><span class="section-number-3">14.7</span> Scroll lines down like Ctrl-y in Vim</h3>
<div class="outline-text-3" id="text-14-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/scroll-line-down</span> (n)
  <span style="color: #c6eaff;">"Scroll line down N lines.  Ctrl-y in Vim."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (scroll-down n))
(global-set-key (kbd <span style="color: #79a8ff;">"M-n"</span>) 'my/scroll-line-down)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0cda3a0" class="outline-3">
<h3 id="org0cda3a0"><span class="section-number-3">14.8</span> Open last buffer in horizontal split</h3>
<div class="outline-text-3" id="text-14-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/hsplit-last-buffer</span> (prefix)
  <span style="color: #c6eaff;">"Split the window vertically and display the previous buffer.</span>
<span style="color: #c6eaff;">With PREFIX stay in current buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (split-window-vertically)
  (other-window 1 nil)
  (<span style="color: #b6a0ff;">if</span> (= prefix 1)
      (switch-to-next-buffer)))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c 2"</span>) 'my/hsplit-last-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1dec806" class="outline-3">
<h3 id="org1dec806"><span class="section-number-3">14.9</span> Open last buffer in vertical split</h3>
<div class="outline-text-3" id="text-14-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/vsplit-last-buffer</span> (prefix)
  <span style="color: #c6eaff;">"Split the window horizontally and display the previous buffer.</span>
<span style="color: #c6eaff;">With PREFIX stay in current buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (split-window-horizontally)
  (other-window 1 nil)
  (<span style="color: #b6a0ff;">if</span> (= prefix 1) (switch-to-next-buffer)))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c 3"</span>) 'my/vsplit-last-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb55b80d" class="outline-3">
<h3 id="orgb55b80d"><span class="section-number-3">14.10</span> Toggle vertical -&gt; horizontal splits</h3>
<div class="outline-text-3" id="text-14-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/toggle-split</span> ()
  <span style="color: #c6eaff;">"Switch window split from horizontally to vertically.</span>

<span style="color: #c6eaff;">Or vice versa.  Change right window to bottom, or change bottom</span>
<span style="color: #c6eaff;">window to right."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((done))
    (<span style="color: #b6a0ff;">dolist</span> (dirs '((right . down) (down . right)))
      (<span style="color: #b6a0ff;">unless</span> done
        (<span style="color: #b6a0ff;">let*</span> ((win (selected-window))
               (nextdir (car dirs))
               (neighbour-dir (cdr dirs))
               (next-win (windmove-find-other-window nextdir win))
               (neighbour1 (windmove-find-other-window neighbour-dir win))
               (neighbour2 (<span style="color: #b6a0ff;">if</span> next-win (<span style="color: #b6a0ff;">with-selected-window</span> next-win
                                          (windmove-find-other-window neighbour-dir next-win)))))
          <span style="color: #a8a8a8;">;;</span><span style="color: #a8a8a8;">(message "win: %s\nnext-win: %s\nneighbour1: %s\nneighbour2:%s" win next-win neighbour1 neighbour2)</span>
          (<span style="color: #b6a0ff;">setq</span> done (<span style="color: #b6a0ff;">and</span> (eq neighbour1 neighbour2)
                          (not (eq (minibuffer-window) next-win))))
          (<span style="color: #b6a0ff;">if</span> done
              (<span style="color: #b6a0ff;">let*</span> ((other-buf (window-buffer next-win)))
                (delete-window next-win)
                (<span style="color: #b6a0ff;">if</span> (eq nextdir 'right)
                    (split-window-vertically)
                  (split-window-horizontally))
                (set-window-buffer (windmove-find-other-window neighbour-dir) other-buf))))))))
(define-key ctl-x-4-map <span style="color: #79a8ff;">"s"</span> 'my/toggle-split)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf8e047e" class="outline-3">
<h3 id="orgf8e047e"><span class="section-number-3">14.11</span> Transpose windows</h3>
<div class="outline-text-3" id="text-14-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/transpose-windows</span> (arg)
  <span style="color: #c6eaff;">"Transpose windows.  Use prefix ARG to transpose in the other direction."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">if</span> (not (&gt; (count-windows) 1))
      (message <span style="color: #79a8ff;">"You can't rotate a single window!"</span>)
    (<span style="color: #b6a0ff;">let*</span> ((rotate-times (prefix-numeric-value arg))
           (direction (<span style="color: #b6a0ff;">if</span> (<span style="color: #b6a0ff;">or</span> (&lt; rotate-times 0) (equal arg '(4)))
                          'reverse 'identity)))
      (<span style="color: #b6a0ff;">dotimes</span> (_ (abs rotate-times))
        (<span style="color: #b6a0ff;">dotimes</span> (i (- (count-windows) 1))
          (<span style="color: #b6a0ff;">let*</span> ((w1 (elt (funcall direction (window-list)) i))
                 (w2 (elt (funcall direction (window-list)) (+ i 1)))
                 (b1 (window-buffer w1))
                 (b2 (window-buffer w2))
                 (s1 (window-start w1))
                 (s2 (window-start w2))
                 (p1 (window-point w1))
                 (p2 (window-point w2)))
            (set-window-buffer-start-and-point w1 b2 s2 p2)
            (set-window-buffer-start-and-point w2 b1 s1 p1)))))))
(define-key ctl-x-4-map <span style="color: #79a8ff;">"t"</span> 'my/transpose-windows)
</pre>
</div>
</div>
</div>

<div id="outline-container-org61ad0a1" class="outline-3">
<h3 id="org61ad0a1"><span class="section-number-3">14.12</span> Windmove keybindings</h3>
<div class="outline-text-3" id="text-14-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(autoload 'windmove-left <span style="color: #79a8ff;">"windmove"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w b"</span>) 'windmove-left)
(autoload 'windmove-right <span style="color: #79a8ff;">"windmove"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w f"</span>) 'windmove-right)
(autoload 'windmove-up <span style="color: #79a8ff;">"windmove"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w p"</span>) 'windmove-up)
(autoload 'windmove-down <span style="color: #79a8ff;">"windmove"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w n"</span>) 'windmove-down)
(<span style="color: #b6a0ff;">with-eval-after-load</span> 'windmove
  (<span style="color: #b6a0ff;">setq</span> windmove-wrap-around t)
  (message <span style="color: #79a8ff;">"Lazy loaded windmove :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9cf2697" class="outline-3">
<h3 id="org9cf2697"><span class="section-number-3">14.13</span> Winner mode</h3>
<div class="outline-text-3" id="text-14-13">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Startup-Summary.html#Startup-Summary">Startup Summary</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'window-setup-hook 'winner-mode)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w u"</span>) 'winner-undo)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w r"</span>) 'winner-redo)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9f568ed" class="outline-2">
<h2 id="org9f568ed"><span class="section-number-2">15</span> Emacs built in packages</h2>
<div class="outline-text-2" id="text-15">
</div>
<div id="outline-container-org3db2437" class="outline-3">
<h3 id="org3db2437"><span class="section-number-3">15.1</span> Auto-revert</h3>
<div class="outline-text-3" id="text-15-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'global-auto-revert-mode) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">reload if file changed on disk</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3a031d1" class="outline-3">
<h3 id="org3a031d1"><span class="section-number-3">15.2</span> Dabbrev</h3>
<div class="outline-text-3" id="text-15-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dabbrev
  (<span style="color: #b6a0ff;">setq</span> abbrev-file-name (concat user-emacs-directory <span style="color: #79a8ff;">"abbrevs"</span>))
  (<span style="color: #b6a0ff;">setq</span> save-abbrevs 'silently)
  (<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
    (<span style="color: #b6a0ff;">setq</span> abbrev-suggest t))
  (<span style="color: #b6a0ff;">setq</span> dabbrev-abbrev-char-regexp <span style="color: #79a8ff;">"\\sw</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">|</span><span style="color: #79a8ff;">\\s_"</span>)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-abbrev-skip-leading-regexp <span style="color: #79a8ff;">"[$*/=']"</span>)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-backward-only nil)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-case-distinction 'case-replace)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-case-fold-search t)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-case-replace 'case-replace)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-check-other-buffers t)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-eliminate-newlines t)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-upcase-means-case-search t)
  (message <span style="color: #79a8ff;">"Lazy loaded dabbrev :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc4fb0ae" class="outline-3">
<h3 id="orgc4fb0ae"><span class="section-number-3">15.3</span> Dired</h3>
<div class="outline-text-3" id="text-15-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dired
<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/dired-get-size</span> ()
    <span style="color: #c6eaff;">"Get cumlative size of marked or current item."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (<span style="color: #b6a0ff;">let</span> ((files (dired-get-marked-files)))
      (<span style="color: #b6a0ff;">with-temp-buffer</span>
        (apply 'call-process <span style="color: #79a8ff;">"/usr/bin/du"</span> nil t nil <span style="color: #79a8ff;">"-sch"</span> files)
        (message <span style="color: #79a8ff;">"Size of all marked files: %s"</span>
                 (<span style="color: #b6a0ff;">progn</span>
                   (re-search-backward <span style="color: #79a8ff;">"</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">(</span><span style="color: #79a8ff;">^[0-9.,]+[A-Za-z]+</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">)</span><span style="color: #79a8ff;">.*total$"</span>)
                   (match-string 1))))))
  (define-key dired-mode-map <span style="color: #79a8ff;">"?"</span> 'my/dired-get-size)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/dired-beginning-of-buffer</span> ()
    <span style="color: #c6eaff;">"Go to first file in directory."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (goto-char (point-min))
    (dired-next-line 2))
  (define-key dired-mode-map [remap beginning-of-buffer] 'my/dired-beginning-of-buffer)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/dired-end-of-buffer</span> ()
    <span style="color: #c6eaff;">"Go to last file in directory."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (goto-char (point-max))
    (dired-next-line -1))
  (define-key dired-mode-map [remap end-of-buffer] 'my/dired-end-of-buffer)

  (autoload 'dired-omit-mode <span style="color: #79a8ff;">"dired-x"</span> nil t)
  (autoload 'dired-omit-files <span style="color: #79a8ff;">"dired-x"</span> nil t)
  (<span style="color: #b6a0ff;">setq</span> dired-omit-files <span style="color: #79a8ff;">"\\`[.]?#</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">|</span><span style="color: #79a8ff;">\\`[.][.]?\\'</span><span style="color: #abab00; font-weight: bold;">\\</span><span style="color: #e7a59a; font-weight: bold;">|</span><span style="color: #79a8ff;">^\\..+$"</span>)

  (<span style="color: #b6a0ff;">when</span> (eq system-type 'berkeley-unix) (<span style="color: #b6a0ff;">setq</span> dired-listing-switches <span style="color: #79a8ff;">"-alhpL"</span>))

  (<span style="color: #b6a0ff;">when</span> (eq system-type 'gnu/linux)
    (<span style="color: #b6a0ff;">setq</span> dired-listing-switches
          <span style="color: #79a8ff;">"-AGFhlv --group-directories-first --time-style=long-iso"</span>))

  (<span style="color: #b6a0ff;">setq</span> dired-dwim-target t
        delete-by-moving-to-trash t
        dired-use-ls-dired nil
        dired-recursive-copies 'always
        dired-recursive-deletes 'always)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/dired-up-directory</span> ()
    (<span style="color: #b6a0ff;">interactive</span>)
    (find-alternate-file <span style="color: #79a8ff;">".."</span>))
  (define-key dired-mode-map <span style="color: #79a8ff;">"b"</span> 'my/dired-up-directory)

  (define-key dired-mode-map <span style="color: #79a8ff;">"f"</span> 'dired-find-alternate-file)
  (define-key dired-mode-map <span style="color: #79a8ff;">"c"</span> 'dired-do-compress-to)
  (define-key dired-mode-map <span style="color: #79a8ff;">")"</span> 'dired-omit-mode)
  (message <span style="color: #79a8ff;">"Lazy loaded dired :-)"</span>))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'dired-mode-hook 'hl-line-mode)
</pre>
</div>
</div>

<div id="outline-container-orga7da91c" class="outline-4">
<h4 id="orga7da91c"><span class="section-number-4">15.3.1</span> Dired-X Jump (Emacs&lt;28)</h4>
<div class="outline-text-4" id="text-15-3-1">
<p>
Has to come outside of with-eval-after-load otherwise we have no dired-jump.
</p>

<p>
This is in <code>dired</code> not <code>dired-jump</code> in Emacs 28, which means we no longer have
to autoload these and bind the default keys prior to <code>dired</code> being loaded.
</p>

<p>
The default keys are <code>C-x C-j</code> and <code>C-x 4 C-j</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">This is in `</span><span style="color: #00bcff;">dired</span><span style="color: #a8a8a8;">' not `</span><span style="color: #00bcff;">dired-jump</span><span style="color: #a8a8a8;">' in Emacs 28</span>
(<span style="color: #b6a0ff;">when</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
  (autoload 'dired-jump <span style="color: #79a8ff;">"dired-x"</span> nil t)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x C-j"</span>) 'dired-jump)
  (autoload 'dired-jump-other-window <span style="color: #79a8ff;">"dired-x"</span> nil t)
  (define-key ctl-x-4-map <span style="color: #79a8ff;">"C-j"</span> 'dired-jump-other-window))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3afbf47" class="outline-4">
<h4 id="org3afbf47"><span class="section-number-4">15.3.2</span> Dired AUX</h4>
<div class="outline-text-4" id="text-15-3-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dired-aux
  (<span style="color: #b6a0ff;">setq</span> dired-isearch-filenames 'dwim)
  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">The following variables were introduced in Emacs 27.1</span>
  (<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27.1"</span>)
    (<span style="color: #b6a0ff;">setq</span> dired-create-destination-dirs 'ask)
    (<span style="color: #b6a0ff;">setq</span> dired-vc-rename-file t))
  (message <span style="color: #79a8ff;">"Lazy loaded dired-aux :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5c45296" class="outline-4">
<h4 id="org5c45296"><span class="section-number-4">15.3.3</span> Find Dired</h4>
<div class="outline-text-4" id="text-15-3-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'find-dired
  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">(setq find-ls-option '("-print0 | xargs -0 ls -ld" . "-ld"))</span>
  (<span style="color: #b6a0ff;">setq</span> find-ls-option
        '(<span style="color: #79a8ff;">"-ls"</span> . <span style="color: #79a8ff;">"-AGFhlv --group-directories-first --time-style=long-iso"</span>))
  (<span style="color: #b6a0ff;">setq</span> find-name-arg <span style="color: #79a8ff;">"-iname"</span>)
  (message <span style="color: #79a8ff;">"Lazy loaded find-dired :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgccc4cb3" class="outline-4">
<h4 id="orgccc4cb3"><span class="section-number-4">15.3.4</span> Writeable Dired</h4>
<div class="outline-text-4" id="text-15-3-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'wdired
  (<span style="color: #b6a0ff;">setq</span> wdired-allow-to-change-permissions t)
  (<span style="color: #b6a0ff;">setq</span> wdired-create-parent-directories t)
  (message <span style="color: #79a8ff;">"Lazy loaded wdired :-)"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga733563" class="outline-3">
<h3 id="orga733563"><span class="section-number-3">15.4</span> Doc View</h3>
<div class="outline-text-3" id="text-15-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'doc-view-mode
  (<span style="color: #b6a0ff;">setq</span> doc-view-continuous t)
  (<span style="color: #b6a0ff;">setq</span> doc-view-resolution 300)
  (message <span style="color: #79a8ff;">"Lazy loaded doc-view-mode :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1726200" class="outline-3">
<h3 id="org1726200"><span class="section-number-3">15.5</span> Ediff</h3>
<div class="outline-text-3" id="text-15-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'ediff
  (<span style="color: #b6a0ff;">setq</span> ediff-diff-options <span style="color: #79a8ff;">"-w"</span>)
  (<span style="color: #b6a0ff;">setq</span> ediff-keep-variants nil)
  (<span style="color: #b6a0ff;">setq</span> ediff-make-buffers-readonly-at-startup nil)
  (<span style="color: #b6a0ff;">setq</span> ediff-merge-revisions-with-ancestor t)
  (<span style="color: #b6a0ff;">setq</span> ediff-show-clashes-only t)
  (<span style="color: #b6a0ff;">setq</span> ediff-split-window-function 'split-window-horizontally)
  (<span style="color: #b6a0ff;">setq</span> ediff-window-setup-function 'ediff-setup-windows-plain)
  (add-hook 'ediff-after-quit-hook-internal 'winner-undo)

  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">https://emacs.stackexchange.com/a/24602</span>
  <span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">disable-y-or-n-p</span> (orig-fun <span style="color: #f78fe7;">&amp;rest</span> args)
    <span style="color: #c6eaff;">"Advise ORIG-FUN with ARGS so it dynamically rebinds `</span><span style="color: #00bcff;">y-or-n-p</span><span style="color: #c6eaff;">'."</span>
    (<span style="color: #b6a0ff;">cl-letf</span> (((symbol-function 'y-or-n-p) (<span style="color: #b6a0ff;">lambda</span> () t)))
      (apply orig-fun args)))

  (advice-add 'ediff-quit <span style="color: #f78fe7;">:around</span> #'disable-y-or-n-p)
  (message <span style="color: #79a8ff;">"Lazy loaded ediff :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgee24b47" class="outline-3">
<h3 id="orgee24b47"><span class="section-number-3">15.6</span> Electric</h3>
<div class="outline-text-3" id="text-15-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'electric-indent-mode)
(add-hook 'after-init-hook 'electric-pair-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org98a38a3" class="outline-3">
<h3 id="org98a38a3"><span class="section-number-3">15.7</span> ERC</h3>
<div class="outline-text-3" id="text-15-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'erc
  (<span style="color: #b6a0ff;">setq</span> erc-autojoin-channels-alist '((<span style="color: #79a8ff;">"freenode.net"</span> <span style="color: #79a8ff;">"#emacs"</span>)))
  (<span style="color: #b6a0ff;">setq</span> erc-fill-column 80)
  (<span style="color: #b6a0ff;">setq</span> erc-hide-list '(<span style="color: #79a8ff;">"JOIN"</span> <span style="color: #79a8ff;">"PART"</span> <span style="color: #79a8ff;">"QUIT"</span>))
  (<span style="color: #b6a0ff;">setq</span> erc-input-line-position -2)
  (<span style="color: #b6a0ff;">setq</span> erc-keywords '(<span style="color: #79a8ff;">"knowayback"</span>))
  (<span style="color: #b6a0ff;">setq</span> erc-nick <span style="color: #79a8ff;">"knowayback"</span>)
  (<span style="color: #b6a0ff;">setq</span> erc-prompt-for-password t)
  (<span style="color: #b6a0ff;">setq</span> erc-track-enable-keybindings t)
  (message <span style="color: #79a8ff;">"Lazy loaded erc :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org43369c5" class="outline-3">
<h3 id="org43369c5"><span class="section-number-3">15.8</span> Eshell</h3>
<div class="outline-text-3" id="text-15-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'eshell
<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/eshell-complete-recent-dir</span> (<span style="color: #f78fe7;">&amp;optional</span> arg)
    <span style="color: #c6eaff;">"Switch to a recent `</span><span style="color: #00bcff;">eshell</span><span style="color: #c6eaff;">' directory using completion.</span>
<span style="color: #c6eaff;">With \\[</span><span style="color: #00bcff;">universal-argument</span><span style="color: #c6eaff;">] also open the directory in a `</span><span style="color: #00bcff;">dired</span><span style="color: #c6eaff;">'</span>
<span style="color: #c6eaff;">buffer."</span>
    (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
    (<span style="color: #b6a0ff;">let*</span> ((dirs (ring-elements eshell-last-dir-ring))
           (dir (completing-read <span style="color: #79a8ff;">"Switch to recent dir: "</span> dirs nil t)))
      (insert dir)
      (eshell-send-input)
      (<span style="color: #b6a0ff;">when</span> arg
        (dired dir))))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/eshell-complete-history</span> ()
    <span style="color: #c6eaff;">"Insert element from `</span><span style="color: #00bcff;">eshell</span><span style="color: #c6eaff;">' history using completion."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (<span style="color: #b6a0ff;">let</span> ((hist (ring-elements eshell-history-ring)))
      (insert
       (completing-read <span style="color: #79a8ff;">"Input history: "</span> hist nil t))))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/eshell-prompt</span> ()
    <span style="color: #c6eaff;">"Custom eshell prompt."</span>
    (concat
     (propertize (user-login-name) 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"green"</span> ))
     (propertize <span style="color: #79a8ff;">"@"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"yellow"</span>))
     (propertize (system-name) `face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"green"</span>))
     (propertize <span style="color: #79a8ff;">":"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"yellow"</span>))
     (<span style="color: #b6a0ff;">if</span> (string= (eshell/pwd) (getenv <span style="color: #79a8ff;">"HOME"</span>))
         (propertize <span style="color: #79a8ff;">"~"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"magenta"</span>))
       (propertize (eshell/basename (eshell/pwd)) 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"magenta"</span>)))
     <span style="color: #79a8ff;">"\n"</span>
     (<span style="color: #b6a0ff;">if</span> (= (user-uid) 0)
         (propertize <span style="color: #79a8ff;">"#"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"red"</span>))
       (propertize <span style="color: #79a8ff;">"$"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"yellow"</span>)))
     (propertize <span style="color: #79a8ff;">" "</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"white"</span>))))

  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">https://www.emacswiki.org/emacs/EshellPrompt</span>
  (<span style="color: #b6a0ff;">setq</span> eshell-cd-on-directory t
        eshell-destroy-buffer-when-process-dies t
        eshell-highlight-prompt nil
        eshell-hist-ignoredups t
        eshell-history-size 4096
        eshell-ls-use-colors t
        eshell-prefer-lisp-functions t
        eshell-prefer-lisp-variables t
        eshell-prompt-regexp <span style="color: #79a8ff;">"^[</span><span style="color: #eecc00;">^</span><span style="color: #79a8ff;">#$\n]*[#$] "</span>
        eshell-prompt-function 'my/eshell-prompt
        eshell-review-quick-commands nil
        eshell-save-history-on-exit t
        eshell-smart-space-goes-to-end t
        eshell-where-to-jump 'begin)

  (add-to-list 'eshell-modules-list 'eshell-tramp) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">no sudo password with ~/.authinfo</span>
  (add-hook 'eshell-preoutput-filter-functions 'ansi-color-apply)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/eshell-keys</span>()
    (define-key eshell-mode-map (kbd <span style="color: #79a8ff;">"M-r"</span>) 'my/eshell-complete-history)
    (define-key eshell-mode-map (kbd <span style="color: #79a8ff;">"C-="</span>) 'my/eshell-complete-recent-dir))

  (add-hook 'eshell-mode-hook 'my/eshell-keys)
  (message <span style="color: #79a8ff;">"Lazy loaded eshell :-)"</span>))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/eshell-other-window</span> ()
  <span style="color: #c6eaff;">"Open an `</span><span style="color: #00bcff;">eshell</span><span style="color: #c6eaff;">' in another window."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (eshell))

(autoload 'eshell <span style="color: #79a8ff;">"eshell"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c e"</span>) 'eshell)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c 4 e"</span>) 'my/eshell-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge19d6f8" class="outline-3">
<h3 id="orge19d6f8"><span class="section-number-3">15.9</span> Gnus</h3>
<div class="outline-text-3" id="text-15-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'gnus
  (<span style="color: #b6a0ff;">setq</span> gnus-init-file <span style="color: #79a8ff;">"~/.emacs.d/init.el"</span>)
  (<span style="color: #b6a0ff;">setq</span> gnus-home-directory <span style="color: #79a8ff;">"~/.emacs.d/"</span>)
  (<span style="color: #b6a0ff;">setq</span> message-directory <span style="color: #79a8ff;">"~/.emacs.d/mail"</span>)
  (<span style="color: #b6a0ff;">setq</span> gnus-directory <span style="color: #79a8ff;">"~/.emacs.d/news"</span>)
  (<span style="color: #b6a0ff;">setq</span> nnfolder-directory <span style="color: #79a8ff;">"~/.emacs.d/mail/archive"</span>)
  (<span style="color: #b6a0ff;">setq</span> gnus-use-full-window nil)
  (<span style="color: #b6a0ff;">setq</span> gnus-select-method '(nntp <span style="color: #79a8ff;">"news.gwene.org"</span>))
  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">(setq gnus-secondary-select-methods '((nntp "news.gnus.org")))</span>
  (<span style="color: #b6a0ff;">setq</span> gnus-summary-thread-gathering-function 'gnus-gather-threads-by-subject)
  (<span style="color: #b6a0ff;">setq</span> gnus-thread-hide-subtree t)
  (<span style="color: #b6a0ff;">setq</span> gnus-thread-ignore-subject t)
  (message <span style="color: #79a8ff;">"Lazy loaded gnus :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org116ce8d" class="outline-3">
<h3 id="org116ce8d"><span class="section-number-3">15.10</span> Highlight changes</h3>
<div class="outline-text-3" id="text-15-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> highlight-changes-visibility-initial-state nil)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c h n"</span>) 'highlight-changes-next-change)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c h p"</span>) 'highlight-changes-previous-change)
(add-hook 'emacs-startup-hook 'global-highlight-changes-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgedb48bd" class="outline-3">
<h3 id="orgedb48bd"><span class="section-number-3">15.11</span> Hippie Expand</h3>
<div class="outline-text-3" id="text-15-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/hippie-expand-completions</span> (<span style="color: #f78fe7;">&amp;optional</span> hippie-expand-function)
  <span style="color: #c6eaff;">"Return the full list of completions generated by HIPPIE-EXPAND-FUNCTION.</span>
<span style="color: #c6eaff;">The optional argument can be generated with `</span><span style="color: #00bcff;">make-hippie-expand-function</span><span style="color: #c6eaff;">'."</span>
  (<span style="color: #b6a0ff;">let</span> ((this-command 'my/hippie-expand-completions)
        (last-command last-command)
        (buffer-modified (buffer-modified-p))
        (hippie-expand-function (<span style="color: #b6a0ff;">or</span> hippie-expand-function 'hippie-expand)))
    (<span style="color: #b6a0ff;">cl-flet</span> ((ding)) <span style="color: #a8a8a8;">; </span><span style="color: #a8a8a8;">avoid the (ding) when hippie-expand exhausts its options.</span>
      (<span style="color: #b6a0ff;">while</span> (<span style="color: #b6a0ff;">progn</span>
               (funcall hippie-expand-function nil)
               (<span style="color: #b6a0ff;">setq</span> last-command 'my/hippie-expand-completions)
               (not (equal he-num -1)))))
    <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">Evaluating the completions modifies the buffer, however we will finish</span>
    <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">up in the same state that we began.</span>
    (set-buffer-modified-p buffer-modified)
    <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">Provide the options in the order in which they are normally generated.</span>
    (delete he-search-string (reverse he-tried-table))))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/hippie-complete-with</span> (hippie-expand-function)
  <span style="color: #c6eaff;">"Offer `</span><span style="color: #00bcff;">completing-read</span><span style="color: #c6eaff;">' using the specified HIPPIE-EXPAND-FUNCTION."</span>
  (<span style="color: #b6a0ff;">let*</span> ((options (my/hippie-expand-completions hippie-expand-function))
         (selection (<span style="color: #b6a0ff;">and</span> options (completing-read <span style="color: #79a8ff;">"Completions: "</span> options))))
    (<span style="color: #b6a0ff;">if</span> selection
        (he-substitute-string selection t)
      (message <span style="color: #79a8ff;">"No expansion found"</span>))))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/hippie-expand-completing-read</span> ()
  <span style="color: #c6eaff;">"Offer `</span><span style="color: #00bcff;">completing-read</span><span style="color: #c6eaff;">' for the word at point."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (my/hippie-complete-with 'hippie-expand))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c /"</span>) 'my/hippie-expand-completing-read)

(global-set-key (kbd <span style="color: #79a8ff;">"M-/"</span>) 'hippie-expand)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf77f530" class="outline-3">
<h3 id="orgf77f530"><span class="section-number-3">15.12</span> Icomplete</h3>
<div class="outline-text-3" id="text-15-12">
<p>
Turn on <code>fido-mode</code> if we are on Emacs 27+
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">if</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27"</span>)
    (icomplete-mode)
  (fido-mode))
</pre>
</div>
</div>

<div id="outline-container-org05f6715" class="outline-4">
<h4 id="org05f6715"><span class="section-number-4">15.12.1</span> Change completion styles</h4>
<div class="outline-text-4" id="text-15-12-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/icomplete-styles</span> ()
  <span style="color: #c6eaff;">"Set icomplete styles based on Emacs version."</span>
  (<span style="color: #b6a0ff;">if</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27"</span>)
      (<span style="color: #b6a0ff;">setq-local</span> completion-styles '(initials partial-completion substring basic))
    (<span style="color: #b6a0ff;">setq-local</span> completion-styles '(initials partial-completion flex substring basic))))
(add-hook 'icomplete-minibuffer-setup-hook 'my/icomplete-styles)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgff3ebfa" class="outline-4">
<h4 id="orgff3ebfa"><span class="section-number-4">15.12.2</span> Icomplete settings</h4>
<div class="outline-text-4" id="text-15-12-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> icomplete-delay-completions-threshold 100)
(<span style="color: #b6a0ff;">setq</span> icomplete-max-delay-chars 2)
(<span style="color: #b6a0ff;">setq</span> icomplete-compute-delay 0.2)
(<span style="color: #b6a0ff;">setq</span> icomplete-show-matches-on-no-input t)
(<span style="color: #b6a0ff;">setq</span> icomplete-hide-common-prefix nil)
(<span style="color: #b6a0ff;">setq</span> icomplete-prospects-height 1)
<span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">(setq icomplete-separator "\n")</span>
(<span style="color: #b6a0ff;">setq</span> icomplete-separator (propertize <span style="color: #79a8ff;">" &#183; "</span> 'face 'shadow))
(<span style="color: #b6a0ff;">setq</span> icomplete-with-completion-tables t)
(<span style="color: #b6a0ff;">setq</span> icomplete-tidy-shadowed-file-names t)
(<span style="color: #b6a0ff;">setq</span> icomplete-in-buffer t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org239c6cf" class="outline-4">
<h4 id="org239c6cf"><span class="section-number-4">15.12.3</span> Icomplete keybindings</h4>
<div class="outline-text-4" id="text-15-12-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27"</span>)
  (define-key icomplete-minibuffer-map (kbd <span style="color: #79a8ff;">"C-j"</span>) 'icomplete-fido-exit))
(define-key icomplete-minibuffer-map (kbd <span style="color: #79a8ff;">"M-j"</span>) 'exit-minibuffer)
(define-key icomplete-minibuffer-map (kbd <span style="color: #79a8ff;">"C-n"</span>) 'icomplete-forward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #79a8ff;">"C-p"</span>) 'icomplete-backward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #79a8ff;">"&lt;up&gt;"</span>) 'icomplete-backward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #79a8ff;">"&lt;down&gt;"</span>) 'icomplete-forward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #79a8ff;">"&lt;left&gt;"</span>) 'icomplete-backward-completions)
(define-key icomplete-minibuffer-map (kbd <span style="color: #79a8ff;">"&lt;right&gt;"</span>) 'icomplete-forward-completions)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org22b059b" class="outline-3">
<h3 id="org22b059b"><span class="section-number-3">15.13</span> Imenu</h3>
<div class="outline-text-3" id="text-15-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'imenu
  (<span style="color: #b6a0ff;">setq</span> imenu-auto-rescan t)
  (<span style="color: #b6a0ff;">setq</span> imenu-auto-rescan-maxout 600000)
  (<span style="color: #b6a0ff;">setq</span> imenu-eager-completion-buffer t)
  (<span style="color: #b6a0ff;">setq</span> imenu-level-separator <span style="color: #79a8ff;">"/"</span>)
  (<span style="color: #b6a0ff;">setq</span> imenu-max-item-length 100)
  (<span style="color: #b6a0ff;">setq</span> imenu-space-replacement <span style="color: #79a8ff;">" "</span>)
  (<span style="color: #b6a0ff;">setq</span> imenu-use-markers t)
  (<span style="color: #b6a0ff;">setq</span> imenu-use-popup-menu nil)
  (message <span style="color: #79a8ff;">"Lazy loaded imenu :-)"</span>))

(autoload 'imenu <span style="color: #79a8ff;">"imenu"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c i"</span>) 'imenu)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf09e695" class="outline-3">
<h3 id="orgf09e695"><span class="section-number-3">15.14</span> Isearch</h3>
<div class="outline-text-3" id="text-15-14">
</div>
<div id="outline-container-orgd0031df" class="outline-4">
<h4 id="orgd0031df"><span class="section-number-4">15.14.1</span> Isearch exit</h4>
<div class="outline-text-4" id="text-15-14-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"> <span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/isearch-exit</span> ()
  <span style="color: #c6eaff;">"Move point to the start of the matched string."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">when</span> (eq isearch-forward t)
    (goto-char isearch-other-end))
  (isearch-exit))
(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"RET"</span>) 'my/isearch-exit)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcab872a" class="outline-4">
<h4 id="orgcab872a"><span class="section-number-4">15.14.2</span> Isearch Abort DWIM</h4>
<div class="outline-text-4" id="text-15-14-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/isearch-abort-dwim</span> ()
  <span style="color: #c6eaff;">"Delete failed `</span><span style="color: #00bcff;">isearch</span><span style="color: #c6eaff;">' input, single char, or cancel search.</span>

<span style="color: #c6eaff;">This is a modified variant of `</span><span style="color: #00bcff;">isearch-abort</span><span style="color: #c6eaff;">' that allows us to</span>
<span style="color: #c6eaff;">perform the following, based on the specifics of the case: (i)</span>
<span style="color: #c6eaff;">delete the entirety of a non-matching part, when present; (ii)</span>
<span style="color: #c6eaff;">delete a single character, when possible; (iii) exit current</span>
<span style="color: #c6eaff;">search if no character is present and go back to point where the</span>
<span style="color: #c6eaff;">search started."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (eq (length isearch-string) 0)
      (isearch-cancel)
    (isearch-del-char)
    (<span style="color: #b6a0ff;">while</span> (<span style="color: #b6a0ff;">or</span> (not isearch-success) isearch-error)
      (isearch-pop-state)))
  (isearch-update))
(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"&lt;backspace&gt;"</span>) 'my/isearch-abort-dwim)
</pre>
</div>
</div>
</div>

<div id="outline-container-org282a595" class="outline-4">
<h4 id="org282a595"><span class="section-number-4">15.14.3</span> Copy to isearch</h4>
<div class="outline-text-4" id="text-15-14-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/copy-to-isearch</span> ()
  <span style="color: #c6eaff;">"Copy up to the search match when searching forward.</span>

<span style="color: #c6eaff;">When searching backward, copy to the start of the search match."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (my/isearch-exit)
  (call-interactively 'kill-ring-save)
  (exchange-point-and-mark))
(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"M-w"</span>) 'my/copy-to-isearch)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdbdbe1b" class="outline-4">
<h4 id="orgdbdbe1b"><span class="section-number-4">15.14.4</span> Kill to isearch</h4>
<div class="outline-text-4" id="text-15-14-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/kill-to-isearch</span> ()
  <span style="color: #c6eaff;">"Kill up to the search match when searching forward.</span>

<span style="color: #c6eaff;">When searching backward, kill to the beginning of the match."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (my/isearch-exit)
  (call-interactively 'kill-region))
(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"C-M-w"</span>) 'my/kill-to-isearch)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf785e65" class="outline-4">
<h4 id="orgf785e65"><span class="section-number-4">15.14.5</span> Emacs 27+ Settings</h4>
<div class="outline-text-4" id="text-15-14-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27.1"</span>)
  (<span style="color: #b6a0ff;">setq</span> isearch-allow-scroll 'unlimited)
  (<span style="color: #b6a0ff;">setq</span> isearch-yank-on-move 't)
  (<span style="color: #b6a0ff;">setq</span> isearch-lazy-count t)
  (<span style="color: #b6a0ff;">setq</span> lazy-count-prefix-format nil)
  (<span style="color: #b6a0ff;">setq</span> lazy-count-suffix-format <span style="color: #79a8ff;">" (%s/%s)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b2fcfd" class="outline-4">
<h4 id="org7b2fcfd"><span class="section-number-4">15.14.6</span> Settings</h4>
<div class="outline-text-4" id="text-15-14-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> search-highlight t)
(<span style="color: #b6a0ff;">setq</span> search-whitespace-regexp <span style="color: #79a8ff;">".*?"</span>)
(<span style="color: #b6a0ff;">setq</span> isearch-lax-whitespace t)
(<span style="color: #b6a0ff;">setq</span> isearch-regexp-lax-whitespace nil)
(<span style="color: #b6a0ff;">setq</span> isearch-lazy-highlight t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3617f80" class="outline-4">
<h4 id="org3617f80"><span class="section-number-4">15.14.7</span> Keybindings</h4>
<div class="outline-text-4" id="text-15-14-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"M-/"</span>) 'isearch-complete)
(define-key minibuffer-local-isearch-map (kbd <span style="color: #79a8ff;">"M-/"</span>) 'isearch-complete-edit)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-r"</span>) 'isearch-backward-regexp)
(global-set-key (kbd <span style="color: #79a8ff;">"C-s"</span>) 'isearch-forward-regexp)
(global-set-key (kbd <span style="color: #79a8ff;">"M-s b"</span>) 'multi-isearch-buffers-regexp)
(global-set-key (kbd <span style="color: #79a8ff;">"M-s f"</span>) 'multi-isearch-files-regexp)
(global-set-key (kbd <span style="color: #79a8ff;">"M-s M-o"</span>) 'multi-occur)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6cdfec8" class="outline-3">
<h3 id="org6cdfec8"><span class="section-number-3">15.15</span> Minibuffer</h3>
<div class="outline-text-3" id="text-15-15">
</div>
<div id="outline-container-orgc1c4391" class="outline-4">
<h4 id="orgc1c4391"><span class="section-number-4">15.15.1</span> Save history mode</h4>
<div class="outline-text-4" id="text-15-15-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'savehist
  (<span style="color: #b6a0ff;">setq</span> savehist-additional-variables '(kill-ring search-ring regexp-search-ring))
  (<span style="color: #b6a0ff;">setq</span> savehist-save-minibuffer-history 1)
  (message <span style="color: #79a8ff;">"Lazy loaded savehist :-)"</span>))
(add-hook 'after-init-hook 'savehist-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb31b317" class="outline-4">
<h4 id="orgb31b317"><span class="section-number-4">15.15.2</span> Completion framework settings</h4>
<div class="outline-text-4" id="text-15-15-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> completion-category-defaults nil)
(<span style="color: #b6a0ff;">setq</span> completion-cycle-threshold 3)
(<span style="color: #b6a0ff;">setq</span> completion-flex-nospace nil)
(<span style="color: #b6a0ff;">setq</span> completion-ignore-case t)
(<span style="color: #b6a0ff;">setq</span> completion-pcm-complete-word-inserts-delimiters t)
(<span style="color: #b6a0ff;">setq</span> completion-pcm-word-delimiters <span style="color: #79a8ff;">"-_./:| "</span>)
(<span style="color: #b6a0ff;">setq</span> completion-show-help nil)
(<span style="color: #b6a0ff;">setq</span> completions-detailed t)
(<span style="color: #b6a0ff;">setq</span> completions-format 'one-column)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge3db5e7" class="outline-4">
<h4 id="orge3db5e7"><span class="section-number-4">15.15.3</span> Misc Minibuffer settings</h4>
<div class="outline-text-4" id="text-15-15-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> enable-recursive-minibuffers t)
(<span style="color: #b6a0ff;">setq</span> file-name-shadow-mode 1)
(<span style="color: #b6a0ff;">setq</span> minibuffer-depth-indicate-mode 1)
(<span style="color: #b6a0ff;">setq</span> minibuffer-eldef-shorten-default t)
(<span style="color: #b6a0ff;">setq</span> minibuffer-electric-default-mode 1)
(<span style="color: #b6a0ff;">setq</span> read-answer-short t)
(<span style="color: #b6a0ff;">setq</span> read-buffer-completion-ignore-case t)
(<span style="color: #b6a0ff;">setq</span> read-file-name-completion-ignore-case t)
(<span style="color: #b6a0ff;">setq</span> resize-mini-windows t)
</pre>
</div>

<p>
It may also be wise to raise gc-cons-threshold while the minibuffer is active,
so the GC doesn’t slow down expensive commands (or completion frameworks, like
helm and ivy). Stolen from <a href="https://github.com/hlissner/doom-emacs/blob/develop/docs/faq.org#how-does-doom-start-up-so-quickly">Doom Emacs FAQ</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'minibuffer-setup-hook (<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">setq</span> gc-cons-threshold most-positive-fixnum)))
(add-hook 'minibuffer-exit-hook (<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">setq</span> gc-cons-threshold 16777216))) <span style="color: #a8a8a8;">; </span><span style="color: #a8a8a8;">16mb</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd6470c6" class="outline-3">
<h3 id="orgd6470c6"><span class="section-number-3">15.16</span> Occur</h3>
<div class="outline-text-3" id="text-15-16">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'occur-mode-hook 'hl-line-mode)
(define-key occur-mode-map <span style="color: #79a8ff;">"t"</span> 'toggle-truncate-lines)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd7349c2" class="outline-3">
<h3 id="orgd7349c2"><span class="section-number-3">15.17</span> Org</h3>
<div class="outline-text-3" id="text-15-17">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">org-tempo</span>)
<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/org-recursive-sort</span> ()
    <span style="color: #c6eaff;">"Sort all entries in the current buffer, recursively."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (org-map-entries (<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">condition-case</span> x (org-sort-entries nil ?a) (<span style="color: #dbbe5f;">user-error</span>)))))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/org-narrow-to-parent</span> ()
    <span style="color: #c6eaff;">"Narrow buffer to the current subtree."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (widen)
    (org-up-element)
    (<span style="color: #b6a0ff;">save-excursion</span>
      (<span style="color: #b6a0ff;">save-match-data</span>
        (<span style="color: #b6a0ff;">org-with-limited-levels</span>
         (narrow-to-region
          (<span style="color: #b6a0ff;">progn</span>
            (org-back-to-heading t) (point))
          (<span style="color: #b6a0ff;">progn</span> (org-end-of-subtree t t)
                 (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">and</span> (org-at-heading-p) (not (eobp))) (backward-char 1))
                 (point)))))))
  (define-key org-mode-map (kbd <span style="color: #79a8ff;">"C-c M-p"</span>) 'my/org-narrow-to-parent)

  (<span style="color: #b6a0ff;">setq</span> org-startup-folded t) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">start in overview mode</span>
  (<span style="color: #b6a0ff;">setq</span> org-directory <span style="color: #79a8ff;">"~/org"</span>)
  (<span style="color: #b6a0ff;">setq</span> org-agenda-files (file-expand-wildcards <span style="color: #79a8ff;">"~/org/*.org"</span>))
  (<span style="color: #b6a0ff;">setq</span> org-default-notes-file <span style="color: #79a8ff;">"~/org/notes.org"</span>)

  (<span style="color: #b6a0ff;">setq</span> org-use-speed-commands t)
  (<span style="color: #b6a0ff;">setq</span> org-speed-commands-user '((<span style="color: #79a8ff;">"N"</span> . org-down-element) (<span style="color: #79a8ff;">"P"</span> . org-up-element)))

  (<span style="color: #b6a0ff;">setq</span> org-latex-listings 'minted)
  (<span style="color: #b6a0ff;">setq</span> org-latex-pdf-process
        '(<span style="color: #79a8ff;">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>
          <span style="color: #79a8ff;">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>
          <span style="color: #79a8ff;">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>))
  (add-to-list 'org-latex-packages-alist '(<span style="color: #79a8ff;">""</span> <span style="color: #79a8ff;">"minted"</span>))

  (<span style="color: #b6a0ff;">setq</span> org-capture-templates
        '((<span style="color: #79a8ff;">"t"</span> <span style="color: #79a8ff;">"TODO Entry"</span> entry (file+headline <span style="color: #79a8ff;">"~/org/todo.org"</span> <span style="color: #79a8ff;">"CURRENT"</span>)
           <span style="color: #79a8ff;">"* TODO %?\n  %i\n  %a"</span>)
          (<span style="color: #79a8ff;">"j"</span> <span style="color: #79a8ff;">"Journal Entry"</span> entry (file+datetree <span style="color: #79a8ff;">"~/org/journal.org"</span> <span style="color: #79a8ff;">"JOURNAL"</span>)
           <span style="color: #79a8ff;">"* %?\nEntered on %U\n  %i\n  %a"</span>)))

  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"cl"</span> . <span style="color: #79a8ff;">"src common-lisp"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"el"</span> . <span style="color: #79a8ff;">"src emacs-lisp"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"go"</span> . <span style="color: #79a8ff;">"src go"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"ja"</span> . <span style="color: #79a8ff;">"src java"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"js"</span> . <span style="color: #79a8ff;">"src javascript"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"kr"</span> . <span style="color: #79a8ff;">"src c"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"py"</span> . <span style="color: #79a8ff;">"src python"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"sh"</span> . <span style="color: #79a8ff;">"src shell"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"sq"</span> . <span style="color: #79a8ff;">"src sql"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"tx"</span> . <span style="color: #79a8ff;">"src text"</span>))

  (org-babel-do-load-languages
   'org-babel-load-languages
   '((awk . t)
     (C . t)
     (clojure . t)
     (css . t)
     (dot . t) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">graphviz language</span>
     (emacs-lisp . t)
     (gnuplot . t)
     (haskell . t)
     <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">(http . t)</span>
     (java . t)
     (js . t)
     (latex . t)
     (lisp . t)
     (makefile . t)
     (ocaml . t)
     (perl . t)
     (python . t)
     (plantuml . t)
     (ruby . t)
     (scheme . t)
     (sed . t)
     (shell . t)
     (sql . t)
     (sqlite . t)))

  (<span style="color: #b6a0ff;">setq</span> org-goto-interface 'outline-path-completionp)
  (<span style="color: #b6a0ff;">setq</span> org-outline-path-complete-in-steps nil)
  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">org-goto is basically imenu on steroids for org-mode</span>
  (define-key org-mode-map (kbd <span style="color: #79a8ff;">"C-c i"</span>) 'org-goto)

  (<span style="color: #b6a0ff;">if</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
      (<span style="color: #b6a0ff;">progn</span>
        (add-hook 'org-babel-post-tangle-hook (<span style="color: #b6a0ff;">lambda</span> () (byte-recompile-file early-init nil 0 t)))
        (add-hook 'org-babel-post-tangle-hook (<span style="color: #b6a0ff;">lambda</span> () (byte-recompile-file init-file nil 0 t))))
    (<span style="color: #b6a0ff;">progn</span>
      (add-hook 'org-babel-post-tangle-hook (<span style="color: #b6a0ff;">lambda</span> () (byte-recompile-file early-init nil 0)))
      (add-hook 'org-babel-post-tangle-hook 'emacs-lisp-byte-compile-and-load)))

  (add-hook 'org-mode-hook 'auto-fill-mode)
  (add-hook 'org-mode-hook 'hl-line-mode)
  (message <span style="color: #79a8ff;">"Lazy loaded org :-)"</span>))
</pre>
</div>
</div>

<div id="outline-container-orgd53223e" class="outline-4">
<h4 id="orgd53223e"><span class="section-number-4">15.17.1</span> Org global bindings</h4>
<div class="outline-text-4" id="text-15-17-1">
<pre class="example">
(autoload 'org-mode "org" nil t)
(autoload 'org-agenda "org" nil t)
(global-set-key (kbd "C-c C-o a") 'org-agenda)
(autoload 'org-capture "org" nil t)
(global-set-key (kbd "C-c C-o c") 'org-capture)
(autoload 'org-store-link "org" nil t)
(global-set-key (kbd "C-c C-o l") 'org-store-link)
(autoload 'org-time-stamp "org" nil t)
(global-set-key (kbd "C-c C-o t") 'org-time-stamp)
</pre>
</div>
</div>
</div>

<div id="outline-container-org75b4c88" class="outline-3">
<h3 id="org75b4c88"><span class="section-number-3">15.18</span> Pending delete</h3>
<div class="outline-text-3" id="text-15-18">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'pending-delete-mode 1) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">remove selected region if typing</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgff39048" class="outline-3">
<h3 id="orgff39048"><span class="section-number-3">15.19</span> Prettify Symbols</h3>
<div class="outline-text-3" id="text-15-19">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'prettify-symbols
  (<span style="color: #b6a0ff;">setq</span> prettify-symbols-unprettify-at-point 'right-edge)
  (message <span style="color: #79a8ff;">"Lazy loaded prettify-symbols :-)"</span>))
(add-hook 'emacs-startup-hook 'global-prettify-symbols-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5ad9b7" class="outline-3">
<h3 id="orgf5ad9b7"><span class="section-number-3">15.20</span> Project</h3>
<div class="outline-text-3" id="text-15-20">
<p>
We only tangle this when <code>emacs-version</code> &gt; 28
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
  (<span style="color: #b6a0ff;">setq</span> my/project-roots '(<span style="color: #79a8ff;">"~"</span> <span style="color: #79a8ff;">"~/src/gitlab"</span>))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/project--git-repo-p</span> (directory)
    <span style="color: #c6eaff;">"Return non-nil if there is a git repository in DIRECTORY."</span>
    (<span style="color: #b6a0ff;">and</span>
     (file-directory-p (concat directory <span style="color: #79a8ff;">"/.git"</span>))
     (file-directory-p (concat directory <span style="color: #79a8ff;">"/.git/info"</span>))
     (file-directory-p (concat directory <span style="color: #79a8ff;">"/.git/objects"</span>))
     (file-directory-p (concat directory <span style="color: #79a8ff;">"/.git/refs"</span>))
     (file-regular-p (concat directory <span style="color: #79a8ff;">"/.git/HEAD"</span>))))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/project--git-repos-recursive</span> (directory maxdepth)
    <span style="color: #c6eaff;">"List git repos in under DIRECTORY recursively to MAXDEPTH."</span>
    (<span style="color: #b6a0ff;">let*</span> ((git-repos '())
           (current-directory-list
            (directory-files directory t directory-files-no-dot-files-regexp)))
      <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">while we are in the current directory</span>
      (<span style="color: #b6a0ff;">if</span> (my/project--git-repo-p directory)
          (<span style="color: #b6a0ff;">setq</span> git-repos (cons (file-truename (expand-file-name directory)) git-repos)))
      (<span style="color: #b6a0ff;">while</span> current-directory-list
        (<span style="color: #b6a0ff;">let</span> ((f (car current-directory-list)))
          (<span style="color: #b6a0ff;">cond</span> ((<span style="color: #b6a0ff;">and</span> (file-directory-p f)
                      (file-readable-p f)
                      (&gt; maxdepth 0)
                      (not (my/project--git-repo-p f)))
                 (<span style="color: #b6a0ff;">setq</span> git-repos
                       (append git-repos
                               (my/project--git-repos-recursive f (- maxdepth 1)))))
                ((my/project--git-repo-p f)
                 (<span style="color: #b6a0ff;">setq</span> git-repos (cons
                                  (file-truename (expand-file-name f)) git-repos))))
          (<span style="color: #b6a0ff;">setq</span> current-directory-list (cdr current-directory-list))))
      (delete-dups git-repos)))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/project--list-projects</span> ()
    <span style="color: #c6eaff;">"Produce list of projects in `</span><span style="color: #00bcff;">my/project-roots</span><span style="color: #c6eaff;">'."</span>
    (<span style="color: #b6a0ff;">let</span> ((cands (delete-dups (mapcan (<span style="color: #b6a0ff;">lambda</span> (directory)
                                        (my/project--git-repos-recursive
                                         (expand-file-name directory)
                                         10))
                                      my/project-roots))))
      <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">needs to be a list of lists</span>
      (mapcar (<span style="color: #b6a0ff;">lambda</span> (d)
                (list (abbreviate-file-name d)))
              cands)))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/project-update-projects</span> ()
    <span style="color: #c6eaff;">"Overwrite `</span><span style="color: #00bcff;">project--list</span><span style="color: #c6eaff;">' using `</span><span style="color: #00bcff;">my/project--list-projects</span><span style="color: #c6eaff;">'.</span>
<span style="color: #c6eaff;">    WARNING: This will destroy &amp; replace the contents of `</span><span style="color: #00bcff;">project-list-file</span><span style="color: #c6eaff;">'."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (autoload 'project--ensure-read-project-list <span style="color: #79a8ff;">"project"</span> nil t)
    (project--ensure-read-project-list)
    (<span style="color: #b6a0ff;">setq</span> project--list (my/project--list-projects))
    (project--write-project-list)
    (message <span style="color: #79a8ff;">"Updated project list in %s"</span> project-list-file))

  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">(add-hook 'emacs-startup-hook 'my/project-update-projects)</span>
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x p u"</span>) 'my/project-update-projects)

  (<span style="color: #b6a0ff;">with-eval-after-load</span> 'project
    (<span style="color: #b6a0ff;">setq</span> project-switch-commands
          '((?b <span style="color: #79a8ff;">"Buffer"</span> project-switch-to-buffer)
            (?c <span style="color: #79a8ff;">"Compile"</span> project-compile)
            (?d <span style="color: #79a8ff;">"Dired"</span> project-dired)
            (?e <span style="color: #79a8ff;">"Eshell"</span> project-eshell)
            (?f <span style="color: #79a8ff;">"File"</span> project-find-file)
            (?g <span style="color: #79a8ff;">"Grep"</span> project-find-regexp)
            (?q <span style="color: #79a8ff;">"Query replace"</span> project-query-replace-regexp)
            (?r <span style="color: #79a8ff;">"Run command"</span> project-async-shell-command)
            (?s <span style="color: #79a8ff;">"Search"</span> project-search)
            (?v <span style="color: #79a8ff;">"VC dir"</span> project-vc-dir)))
    (message <span style="color: #79a8ff;">"Lazy loaded project :-)"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbf964e4" class="outline-3">
<h3 id="orgbf964e4"><span class="section-number-3">15.21</span> Recentf</h3>
<div class="outline-text-3" id="text-15-21">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'recentf
  (<span style="color: #b6a0ff;">setq</span> recentf-exclude '(<span style="color: #79a8ff;">".gz"</span>
                          <span style="color: #79a8ff;">".xz"</span>
                          <span style="color: #79a8ff;">".zip"</span>
                          <span style="color: #79a8ff;">"/elpa/"</span>
                          <span style="color: #79a8ff;">"/ssh:"</span>
                          <span style="color: #79a8ff;">"/sudo:"</span>
                          <span style="color: #79a8ff;">"^/var/folders\\.*"</span>
                          <span style="color: #79a8ff;">"COMMIT_EDITMSG\\'"</span>
                          <span style="color: #79a8ff;">".*-autoloads\\.el\\'"</span>
                          <span style="color: #79a8ff;">"[/\\]\\.elpa/"</span>))
  (<span style="color: #b6a0ff;">setq</span> recentf-max-menu-items 128)
  (<span style="color: #b6a0ff;">setq</span> recentf-max-saved-items 256)

  <span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###autoload</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/completing-recentf</span> ()
    <span style="color: #c6eaff;">"Show a list of recent files."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (<span style="color: #b6a0ff;">let*</span> ((all-files recentf-list)
           (list1 (mapcar (<span style="color: #b6a0ff;">lambda</span> (x) (file-name-nondirectory x) x) all-files))
           (list2 (mapcar #'substring-no-properties list1))
           (list3 (mapcar #'abbreviate-file-name list2))
           (list4 (cl-remove-duplicates list3 <span style="color: #f78fe7;">:test</span> #'string-equal)))
      (find-file (completing-read <span style="color: #79a8ff;">"Recent Files: "</span> list4 nil t))))
  (global-set-key (kbd <span style="color: #79a8ff;">"C-c r"</span>) 'my/completing-recentf)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/completing-recentf-other-window</span> ()
    (<span style="color: #b6a0ff;">interactive</span>)
    (split-window-sensibly)
    (other-window 1)
    (my/completing-recentf))
  (global-set-key (kbd <span style="color: #79a8ff;">"C-c 4 r"</span>) 'my/completing-recentf-other-window)

  (message <span style="color: #79a8ff;">"Lazy loaded recentf :-)"</span>))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c C-r"</span>) 'recentf-open-files)
(add-hook 'after-init-hook 'recentf-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga996edd" class="outline-3">
<h3 id="orga996edd"><span class="section-number-3">15.22</span> Show paren</h3>
<div class="outline-text-3" id="text-15-22">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'show-paren-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org35c5ea4" class="outline-3">
<h3 id="org35c5ea4"><span class="section-number-3">15.23</span> Saveplace</h3>
<div class="outline-text-3" id="text-15-23">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'save-place
  (<span style="color: #b6a0ff;">setq</span> save-place-file (concat user-emacs-directory <span style="color: #79a8ff;">"saveplace.el"</span>))
  (message <span style="color: #79a8ff;">"Lazy loaded save-place-mode :-)"</span>))
(add-hook 'emacs-startup-hook 'save-place-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf0123f9" class="outline-3">
<h3 id="orgf0123f9"><span class="section-number-3">15.24</span> Shell script</h3>
<div class="outline-text-3" id="text-15-24">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'sh-script
  (add-hook 'shell-script-mode-hook 'hl-line-mode)
  (add-hook 'sh-script-hook 'display-line-numbers-mode)
  (add-hook 'after-save-hook 'executable-make-buffer-file-executable-if-script-p)
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\.sh\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\.bash.*\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\.zsh.*\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\bashrc\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\kshrc\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\profile\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\zshenv\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\zprompt\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\zshrc\\'"</span> . shell-script-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #79a8ff;">"\\prompt_.*_setup\\'"</span> . shell-script-mode))
  (add-to-list 'interpreter-mode-alist '(<span style="color: #79a8ff;">"bash"</span> . shell-script-mode))
  (add-to-list 'interpreter-mode-alist '(<span style="color: #79a8ff;">"ksh"</span> . shell-script-mode))
  (add-to-list 'interpreter-mode-alist '(<span style="color: #79a8ff;">"sh"</span> . shell-script-mode))
  (add-to-list 'interpreter-mode-alist '(<span style="color: #79a8ff;">"zsh"</span> . shell-script-mode))
  (message <span style="color: #79a8ff;">"Lazy loaded shell-script-mode :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1ab79f7" class="outline-3">
<h3 id="org1ab79f7"><span class="section-number-3">15.25</span> Subword</h3>
<div class="outline-text-3" id="text-15-25">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'global-subword-mode) <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">move by camel case, etc</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeece7d9" class="outline-3">
<h3 id="orgeece7d9"><span class="section-number-3">15.26</span> Term</h3>
<div class="outline-text-3" id="text-15-26">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(autoload 'term <span style="color: #79a8ff;">"term"</span> nil t)
(autoload 'ansi-term <span style="color: #79a8ff;">"term"</span> nil t)
</pre>
</div>
</div>

<div id="outline-container-org89f2e49" class="outline-4">
<h4 id="org89f2e49"><span class="section-number-4">15.26.1</span> ANSI Term launcher</h4>
<div class="outline-text-4" id="text-15-26-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/ansi-term</span> ()
  <span style="color: #c6eaff;">"Opens shell from $SHELL environmental variable in `</span><span style="color: #00bcff;">ansi-term</span><span style="color: #c6eaff;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">https://emacs.stackexchange.com/a/48481</span>
  (<span style="color: #b6a0ff;">let</span> ((switch-to-buffer-obey-display-actions))
    (ansi-term (getenv <span style="color: #79a8ff;">"SHELL"</span>))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c tt"</span>) 'my/ansi-term)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/ansi-term-other-window</span> ()
  <span style="color: #c6eaff;">"Opens default $SHELL `</span><span style="color: #00bcff;">ansi-term</span><span style="color: #c6eaff;">' in another window."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (my/ansi-term))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c 4 tt"</span>) 'my/ansi-term-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga43f755" class="outline-4">
<h4 id="orga43f755"><span class="section-number-4">15.26.2</span> Switch to ANSI Term</h4>
<div class="outline-text-4" id="text-15-26-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/switch-to-ansi-term</span> ()
  <span style="color: #c6eaff;">"Open an `</span><span style="color: #00bcff;">ansi-term</span><span style="color: #c6eaff;">' if it doesn't already exist.</span>
<span style="color: #c6eaff;">Otherwise switch to current one."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (get-buffer <span style="color: #79a8ff;">"*ansi-term*"</span>)
      (switch-to-buffer <span style="color: #79a8ff;">"*ansi-term*"</span>)
    (ansi-term (getenv <span style="color: #79a8ff;">"SHELL"</span>))))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c ts"</span>) 'my/switch-to-ansi-term)

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/switch-to-ansi-term-other-window</span>()
  <span style="color: #c6eaff;">"Does what it states on the tin!"</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (my/switch-to-ansi-term))
(global-set-key (kbd <span style="color: #79a8ff;">"C-c 4 ts"</span>) 'my/switch-to-ansi-term-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org45a457d" class="outline-4">
<h4 id="org45a457d"><span class="section-number-4">15.26.3</span> Term Advise</h4>
<div class="outline-text-4" id="text-15-26-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'term
  (<span style="color: #b6a0ff;">defadvice</span> <span style="color: #feacd0;">term-handle-exit</span> (after term-kill-buffer-on-exit activate)
    <span style="color: #c6eaff;">"Kill term when shell exits."</span>
    (kill-buffer))
  (<span style="color: #b6a0ff;">setq</span> term-buffer-maximum-size 200000)
  (message <span style="color: #79a8ff;">"Lazy loaded term :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc7c90f7" class="outline-4">
<h4 id="orgc7c90f7"><span class="section-number-4">15.26.4</span> Set term coding system to UTF-8</h4>
<div class="outline-text-4" id="text-15-26-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'term-exec (<span style="color: #b6a0ff;">lambda</span> () (set-process-coding-system 'utf-8-unix 'utf-8-unix)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3c7dabe" class="outline-3">
<h3 id="org3c7dabe"><span class="section-number-3">15.27</span> Tramp</h3>
<div class="outline-text-3" id="text-15-27">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'tramp
  (<span style="color: #b6a0ff;">setq</span> tramp-backup-directory-alist backup-directory-alist)
  (<span style="color: #b6a0ff;">setq</span> tramp-default-method <span style="color: #79a8ff;">"ssh"</span>)
  (<span style="color: #b6a0ff;">setf</span> tramp-persistency-file-name (concat temporary-file-directory <span style="color: #79a8ff;">"tramp-"</span> (user-login-name)))
  (message <span style="color: #79a8ff;">"Lazy loaded tramp :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfcfc2b9" class="outline-3">
<h3 id="orgfcfc2b9"><span class="section-number-3">15.28</span> Version Control</h3>
<div class="outline-text-3" id="text-15-28">
<p>
<a href="https://protesilaos.com/dotemacs/#h:31deeff4-dfae-48d9-a906-1f3272f29bc9">Protesilaos Stavrou's VC reference</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'vc
  (<span style="color: #b6a0ff;">setq</span> vc-follow-symlinks t)
  (<span style="color: #b6a0ff;">setq</span> vc-make-backup-files t)
  (<span style="color: #b6a0ff;">setq</span> version-control t)
  (message <span style="color: #79a8ff;">"Lazy loaded vc :-)"</span>))

<span style="color: #a8a8a8;">;;;</span><span style="color: #a8a8a8;">###</span><span style="color: #dbbe5f;">autoload</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/vc-dir</span> (<span style="color: #f78fe7;">&amp;optional</span> arg)
  <span style="color: #c6eaff;">"Run `</span><span style="color: #00bcff;">vc-dir</span><span style="color: #c6eaff;">' for the current project or directory.</span>
<span style="color: #c6eaff;">With optional ARG (\\[</span><span style="color: #00bcff;">universal-argument</span><span style="color: #c6eaff;">]), use the present</span>
<span style="color: #c6eaff;">working directory, else default to the root of the current</span>
<span style="color: #c6eaff;">project, as defined by `</span><span style="color: #00bcff;">vc-root-dir</span><span style="color: #c6eaff;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">let</span> ((dir (<span style="color: #b6a0ff;">if</span> arg default-directory (vc-root-dir))))
    (vc-dir dir)))

(<span style="color: #b6a0ff;">if</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
    (global-set-key (kbd <span style="color: #79a8ff;">"C-x v d"</span>) 'my/vc-dir)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x v d"</span>) 'vc-dir-root))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbfb7f5b" class="outline-3">
<h3 id="orgbfb7f5b"><span class="section-number-3">15.29</span> Whitespace</h3>
<div class="outline-text-3" id="text-15-29">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'whitespace
  (<span style="color: #b6a0ff;">setq</span> whitespace-line-column 120)
  (<span style="color: #b6a0ff;">setq</span> whitespace-style '(face
                           tabs
                           spaces
                           trailing
                           lines
                           space-before-tab::space
                           newline
                           indentation::space
                           empty
                           space-after-tab::space
                           space-mark
                           tab-mark
                           newline-mark)
        whitespace-face 'whitespace-trailing)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-c M-w"</span>) 'whitespace-mode)
  (message <span style="color: #79a8ff;">"Lazy loaded whitespace :-)"</span>))
</pre>
</div>

<p>
Cleanup whitespace on save
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'before-save-hook 'whitespace-cleanup)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3980a6c" class="outline-2">
<h2 id="org3980a6c"><span class="section-number-2">16</span> My custom packages</h2>
<div class="outline-text-2" id="text-16">
</div>
<div id="outline-container-org3c12445" class="outline-3">
<h3 id="org3c12445"><span class="section-number-3">16.1</span> Lazygit</h3>
<div class="outline-text-3" id="text-16-1">
<p>
Clone some or all of my projects on GitLab or GitHub via the magic of APIs and
Emacs' <code>completing-read</code>.
</p>

<p>
Get the source from <a href="https://gitlab.com/tspub/lisp/lazygit">here</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">let</span> ((lazygit-directory (expand-file-name <span style="color: #79a8ff;">"~/src/gitlab/tspub/lisp/lazygit"</span>)))
  (<span style="color: #b6a0ff;">when</span> (file-directory-p lazygit-directory)
    (add-to-list 'load-path lazygit-directory)

    (<span style="color: #b6a0ff;">with-eval-after-load</span> 'lazygitlab
      (<span style="color: #b6a0ff;">setq</span> lazygit-directory (expand-file-name <span style="color: #79a8ff;">"~/src/gitlab"</span>))
      (message <span style="color: #79a8ff;">"Lazy loaded lazygitlab :-)"</span>))

    (autoload 'lazygit-status-all <span style="color: #79a8ff;">"lazygit"</span> nil t)
    (global-set-key (kbd <span style="color: #79a8ff;">"C-c g s"</span>) 'lazygit-status-all)
    (autoload 'lazygit-pull-all <span style="color: #79a8ff;">"lazygit"</span> nil t)
    (global-set-key (kbd <span style="color: #79a8ff;">"C-c g p"</span>) 'lazygit-pull-all)

    (autoload 'lazygitlab-clone-or-pull-all <span style="color: #79a8ff;">"lazygitlab"</span> nil t)
    (global-set-key (kbd <span style="color: #79a8ff;">"C-c g l a"</span>) 'lazygitlab-clone-or-pull-all)
    (autoload 'lazygitlab-clone-or-pull-group <span style="color: #79a8ff;">"lazygitlab"</span> nil t)
    (global-set-key (kbd <span style="color: #79a8ff;">"C-c g l g"</span>) 'lazygitlab-clone-or-pull-group)
    (autoload 'lazygitlab-clone-or-pull-project <span style="color: #79a8ff;">"lazygitlab"</span> nil t)
    (global-set-key (kbd <span style="color: #79a8ff;">"C-c g l p"</span>) 'lazygitlab-clone-or-pull-project)

    (<span style="color: #b6a0ff;">with-eval-after-load</span> 'lazygithub
      (<span style="color: #b6a0ff;">setq</span> lazygit-directory (expand-file-name <span style="color: #79a8ff;">"~/src/github"</span>))
      (message <span style="color: #79a8ff;">"Lazy loaded lazygithub :-)"</span>))

    (autoload 'lazygithub-clone-or-pull-all <span style="color: #79a8ff;">"lazygithub"</span> nil t)
    (global-set-key (kbd <span style="color: #79a8ff;">"C-c g h a"</span>) 'lazygithub-clone-or-pull-all)
    (autoload 'lazygithub-clone-or-pull-repo <span style="color: #79a8ff;">"lazygithub"</span> nil t)
    (global-set-key (kbd <span style="color: #79a8ff;">"C-c g h r"</span>) 'lazygithub-clone-or-pull-repo)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org187a923" class="outline-3">
<h3 id="org187a923"><span class="section-number-3">16.2</span> Dired Peep</h3>
<div class="outline-text-3" id="text-16-2">
<p>
Preview the file or directory at point when in <code>dired</code>, a bit like <a href="https://github.com/ranger/ranger">ranger</a>.
</p>

<p>
Get the source from <a href="https://gitlab.com/tspub/lisp/dired-peep">here</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">let</span> ((dired-peep-directory (expand-file-name <span style="color: #79a8ff;">"~/src/gitlab/tspub/lisp/dired-peep"</span>)))
  (<span style="color: #b6a0ff;">when</span> (file-directory-p dired-peep-directory)
    (add-to-list 'load-path dired-peep-directory)
    (<span style="color: #b6a0ff;">with-eval-after-load</span> 'dired
      (autoload 'dired-peep-mode <span style="color: #79a8ff;">"dired-peep"</span>)
      (define-key dired-mode-map <span style="color: #79a8ff;">"r"</span> 'dired-peep-mode)
      (define-key dired-mode-map (kbd <span style="color: #79a8ff;">"C-o"</span>) 'dired-peep-temporarily)
      (define-key dired-mode-map (kbd <span style="color: #79a8ff;">"M-o"</span>) 'dired-peep))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org595fd53" class="outline-2">
<h2 id="org595fd53"><span class="section-number-2">17</span> Third party packages</h2>
<div class="outline-text-2" id="text-17">
<p>
I like to split up my "vanilla" Emacs configuration and custom functions from
the customisations provided by third party libraries that have been installed
using <code>package.el</code> and <code>use-package</code>.
</p>

<p>
If you want to go for a more vanilla setup, just prefix the <code>COMMENT</code> keyword
to the tile above, and re-tangle the file.
</p>

<p>
This way it makes it very easy to run a semi-stock Emacs without <code>package.el</code>
or any third party libraries, but still have some saner defaults and some extra
functionality.
</p>

<p>
I'm using John Wiegley's awesome <a href="https://github.com/jwiegley/use-package">use-package</a> to pull in and configure any third
party packages from <a href="https://melpa.org/">MELPA</a>.
</p>
</div>

<div id="outline-container-orgfef97c2" class="outline-3">
<h3 id="orgfef97c2"><span class="section-number-3">17.1</span> Setup up package.el</h3>
<div class="outline-text-3" id="text-17-1">
<p>
If we are on an Emacs version lower than "27" this will go in <code>init.el</code>,
otherwise it goes in <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Early-Init-File.html">early-init.el</a> for faster starup.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">-*- lexical-binding: t; -*-</span>
</pre>
</div>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">This must be true otherwise use-package won't load!</span>
(<span style="color: #b6a0ff;">setq</span> package-enable-at-startup t)
<span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">Allow loading from the package cache.</span>
(<span style="color: #b6a0ff;">setq</span> package-quickstart t)
<span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">Don't write (package-initialize) to my init file!</span>
(<span style="color: #b6a0ff;">setq</span> package--init-file-ensured t)
<span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">Setup up archives</span>
(<span style="color: #b6a0ff;">setq</span> package-archives
      '((<span style="color: #79a8ff;">"melpa"</span> . <span style="color: #79a8ff;">"https://melpa.org/packages/"</span>)
        (<span style="color: #79a8ff;">"nongnu"</span> . <span style="color: #79a8ff;">"https://elpa.nongnu.org/packages/"</span>)
        (<span style="color: #79a8ff;">"gnu"</span> . <span style="color: #79a8ff;">"https://elpa.gnu.org/packages/"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7af2eea" class="outline-3">
<h3 id="org7af2eea"><span class="section-number-3">17.2</span> use-package bootstrap</h3>
<div class="outline-text-3" id="text-17-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">package</span>)
(<span style="color: #b6a0ff;">unless</span> (package-installed-p 'use-package)
  (package-refresh-contents)
  (package-install 'use-package))

(<span style="color: #b6a0ff;">setq</span> use-package-enable-imenu-support t
      <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">use-package-hook-name-suffix nil</span>
      use-package-always-ensure t
      use-package-verbose t)
(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">use-package</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org97a8801" class="outline-3">
<h3 id="org97a8801"><span class="section-number-3">17.3</span> Ansible</h3>
<div class="outline-text-3" id="text-17-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">ansible</span> <span style="color: #f78fe7;">:defer</span> <span style="color: #f78fe7;">:hook</span> (yaml-mode . ansible))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">ansible-doc</span> <span style="color: #f78fe7;">:defer</span> <span style="color: #f78fe7;">:hook</span> (yaml-mode . ansible-doc-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0463e30" class="outline-3">
<h3 id="org0463e30"><span class="section-number-3">17.4</span> Async</h3>
<div class="outline-text-3" id="text-17-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">async</span> <span style="color: #f78fe7;">:defer</span> 5
  <span style="color: #f78fe7;">:commands</span> (async-byte-compile-file
             async-bytecomp-package-mode)
  <span style="color: #f78fe7;">:init</span>
  (<span style="color: #b6a0ff;">unless</span> (equal system-type 'windows-nt)
    (<span style="color: #b6a0ff;">setq</span> async-bytecomp-allowed-packages '(all)))
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">if</span> (equal system-type 'windows-nt)
      (async-bytecomp-package-mode -1)
    (async-bytecomp-package-mode 1))
  <span style="color: #f78fe7;">:hook</span> (dired-mode-hook . dired-async-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga1fc6ae" class="outline-3">
<h3 id="orga1fc6ae"><span class="section-number-3">17.5</span> Blacken</h3>
<div class="outline-text-3" id="text-17-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">blacken</span> <span style="color: #f78fe7;">:defer</span> <span style="color: #f78fe7;">:hook</span> (python-mode . blacken-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgea49bbe" class="outline-3">
<h3 id="orgea49bbe"><span class="section-number-3">17.6</span> Default text scaling</h3>
<div class="outline-text-3" id="text-17-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">default-text-scale</span>
  <span style="color: #f78fe7;">:if</span> window-system
  <span style="color: #f78fe7;">:bind*</span>
  (<span style="color: #79a8ff;">"C-M-="</span> . default-text-scale-increase)
  (<span style="color: #79a8ff;">"C-M--"</span> . default-text-scale-decrease)
  (<span style="color: #79a8ff;">"C-M-0"</span> . default-text-scale-reset))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb905a07" class="outline-3">
<h3 id="orgb905a07"><span class="section-number-3">17.7</span> Diminish</h3>
<div class="outline-text-3" id="text-17-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">diminish</span> <span style="color: #f78fe7;">:defer</span> 2
  <span style="color: #f78fe7;">:diminish</span> abbrev-mode
  <span style="color: #f78fe7;">:diminish</span> auto-fill-function <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">wtf?!</span>
  <span style="color: #f78fe7;">:diminish</span> eldoc-mode
  <span style="color: #f78fe7;">:diminish</span> hs-minor-mode
  <span style="color: #f78fe7;">:diminish</span> highlight-changes-mode
  <span style="color: #f78fe7;">:diminish</span> my/key-mode
  <span style="color: #f78fe7;">:diminish</span> org-indent-mode
  <span style="color: #f78fe7;">:diminish</span> org-src-mode
  <span style="color: #f78fe7;">:diminish</span> subword-mode
  <span style="color: #f78fe7;">:hook</span>
  (org-indent-mode . (<span style="color: #b6a0ff;">lambda</span> () (diminish 'org-indent-mode)))
  (hs-minor-mode . (<span style="color: #b6a0ff;">lambda</span> () (diminish 'hs-minor-mode))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb047f0f" class="outline-3">
<h3 id="orgb047f0f"><span class="section-number-3">17.8</span> Docker</h3>
<div class="outline-text-3" id="text-17-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">docker</span> <span style="color: #f78fe7;">:bind</span> (<span style="color: #79a8ff;">"C-c C-d"</span> . docker))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">dockerfile-mode</span> <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1ea6546" class="outline-3">
<h3 id="org1ea6546"><span class="section-number-3">17.9</span> Exec path from shell</h3>
<div class="outline-text-3" id="text-17-9">
<p>
Don't tangle this block if <code>system-type</code> is <code>windows-nt</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">exec-path-from-shell</span> <span style="color: #f78fe7;">:defer</span> 10
  <span style="color: #f78fe7;">:unless</span> (eq system-type 'windows-nt)
  <span style="color: #f78fe7;">:commands</span> exec-path-from-shell-initialize
  <span style="color: #f78fe7;">:init</span>
  (<span style="color: #b6a0ff;">setq</span> exec-path-from-shell-check-startup-files 'nil)
  <span style="color: #f78fe7;">:config</span>
  (exec-path-from-shell-initialize)
  (exec-path-from-shell-copy-env <span style="color: #79a8ff;">"PYTHONPATH"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd404c0e" class="outline-3">
<h3 id="orgd404c0e"><span class="section-number-3">17.10</span> Flycheck</h3>
<div class="outline-text-3" id="text-17-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">flycheck</span> <span style="color: #f78fe7;">:defer</span>
  <span style="color: #f78fe7;">:diminish</span> flycheck-mode
  <span style="color: #f78fe7;">:hook</span> (prog-mode . flycheck-mode)
  <span style="color: #f78fe7;">:config</span> (flycheck-add-mode 'javascript-eslint 'web-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge66d0f3" class="outline-3">
<h3 id="orge66d0f3"><span class="section-number-3">17.11</span> Git</h3>
<div class="outline-text-3" id="text-17-11">
</div>
<div id="outline-container-orgd3d15f4" class="outline-4">
<h4 id="orgd3d15f4"><span class="section-number-4">17.11.1</span> Git Timemachine</h4>
<div class="outline-text-4" id="text-17-11-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">git-timemachine</span> <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5e03c6b" class="outline-4">
<h4 id="org5e03c6b"><span class="section-number-4">17.11.2</span> Gitlab CI</h4>
<div class="outline-text-4" id="text-17-11-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">gitlab-ci-mode</span> <span style="color: #f78fe7;">:defer</span>
  <span style="color: #f78fe7;">:mode</span>
  <span style="color: #79a8ff;">"\\.gitlab-ci.yaml\\'"</span>
  <span style="color: #79a8ff;">"\\.gitlab-ci.yml\\'"</span>
  <span style="color: #f78fe7;">:hook</span>
  (yaml-mode . hs-minor-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org28c8ccd" class="outline-4">
<h4 id="org28c8ccd"><span class="section-number-4">17.11.3</span> Magit</h4>
<div class="outline-text-4" id="text-17-11-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">magit</span>
  <span style="color: #f78fe7;">:bind*</span>
  (<span style="color: #79a8ff;">"C-x g"</span> . magit-status)
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">when</span> (eq system-type 'windows-nt)
    (<span style="color: #b6a0ff;">if</span> (file-readable-p <span style="color: #79a8ff;">"C:/Program Files/Git/bin/git.exe"</span>)
        (<span style="color: #b6a0ff;">setq</span> magit-git-executable <span style="color: #79a8ff;">"C:/Program Files/Git/bin/git.exe"</span>))
    (<span style="color: #b6a0ff;">when</span> (file-directory-p <span style="color: #79a8ff;">"C:/Program Files/Git/bin"</span>)
      (<span style="color: #b6a0ff;">setq</span> exec-path (add-to-list 'exec-path <span style="color: #79a8ff;">"C:/Program Files/Git/bin"</span>))
      (setenv <span style="color: #79a8ff;">"PATH"</span> (concat <span style="color: #79a8ff;">"C:\\Program Files\\Git\\bin;"</span> (getenv <span style="color: #79a8ff;">"PATH"</span>)))))
  (<span style="color: #b6a0ff;">setq</span> magit-clone-set-remote.pushDefault t)
  (<span style="color: #b6a0ff;">setq</span> magit-completing-read-function 'magit-builtin-completing-read))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">magit-repos</span> <span style="color: #f78fe7;">:ensure</span> nil
  <span style="color: #f78fe7;">:bind*</span> (<span style="color: #79a8ff;">"C-x C-g"</span> . magit-list-repositories)
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">setq</span> magit-repository-directories `((<span style="color: #79a8ff;">"~/"</span> . 0)
                                       (<span style="color: #79a8ff;">"~/src/gitlab"</span> . 10)))
  (<span style="color: #b6a0ff;">setq</span> magit-repolist-columns
        '((<span style="color: #79a8ff;">"Name"</span> 25 magit-repolist-column-ident)
          <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">("Version" 25 magit-repolist-column-version)</span>
          (<span style="color: #79a8ff;">"Pull"</span> 5 magit-repolist-column-unpulled-from-upstream)
          (<span style="color: #79a8ff;">"Push"</span> 5 magit-repolist-column-unpushed-to-upstream)
          (<span style="color: #79a8ff;">"Commit"</span> 8 magit-repolist-column-flag t)
          (<span style="color: #79a8ff;">"Path"</span> 99 magit-repolist-column-path))))
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="orgc6b94df"></a>Forge<br />
<div class="outline-text-5" id="text-17-11-3-1">
<p>
Don't tangle this block if <code>system-type</code> is <code>windows-nt</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">forge</span> <span style="color: #f78fe7;">:unless</span> (equal system-type 'windows-nt) <span style="color: #f78fe7;">:after</span> magit)
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-orgaafc391" class="outline-3">
<h3 id="orgaafc391"><span class="section-number-3">17.12</span> Go mode</h3>
<div class="outline-text-3" id="text-17-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">go-mode</span> <span style="color: #f78fe7;">:defer</span>
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/go-indent</span> ()
    (<span style="color: #b6a0ff;">setq</span> indent-tabs-mode 1)
    (<span style="color: #b6a0ff;">setq</span> tab-width 2))
  <span style="color: #f78fe7;">:hook</span> (go-mode . my/go-indent))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf58512a" class="outline-3">
<h3 id="orgf58512a"><span class="section-number-3">17.13</span> Hungry delete</h3>
<div class="outline-text-3" id="text-17-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">hungry-delete</span> <span style="color: #f78fe7;">:defer</span> 6
  <span style="color: #f78fe7;">:diminish</span> hungry-delete-mode
  <span style="color: #f78fe7;">:config</span> (global-hungry-delete-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9cc612" class="outline-3">
<h3 id="orga9cc612"><span class="section-number-3">17.14</span> JS2 mode</h3>
<div class="outline-text-3" id="text-17-14">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">js2-mode</span> <span style="color: #f78fe7;">:defer</span>
  <span style="color: #f78fe7;">:hook</span>
  (js-mode . js2-minor-mode)
  (js2-mode . js2-imenu-extras-mode)
  <span style="color: #f78fe7;">:mode</span>
  <span style="color: #79a8ff;">"\\.js\\'"</span>)

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">js2-refactor</span> <span style="color: #f78fe7;">:defer</span>
  <span style="color: #f78fe7;">:hook</span> (js2-mode . js2-refactor-mode)
  <span style="color: #f78fe7;">:bind</span> (<span style="color: #f78fe7;">:map</span> js2-mode-map
              (<span style="color: #79a8ff;">"C-k"</span> . js2r-kill))
  <span style="color: #f78fe7;">:config</span> (js2r-add-keybindings-with-prefix <span style="color: #79a8ff;">"C-c C-j"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgef83539" class="outline-3">
<h3 id="orgef83539"><span class="section-number-3">17.15</span> JSON</h3>
<div class="outline-text-3" id="text-17-15">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">json-mode</span> <span style="color: #f78fe7;">:defer</span>
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/json-mode-setup</span> ()
    (json-mode)
    (json-pretty-print (point-min) (point-max))
    (goto-char (point-min))
    (set-buffer-modified-p nil))
  (add-to-list 'auto-mode-alist
               '(<span style="color: #79a8ff;">"\\.json\\'"</span> . 'my/json-mode-setup)))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">json-navigator</span> <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf02260e" class="outline-3">
<h3 id="orgf02260e"><span class="section-number-3">17.16</span> Markdown</h3>
<div class="outline-text-3" id="text-17-16">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">markdown-mode</span>
  <span style="color: #f78fe7;">:commands</span> (markdown-mode gfm-mode)
  <span style="color: #f78fe7;">:mode</span> ((<span style="color: #79a8ff;">"README\\.md\\'"</span> . gfm-mode)
         (<span style="color: #79a8ff;">"\\.md\\'"</span> . gfm-mode)
         (<span style="color: #79a8ff;">"\\.markdown\\'"</span> . gfm-mode))
  <span style="color: #f78fe7;">:init</span> (<span style="color: #b6a0ff;">setq</span> markdown-command <span style="color: #79a8ff;">"multimarkdown"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc5b2142" class="outline-3">
<h3 id="orgc5b2142"><span class="section-number-3">17.17</span> Node JS</h3>
<div class="outline-text-3" id="text-17-17">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">nodejs-repl</span> <span style="color: #f78fe7;">:defer</span>
  <span style="color: #f78fe7;">:bind</span> (<span style="color: #f78fe7;">:map</span> js2-mode-map
              (<span style="color: #79a8ff;">"C-x C-e"</span> . nodejs-repl-send-last-expression)
              (<span style="color: #79a8ff;">"C-c C-j"</span> . nodejs-repl-send-line)
              (<span style="color: #79a8ff;">"C-c SPC"</span> . nodejs-repl-send-region)
              (<span style="color: #79a8ff;">"C-c C-b"</span> . nodejs-repl-send-buffer)
              (<span style="color: #79a8ff;">"C-c C-f"</span> . nodejs-repl-load-file)
              (<span style="color: #79a8ff;">"C-c C-z"</span> . nodejs-repl-switch-to-repl)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc44ce3" class="outline-3">
<h3 id="orgbc44ce3"><span class="section-number-3">17.18</span> Org</h3>
<div class="outline-text-3" id="text-17-18">
</div>
<div id="outline-container-org682e5b1" class="outline-4">
<h4 id="org682e5b1"><span class="section-number-4">17.18.1</span> Org Bullets</h4>
<div class="outline-text-4" id="text-17-18-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">org-bullets</span> <span style="color: #f78fe7;">:defer</span> <span style="color: #f78fe7;">:hook</span> (org-mode . org-bullets-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf53624d" class="outline-4">
<h4 id="orgf53624d"><span class="section-number-4">17.18.2</span> HTMLize</h4>
<div class="outline-text-4" id="text-17-18-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">htmlize</span> <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org15fe29c" class="outline-4">
<h4 id="org15fe29c"><span class="section-number-4">17.18.3</span> Toc Org</h4>
<div class="outline-text-4" id="text-17-18-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">toc-org</span> <span style="color: #f78fe7;">:defer</span> <span style="color: #f78fe7;">:hook</span> (org-mode . toc-org-enable))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcda140e" class="outline-4">
<h4 id="orgcda140e"><span class="section-number-4">17.18.4</span> PDF Tools</h4>
<div class="outline-text-4" id="text-17-18-4">
<p>
Don't tangle this block if <code>system-type</code> is <code>windows-nt</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">pdf-tools</span> <span style="color: #f78fe7;">:unless</span> (eq system-type 'windows-nt) <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb4ed162" class="outline-3">
<h3 id="orgb4ed162"><span class="section-number-3">17.19</span> Powershell</h3>
<div class="outline-text-3" id="text-17-19">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">powershell</span> <span style="color: #f78fe7;">:mode</span> ((<span style="color: #79a8ff;">"\\.ps1\\'"</span> . powershell-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0cbf365" class="outline-3">
<h3 id="org0cbf365"><span class="section-number-3">17.20</span> Projectile</h3>
<div class="outline-text-3" id="text-17-20">
<p>
Don't tangle this block if <code>emacs-version</code> &gt; 28, as Emacs 28 has the this
functionality built in via <code>project.el</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">projectile</span> <span style="color: #f78fe7;">:diminish</span>
  <span style="color: #f78fe7;">:bind-keymap</span>
  (<span style="color: #79a8ff;">"C-x p"</span> . projectile-command-map)
  <span style="color: #f78fe7;">:config</span>
  (projectile-mode)
  <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">(setq projectile-completion-system 'ivy)</span>
  (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">magit</span> nil t)
    (mapc #'projectile-add-known-project
          (mapcar #'file-name-as-directory (magit-list-repos)))
    <span style="color: #a8a8a8;">;; </span><span style="color: #a8a8a8;">Optionally write to persistent `</span><span style="color: #00bcff;">projectile-known-projects-file</span><span style="color: #a8a8a8;">'</span>
    (projectile-save-known-projects)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf15441c" class="outline-3">
<h3 id="orgf15441c"><span class="section-number-3">17.21</span> Restclient</h3>
<div class="outline-text-3" id="text-17-21">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">restclient</span> <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga8a9264" class="outline-3">
<h3 id="orga8a9264"><span class="section-number-3">17.22</span> systemd</h3>
<div class="outline-text-3" id="text-17-22">
<p>
Don't tangle this block if <code>system-type</code> is <code>windows-nt</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">systemd</span> <span style="color: #f78fe7;">:unless</span> (equal system-type 'windows-nt) <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7e77d17" class="outline-3">
<h3 id="org7e77d17"><span class="section-number-3">17.23</span> Terraform</h3>
<div class="outline-text-3" id="text-17-23">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">terraform-mode</span> <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2b048f1" class="outline-3">
<h3 id="org2b048f1"><span class="section-number-3">17.24</span> Web Mode</h3>
<div class="outline-text-3" id="text-17-24">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">web-mode</span>
  <span style="color: #f78fe7;">:mode</span>
  <span style="color: #79a8ff;">"\\.phtml\\'"</span>
  <span style="color: #79a8ff;">"\\.tpl\\.php\\'"</span>
  <span style="color: #79a8ff;">"\\.[agj]sp\\'"</span>
  <span style="color: #79a8ff;">"\\.as[cp]x\\'"</span>
  <span style="color: #79a8ff;">"\\.erb\\'"</span>
  <span style="color: #79a8ff;">"\\.mustache\\'"</span>
  <span style="color: #79a8ff;">"\\.djhtml\\'"</span>
  <span style="color: #79a8ff;">"\\.html\\.twig\\'"</span>
  <span style="color: #79a8ff;">"\\.html?\\'"</span>
  <span style="color: #79a8ff;">"\\.php?\\'"</span>
  <span style="color: #79a8ff;">"\\.css?\\'"</span>
  <span style="color: #f78fe7;">:hook</span>
  (web-mode . js2-minor-mode)
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">setq</span> web-mode-content-type <span style="color: #79a8ff;">"jsx"</span>)
  (<span style="color: #b6a0ff;">setq</span> web-mode-enable-auto-quoting nil)
  (<span style="color: #b6a0ff;">setq</span> web-mode-code-indent-offset 2)
  (<span style="color: #b6a0ff;">setq</span> web-mode-markup-indent-offset 2)
  (<span style="color: #b6a0ff;">setq</span> web-mode-attr-indent-offset 2)
  (<span style="color: #b6a0ff;">setq</span> web-mode-css-indent-offset 2)
  (<span style="color: #b6a0ff;">setq</span> web-mode-code-indent-offset 2)
  (<span style="color: #b6a0ff;">setq</span> web-mode-enable-auto-pairing t)
  (<span style="color: #b6a0ff;">setq</span> web-mode-enable-css-colorization t)
  (<span style="color: #b6a0ff;">setq</span> web-mode-enable-block-face t)
  (<span style="color: #b6a0ff;">setq</span> web-mode-enable-part-face t)
  (<span style="color: #b6a0ff;">setq</span> web-mode-enable-comment-keywords t)
  (add-to-list 'web-mode-indentation-params '(<span style="color: #79a8ff;">"lineup-args"</span> . nil))
  (add-to-list 'web-mode-indentation-params '(<span style="color: #79a8ff;">"lineup-calls"</span> . nil))
  (add-to-list 'web-mode-indentation-params '(<span style="color: #79a8ff;">"lineup-concats"</span> . nil))
  (add-to-list 'web-mode-indentation-params '(<span style="color: #79a8ff;">"lineup-ternary"</span> . nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org557ebab" class="outline-3">
<h3 id="org557ebab"><span class="section-number-3">17.25</span> Writeable Grep</h3>
<div class="outline-text-3" id="text-17-25">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">wgrep</span> <span style="color: #f78fe7;">:defer</span> <span style="color: #f78fe7;">:commands</span> wgrep
  <span style="color: #f78fe7;">:bind</span> (<span style="color: #f78fe7;">:map</span> grep-mode-map
              (<span style="color: #79a8ff;">"e"</span> . wgrep-change-to-wgrep-mode)
              (<span style="color: #79a8ff;">"C-x C-q"</span> . wgrep-change-to-wgrep-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d73237" class="outline-3">
<h3 id="org4d73237"><span class="section-number-3">17.26</span> Which Key</h3>
<div class="outline-text-3" id="text-17-26">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">which-key</span> <span style="color: #f78fe7;">:defer</span> 5
  <span style="color: #f78fe7;">:diminish</span> which-key-mode
  <span style="color: #f78fe7;">:config</span> (which-key-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaa5ba9a" class="outline-3">
<h3 id="orgaa5ba9a"><span class="section-number-3">17.27</span> YAML</h3>
<div class="outline-text-3" id="text-17-27">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">yaml-mode</span> <span style="color: #f78fe7;">:defer</span>
  <span style="color: #f78fe7;">:hook</span>
  (yaml-mode . hs-minor-mode)
  (yaml-mode . display-line-numbers-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6a105f5" class="outline-3">
<h3 id="org6a105f5"><span class="section-number-3">17.28</span> Yasnippet</h3>
<div class="outline-text-3" id="text-17-28">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">yasnippet</span> <span style="color: #f78fe7;">:defer</span>
  <span style="color: #f78fe7;">:diminish</span> yas-minor-mode
  <span style="color: #f78fe7;">:hook</span> (prog-mode . yas-minor-mode))
</pre>
</div>
</div>

<div id="outline-container-org88d3e49" class="outline-4">
<h4 id="org88d3e49"><span class="section-number-4">17.28.1</span> Snippets</h4>
<div class="outline-text-4" id="text-17-28-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">yasnippet-snippets</span> <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga20c382" class="outline-4">
<h4 id="orga20c382"><span class="section-number-4">17.28.2</span> Classic snippets</h4>
<div class="outline-text-4" id="text-17-28-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">yasnippet-classic-snippets</span> <span style="color: #f78fe7;">:defer</span>)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org678d42c" class="outline-2">
<h2 id="org678d42c"><span class="section-number-2">18</span> Safe Local Variables</h2>
<div class="outline-text-2" id="text-18">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> safe-local-variable-values
      '((eval add-hook 'after-save-hook 'org-babel-tangle nil t)
        (eval setq early-init (expand-file-name <span style="color: #79a8ff;">"early-init.el"</span> user-emacs-directory))
        (eval setq init-file (expand-file-name <span style="color: #79a8ff;">"init.el"</span> user-emacs-directory))))
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Toby Slight</p>
<p class="date">Created: 2020-12-29 Tue 14:00</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
